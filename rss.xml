<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>æ•¬ç»´</title>
    <description>ä¸€ä¸ªå–œæ¬¢æ¶‚æ¶‚ç”»ç”»çš„äººï¼Œæ›¾ç»çš„Rubistï¼Œä¸€ä¸ªCI/CDçš„è·µè¡Œè€…ï¼Œä¸€ä¸ªæ¢å¯»æœ€ä½³å®è·µçš„äººã€‚</description>
    <link>https://jingwei.link//</link>
    <atom:link href="https://jingwei.link/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sun, 05 Apr 2020 20:20:05 +0800</pubDate>
    <lastBuildDate>Sun, 05 Apr 2020 20:20:05 +0800</lastBuildDate>
    <generator>Jekyll v4.0.0</generator>
    
      <item>
        <title>èŒåœºäººå£«åº”è¯¥å­¦ä»€ä¹ˆä»¥åŠå¦‚ä½•å­¦ä¹ ï¼ˆç¼–ç é¢†åŸŸï¼‰</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; id=&quot;markdown-toc-å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#çŸ¥è¯†çš„ä¸åŒå±‚çº§&quot; id=&quot;markdown-toc-çŸ¥è¯†çš„ä¸åŒå±‚çº§&quot;&gt;çŸ¥è¯†çš„ä¸åŒå±‚çº§&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆ&quot; id=&quot;markdown-toc-è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆ&quot;&gt;è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#çŸ¥è¯†çš„åˆ†ç±»åº”è¯¥æ€ä¹ˆå­¦&quot; id=&quot;markdown-toc-çŸ¥è¯†çš„åˆ†ç±»åº”è¯¥æ€ä¹ˆå­¦&quot;&gt;çŸ¥è¯†çš„åˆ†ç±»ï¼ˆåº”è¯¥æ€ä¹ˆå­¦ï¼‰&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;ä¿—è¯è¯´ï¼Œâ€œæ´»åˆ°è€å­¦åˆ°è€â€ã€‚å¯¹ç¨‹åºå‘˜è€Œè¨€ï¼Œå°¤å…¶å¦‚æ­¤ï¼›æˆ–è€…è¯´çš„ä¸¥é‡ä¸€ç‚¹ï¼Œç¨‹åºå‘˜å”¯æœ‰æ­¤ä¸€æ¡è·¯ã€‚ç„¶è€Œï¼Œæ— è®ºæ˜¯èŒåœºæ–°äººè¿˜æ˜¯èŒåœºè€æ‰‹ï¼Œèƒ½å¤ŸåšæŒå­¦ä¹ çš„äººå´å‡¤æ¯›éºŸè§’ã€‚ä¸€æ–¹é¢æ˜¯å› ä¸º&lt;strong&gt;åšæŒå­¦ä¹ &lt;/strong&gt;éœ€è¦å¾ˆå¼ºçš„æ¯…åŠ›ï¼Œè€Œäººæœ‰å·æ‡’çš„åŠ£æ ¹åœ¨ï¼›å¦ä¸€æ–¹é¢åˆ™æ˜¯å› ä¸ºå­¦ä¹ ç›®æ ‡æ¨¡ç³Šï¼Œä¸çŸ¥é“è¯¥å­¦ä»€ä¹ˆï¼Œä¹Ÿä¸çŸ¥é“è¯¥æ€ä¹ˆå­¦ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæŠŠåšæŒå­¦ä¹ çœ‹åšä¸€ä¸ªä¹ æƒ¯ï¼Œå¦‚ä½•åŸ¹å…»è¿™ä¸ªä¹ æƒ¯æœ¬æ–‡ä¸åšè®¨è®ºï¼Œå¤§å®¶å¯ä»¥å…ˆè‡ªè¡Œæ€è€ƒï¼›æœ¬æ–‡åªå°è¯•åˆ†æçŸ¥è¯†çš„å±‚çº§ï¼Œä»è€Œä¾¿äºæˆ‘ä»¬è®¤æ¸…&lt;strong&gt;è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆä»¥åŠåº”è¯¥æ€ä¹ˆå­¦ä¹ &lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;çŸ¥è¯†çš„ä¸åŒå±‚çº§&quot;&gt;çŸ¥è¯†çš„ä¸åŒå±‚çº§&lt;/h2&gt;

&lt;p&gt;å‡è®¾ä»»ä½•é¢†åŸŸçš„çŸ¥è¯†åˆ†ä¸ºä¸åŒçš„å±‚çº§ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
ï¼ˆâ†‘å®è·µï¼‰
&lt;span class=&quot;c&quot;&gt;############################################################&lt;/span&gt;
L3 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;domain knowlege&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;     | L3-1 | L3-2  |  |  L3-3 | L3-4 | 
&lt;span class=&quot;c&quot;&gt;#########################|##############|##|##############|#&lt;/span&gt;
L2 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;practice knowledge&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  |    L2-1      |  |     L2-2     | 
&lt;span class=&quot;c&quot;&gt;############################################################&lt;/span&gt;
L1 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;general knowlege&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###################################&lt;/span&gt;
L0ï¼ˆlow-level knowledge&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;###########################&lt;/span&gt;
ï¼ˆâ†“ç†è®ºï¼‰
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ï¼ˆæŸä¸ªé¢†åŸŸçš„çŸ¥è¯†ç­‰çº§å›¾ï¼‰&lt;/p&gt;

&lt;p&gt;L0 ä»£è¡¨&lt;strong&gt;åº•å±‚åŸºç¡€å±‚&lt;/strong&gt;ï¼Œè¡¨ç¤ºé‚£äº›æ¯”è¾ƒå°‘æ¶‰åŠåˆ°çš„çŸ¥è¯†ï¼›L1 ä»£è¡¨&lt;strong&gt;é€šç”¨çŸ¥è¯†è¯†å±‚&lt;/strong&gt;ï¼Œè¡¨ç¤ºåªè¦æ¶‰åŠå½“å‰é¢†åŸŸçš„å·¥ä½œå°±éœ€è¦æŒæ¡çš„åŸºç¡€çŸ¥è¯†ï¼›L2 ä»£è¡¨å®è·µå±‚ï¼Œè¿™ä¸ªå±‚çº§çš„çŸ¥è¯†å¼€å§‹å‡ºç°é¢†åŸŸä¸Šçš„åˆæ­¥åˆ†åŒ–ï¼›L3 ä»£è¡¨é¢†åŸŸå±‚ï¼ŒåŒ…å«æ›´ä¸ºä¸“ä¸šçš„é¢†åŸŸçŸ¥è¯†ã€‚è¶Šå¾€ä¸‹é¢è¶Šåå‘ç†è®ºï¼Œè¶Šå¾€ä¸Šé¢è¶Šåå‘å®è·µã€‚ç›´ç™½åœ°ç†è§£ï¼Œè¶Šå¾€ä¸‹è¶Šæ¥è¿‘è¯¾å ‚é‡Œå­¦ä¹ åˆ°çš„çŸ¥è¯†ï¼Œè¶Šå¾€ä¸Šè¶Šæ¥è¿‘å·¥ä½œä¸­ç”¨åˆ°çš„çŸ¥è¯†ã€‚&lt;/p&gt;

&lt;p&gt;ä½œä¸ºä¸€åç¼–ç è€…ï¼Œç†æƒ³æƒ…å†µä¸‹éœ€è¦ä» L0 åˆ° L3 é€ä¸€è®­ç»ƒè‡ªå·±çš„èƒ½åŠ›ã€‚ä½†æ˜¯åœ¨ç²¾åŠ›é™åˆ¶ä»¥åŠæ—¶é—´é™åˆ¶çš„æƒ…å†µä¸‹ï¼Œæ— æ³•é¡¾å…¨æ‰€æœ‰ï¼Œåªèƒ½æœ‰é€‰æ‹©æ€§åœ°è¿›è¡Œå­¦ä¹ ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆ&quot;&gt;è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆ&lt;/h3&gt;

&lt;p&gt;åœ¨è®¨è®ºçŸ¥è¯†çš„æ—¶å€™ï¼Œåº„å­æ›¾è®²â€œå¾ç”Ÿä¹Ÿæœ‰æ¶¯ï¼Œè€ŒçŸ¥ä¹Ÿæ— æ¶¯â€ï¼Œé‚£ä¹ˆå¤šçŸ¥è¯†æ ¹æœ¬å­¦ä¹ ä¸å®Œï¼›è¿™å¯¹äºå­¦ä¹ è€…æ¥è¯´ç®—æ˜¯&lt;strong&gt;ä¸€ä¸ªåæ¶ˆæ¯&lt;/strong&gt;ã€‚ä½†æ˜¯å¹¶ä¸æ„å‘³ç€æ”¾å¼ƒå­¦ä¹ æ˜¯ä¸€ä»¶ç¿æ™ºçš„é€‰æ‹©ï¼ˆå…¶å®æ”¾å¼ƒå­¦ä¹ æ˜¯å¾ˆæ„šè ¢çš„é€‰æ‹©ï¼‰ï¼Œå› ä¸ºè¿˜æœ‰ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼Œè§£å†³å·¥ä½œä¸Šçš„å®é™…é—®é¢˜å¹¶ä¸éœ€è¦æ‰€æœ‰çš„çŸ¥è¯†ï¼Œæœ‰æ—¶å€™è§£å†³ä¸€ä¸ªé—®é¢˜åªéœ€è¦æŒæ¡ä¸€å°å—çŸ¥è¯†å°±è¶³å¤Ÿäº†ï¼›è¿™å¯¹äºå­¦ä¹ è€…æ¥è¯´ç®—æ˜¯&lt;strong&gt;ä¸€ä¸ªå¥½æ¶ˆæ¯&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è‡ªå·±åº”è¯¥å­¦ä¹ ä»€ä¹ˆï¼Ÿå¦‚æœç›®å‰å·¥ä½œä¸­éœ€è¦æŸä¸ªæŠ€èƒ½ï¼Œä½†æ˜¯è‡ªå·±ä¸å…·å¤‡è¿™ä¸ªæŠ€èƒ½ï¼ŒæŠ•å…¥æ—¶é—´ç²¾åŠ›å­¦ä¹ å§ï¼å¦‚æœè‡ªå·±æœªæ¥çš„å·¥ä½œä¸­ï¼ˆå·¥ä½œè½¬å‹ï¼‰éœ€è¦æŸä¸ªæŠ€èƒ½ï¼Œä½†æ˜¯è‡ªå·±ç›®å‰ä¸å…·å¤‡è¿™ä¸ªæŠ€èƒ½ï¼Œä¹ŸæŠ•å…¥æ—¶é—´å­¦ä¹ å§ï¼&lt;/p&gt;

&lt;p&gt;å¦‚æœè‡ªå·±ä¸çŸ¥é“å½“å‰çš„å·¥ä½œéœ€è¦å“ªä¸ªæŠ€èƒ½ï¼Œä¹Ÿä¸çŸ¥é“è‡ªå·±æœªæ¥çš„å·¥ä½œéœ€è¦å“ªä¸ªæŠ€èƒ½ï¼Œè¯´æ˜è‡ªå·±å¤„äºè¿·èŒ«é˜¶æ®µï¼Œä¸å¦¨å°è¯•ä¸€äº›åˆ«çš„äº‹æƒ…ã€‚å¯¹äºé IT é¢†åŸŸçš„åŒå­¦ï¼Œå¯ä»¥å°è¯•å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼›å¯¹äºå·²ç»æ˜¯ IT é¢†åŸŸçš„åŒå­¦ï¼Œå¯ä»¥å°è¯•é€šè¯»ä¸€ä¸‹æŸä¸ªç¼–ç¨‹è¯­è¨€çš„æ‰‹å†Œæ–‡æ¡£ï¼›ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;çŸ¥è¯†çš„åˆ†ç±»åº”è¯¥æ€ä¹ˆå­¦&quot;&gt;çŸ¥è¯†çš„åˆ†ç±»ï¼ˆåº”è¯¥æ€ä¹ˆå­¦ï¼‰&lt;/h3&gt;

&lt;p&gt;æ ¹æ®æˆ‘çš„å­¦ä¹ ç»å†åŠå·¥ä½œç»éªŒï¼Œæˆ‘å‘ç°åŸºæœ¬ä¸Šå¯ä»¥æŠŠçŸ¥è¯†åˆ†æˆä¸‹é¢å‡ ç±»ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ­»è®°ç¡¬èƒŒå‹çš„çŸ¥è¯†ç‚¹ï¼ˆæ¯”å¦‚ä¹ä¹ä¹˜æ³•å£è¯€ï¼‰&lt;/li&gt;
  &lt;li&gt;ç³»ç»Ÿç†è®ºå‹çš„çŸ¥è¯†ç‚¹ï¼ˆæ¯”å¦‚ä¹˜æ³•ç«–åˆ—å¼ï¼‰&lt;/li&gt;
  &lt;li&gt;ä¸€ç³»åˆ—çš„çŸ¥è¯†ç‚¹å½¢æˆçš„é¢†åŸŸæ ˆåªæ˜¯ï¼ˆæ¯”å¦‚ä»… python æŠ€æœ¯æ ˆåŒ…å«äº†æˆç™¾ä¸Šåƒä¸ªçŸ¥è¯†ç‚¹ï¼‰&lt;/li&gt;
  &lt;li&gt;åªæœ‰ç»å†è¿‡æ‰ä¼šæœ‰çš„çŸ¥è¯†ï¼ˆä¹Ÿå°±æ˜¯ä¸€èˆ¬æ‰€è¯´çš„ç»éªŒï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™å››ç±»é‡Œé¢ï¼Œæ­»è®°ç¡¬èƒŒå‹çš„çŸ¥è¯†ç‚¹éœ€è¦èŠ±è´¹æ—¶é—´è¿›è¡Œè®°å¿†ï¼Œå¦‚æœè®°å¿†åŠ›æ¯”è¾ƒå¥½çŸ­æ—¶é—´æˆ–è®¸å¯ä»¥æŒæ¡ï¼›ç³»ç»Ÿç†è®ºå‹çš„çŸ¥è¯†ç‚¹ä¸»è¦å‡­å€Ÿé€»è¾‘æ€ç»´èƒ½åŠ›è¿›è¡Œå­¦ä¹ ï¼Œå¦‚æœç†è§£èƒ½åŠ›å¥½ä¸€ç‚¹ä¹Ÿå¯ä»¥çŸ­æ—¶é—´å†…æŒæ¡ã€‚å‰é¢çš„è¿™ä¸¤ç§çŸ¥è¯†ç‚¹é€šè¿‡æ¯”è¾ƒçŸ­çš„æ—¶é—´æ˜¯å¯ä»¥æŒæ¡çš„ï¼Œä½†æ˜¯æ¥ä¸‹æ¥çš„&lt;strong&gt;é¢†åŸŸæ ˆåªæ˜¯å’Œç»éªŒä¸Šçš„çŸ¥è¯†éƒ½éœ€è¦æ—¶é—´ä¸Šçš„æ‰“ç£¨&lt;/strong&gt;ï¼Œå°¤å…¶ç»éªŒï¼Œæ²¡æœ‰æ—¶é—´ä¸Šçš„ç§¯ç´¯å‡ ä¹æ˜¯ä¸å¯èƒ½æœ‰æˆç»©çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè¯»è€…æœ‹å‹å·²ç»“æŸå­¦ç”Ÿæ—¶ä»£æ­¥å…¥ç¤¾ä¼šï¼Œæˆ–è®¸å·²ç»å¯ä»¥æ„è¯†åˆ°ï¼šå¾ˆå¤šèªæ˜çš„å°å­©å­è‡ªè®¤ä¸ºå‡­å€Ÿç€è‡ªå·±çš„èªæ˜æ‰æ™ºå¯ä»¥å¾ˆå®¹æ˜“åœ°æ”¶è·æ‰€æœ‰çŸ¥è¯†ï¼Œä»è€Œä¸ä»˜å‡ºåŠªåŠ›å­¦ä¹ ï¼Œè¿™æ˜¯ä¸€ä»¶å¤šä¹ˆæ„šè ¢çš„è¡Œä¸ºã€‚æœ‰çš„çŸ¥è¯†çš„å­¦ä¹ æœ¬å°±æ˜¯è€—æ—¶è€—ç²¾åŠ›çš„ï¼Œæ˜¯æ²¡æœ‰æ·å¾„æŒæ¡çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœ&lt;strong&gt;ç¡®è®¤äº†è‡ªå·±åº”è¯¥å­¦ä¹ çš„é¢†åŸŸæ ˆï¼Œä¸é—ä½™åŠ›åœ°å­¦ä¹ è¿™ä¸ªé¢†åŸŸæ ˆçš„çŸ¥è¯†ç‚¹ï¼Œç„¶åæƒ³å°½ä¸€åˆ‡åŠæ³•å®è·µè¿™äº›çŸ¥è¯†ç‚¹å§&lt;/strong&gt;ï¼&lt;/p&gt;

</description>
        <pubDate>Sun, 05 Apr 2020 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2020/04/05/learning-methodology.html</link>
        <guid isPermaLink="true">https://jingwei.link/2020/04/05/learning-methodology.html</guid>
        
        <category>åŸºç¡€</category>
        
        <category>å®ç”¨</category>
        
        
        <category>ç¼–ç¨‹</category>
        
      </item>
    
      <item>
        <title>å¦‚ä½•ä¸º Go è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç </title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; id=&quot;markdown-toc-å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ä¸º-go-è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &quot; id=&quot;markdown-toc-ä¸º-go-è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &quot;&gt;ä¸º Go è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#æˆ‘ä»¬å¾€å¾€å¿½ç•¥äº†å®˜æ–¹ææ–™çš„å­¦ä¹ &quot; id=&quot;markdown-toc-æˆ‘ä»¬å¾€å¾€å¿½ç•¥äº†å®˜æ–¹ææ–™çš„å­¦ä¹ &quot;&gt;æˆ‘ä»¬å¾€å¾€å¿½ç•¥äº†å®˜æ–¹ææ–™çš„å­¦ä¹ &lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#å¦‚ä½•ä¸º-go-è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &quot; id=&quot;markdown-toc-å¦‚ä½•ä¸º-go-è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &quot;&gt;å¦‚ä½•ä¸º Go è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å°ç»“&quot; id=&quot;markdown-toc-å°ç»“&quot;&gt;å°ç»“&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;

&lt;p&gt;äºŒé›¶ä¸€ä¹å¹´ï¼ˆ2019ï¼‰åˆ©ç”¨ä¸šä½™çš„æ—¶é—´åšäº†ä¸€å¥—&lt;a href=&quot;https://github.com/chalvern/books/tree/master/go/official_go_learning&quot;&gt;ã€ŠåŸæ±åŸå‘³Goè¯­è¨€å­¦ä¹ ã€‹&lt;/a&gt;çš„è§†é¢‘è¯¾ç¨‹ï¼Œä¸»è¦æ¶‰åŠåˆ° Go å®˜æ–¹çš„å‡ ä¸ªæ–‡æ¡£èµ„æ–™çš„å­¦ä¹ ã€‚åœ¨ç¿»è¯‘å®˜æ–¹æ–‡æ¡£çš„è¿‡ç¨‹ä¸­å‘ç°æœ‰ä¸€å¤„é”™è¯¯ï¼ˆå‰å‰ååçœ‹äº†å¾ˆå¤šéï¼Œæ¯æ¬¡çœ‹åˆ°éƒ½è§‰å¾—ä¸çˆ½ï¼‰ï¼Œè°ƒç ”åå‘ç°æ˜¯ Go æºç ä»“åº“ä¸­çš„æ–‡æ¡£ï¼Œäºæ˜¯å¿ƒè¡€æ¥æ½®ä¿®æ­£é”™è¯¯å¹¶æäº¤äº† commitï¼Œç§å¿ƒé‡Œè¿˜ç¢ç£¨ç€å¦‚æœä»£ç è¢«åˆå¹¶è‡ªå·±ä»¥åå²‚ä¸å°±å¯ä»¥å¹å˜˜æ˜¯&lt;strong&gt;Goè¯­è¨€æºç çš„è´¡çŒ®è€…&lt;/strong&gt;äº†ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æŒ‰ç…§å®˜æ–¹æŒ‡å¼•ï¼Œæ˜¥èŠ‚æ”¾å‡å‰æäº¤ä¿®æ­£å¹¶å¾—åˆ°ç®¡ç†å‘˜çš„æ­£åé¦ˆï¼Œç„¶åä¸€ç›´å…³æ³¨äº†å¥½ä¹…ä½†ä¸è§ä»£ç è¢«åˆå¹¶ï¼Œä¸€åº¦ä»¥ä¸ºè‡ªå·±çš„è¿™ä¸ªæäº¤è¢«å¿½ç•¥äº†ï¼Œä¸è¿‡æœ€è¿‘çœ‹åˆ°å·²ç»è¢«åˆå¹¶åˆ°äº†&lt;a href=&quot;https://github.com/golang/go/commit/34830beffa6396129bd9d9da58afb7a046775d49&quot;&gt;Goä¸»åˆ†æ”¯&lt;/a&gt;ã€‚å¼€å¿ƒğŸ˜¸ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®æ•´ä¸ªæäº¤è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒæµç•…çš„ï¼Œç°åœ¨ç®€å•æ€»ç»“è®°å½•ä¸€ä¸‹ä¾›è‡ªå·±ä»¥åŠä»–äººå‚è€ƒã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸º-go-è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &quot;&gt;ä¸º Go è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &lt;/h2&gt;

&lt;h3 id=&quot;æˆ‘ä»¬å¾€å¾€å¿½ç•¥äº†å®˜æ–¹ææ–™çš„å­¦ä¹ &quot;&gt;æˆ‘ä»¬å¾€å¾€å¿½ç•¥äº†å®˜æ–¹ææ–™çš„å­¦ä¹ &lt;/h3&gt;

&lt;p&gt;ç”±äºæ¯ä¸ªäººå­¦ä¹ ç¼–ç¨‹çš„æ–¹å¼ä¸åŒï¼Œå¯èƒ½æ— æ³•è¯„ä¼°å‡ºç¼–ç¨‹çš„æœ€ä½³å­¦ä¹ æ–¹å¼ï¼›ä½†æ˜¯ä½œä¸ºç†Ÿç»ƒç¨‹åº¦çš„åŸºå‡†ï¼Œè¯­è¨€çš„å®˜æ–¹æ–‡æ¡£ç†åº”æ˜¯å…¶æœ€ä½³çš„å­¦ä¹ èµ„æ–™ã€‚ä»¥ Go è¯­è¨€ä¸ºä¾‹ï¼Œå¯èƒ½å¸‚é¢ä¸Šå­˜åœ¨å¾ˆå¤š Go è¯­è¨€ç›¸å…³çš„ä¹¦ç±ï¼Œä½†æ˜¯ä»»ä½•ä¸€æœ¬ä¹¦éƒ½æ— æ³•è®©è‡ªå·±ç²¾é€š Go è¯­è¨€ç¼–ç¨‹ï¼ˆå¦‚æœæœ‰ç±»ä¼¼æ ‡æ¦œçš„ä¹¦ç±ï¼Œåƒä¸‡ä¸è¦ä¹°ï¼‰ï¼›ä»è¿™ä¸ªè§’åº¦è®²ï¼Œä¹¦ç±åªèƒ½ä½œä¸ºç¼–ç¨‹è¯­è¨€å­¦ä¹ çš„æŒ‡å¼•è€…â€”â€”æ¿€èµ·å­¦ä¹ è€…çš„å­¦ä¹ çƒ­æƒ…ï¼Œå¯å‘å­¦ä¹ è€…çš„å­¦ä¹ è·¯å¾„â€”â€”å…¶ä»–çš„æŠ€æœ¯ç»†èŠ‚å’ŒæŠ€å·§ä»ç„¶éœ€è¦å­¦ä¹ è€…è‡ªå·±å»æ¢ç´¢ä½“ä¼šã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡è™½è¯´ç¼–ç¨‹è¯­è¨€çš„å®˜æ–¹æ–‡æ¡£æ˜¯æœ€ä½³çš„å­¦ä¹ èµ„æ–™ï¼Œä½†æ˜¯å®˜æ–¹æ–‡æ¡£å¾€å¾€æ˜¯æ¯ç‡¥æ— è¶£çš„ï¼Œå› æ­¤ä¹Ÿéš¾æ€ªå¾ˆå¤šäººéƒ½ä¸å–œæ¬¢è¯»ã€‚å¯æ˜¯ï¼Œç¼–ç¨‹è¯­è¨€çš„å­¦ä¹ ä¸æŒæ¡æœ¬å°±æ˜¯ä¸€ä¸ªæ¯ç‡¥æ— è¶£çš„è¿‡ç¨‹ï¼Œåˆæœ‰ä»€ä¹ˆåŠæ³•â€¦â€¦&lt;/p&gt;

&lt;h3 id=&quot;å¦‚ä½•ä¸º-go-è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &quot;&gt;å¦‚ä½•ä¸º Go è¯­è¨€æºç ä»“åº“è´¡çŒ®ä»£ç &lt;/h3&gt;

&lt;p&gt;åªéœ€å‚è€ƒ ã€Š&lt;a href=&quot;https://golang.google.cn/doc/contribute.html&quot;&gt;Contribution Guide å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ã€‹å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;å¤§å®¶å¯ä»¥çœ‹åˆ°æ•´ä¸ªæ–‡æ¡£éƒ½æ˜¯è‹±æ–‡èµ„æ–™ï¼Œä¸”åœ¨æäº¤ä»£ç è®©åˆ«äººå®¡æ ¸çš„è¿‡ç¨‹ä¸­ä¹Ÿéƒ½æ˜¯è‹±æ–‡æ²Ÿé€šäº¤æµï¼Œå› æ­¤è¿™é‡Œå…³é”®çš„ç‚¹æˆ–è®¸æ˜¯æŠŠè‹±æ–‡å­¦å¥½â€¦â€¦&lt;/p&gt;

&lt;p&gt;ä»æˆ‘ä¸ªäººçš„ç»éªŒçœ‹ï¼Œåªè¦è‹±æ–‡å¤Ÿå¥½ï¼Œç¡®å®å‘ç°äº†æºç ä¸­ä¸åˆç†çš„åœ°æ–¹ï¼Œåˆè§‰å¾—è‡ªå·±æœ‰å¥½ç‚¹å­ï¼Œéƒ½å¯ä»¥ä¸º Go è¯­è¨€è´¡çŒ®ä»£ç ã€‚ä¸ºäº†ç ´é™¤å¤§å®¶å¯¹æäº¤ä»£ç è¿™ä»¶äº‹æƒ…çš„ç¥ç§˜æ„Ÿï¼Œè¿™é‡Œç®€å•ç½—åˆ—ä¸€ä¸‹&lt;a href=&quot;https://golang.google.cn/doc/contribute.html&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;é‡Œä»‹ç»çš„å‡ ä¸ªç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é¦–å…ˆå‡†å¤‡å¥½è´¦æˆ·å¹¶ç­¾ç½²è´¡çŒ®è€…åè®®ï¼ˆGoogleè´¦æˆ·ã€Gerritè´¦æˆ·ï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;é…ç½®è‡ªå·±æœ¬åœ°çš„ç¯å¢ƒï¼ˆé…ç½® gitã€é…ç½® gerritï¼Œåè€…æ˜¯è°·æ­Œå®˜æ–¹æä¾›çš„ä¸€ä¸ªå°å·¥å…·ï¼Œå¯ä»¥ä¿æŒè‡ªå·±çš„ commit ä¿¡æ¯çš„è§„èŒƒï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;ä¿®æ”¹å®Œä»£ç åå°±å¯ä»¥ä½¿ç”¨ gerrit æäº¤äº†;&lt;/li&gt;
  &lt;li&gt;æäº¤å®Œæˆååˆ° https://go.googlesource.com/ å¯ä»¥è§‚å¯Ÿè¿›åº¦ï¼Œç”šè‡³å¯èƒ½éœ€è¦æ ¹æ®ä¿®æ”¹æ„è§è¿›è¡Œå†…å®¹ä¸Šçš„é˜è¿°ã€ä¿®æ”¹ç­‰ï¼›&lt;/li&gt;
  &lt;li&gt;ç­‰æäº¤çš„å†…å®¹è¢«å®Œå…¨è®¤åŒä»¥åï¼Œå‰©ä¸‹çš„å°±æ˜¯è€å¿ƒç­‰ç€è¢«åˆå¹¶åˆ° Master ä¸»åˆ†æ”¯äº†ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h2&gt;

&lt;p&gt;è‡ªå·±çš„ä»£ç è¢«åˆå¹¶åˆ°ä¸»ä»“åº“ï¼Œå¥½åƒè¿™ä»½å¼€å¿ƒæ…¢æ…¢åœ°ä¹Ÿæ¶ˆæ•£äº†ã€‚ç»ˆäºè¿˜æ˜¯è¦è¸è¸å®å®åœ°è§£å†³ä¸šåŠ¡é—®é¢˜ï¼Œå¦‚æ­¤è‡ªå·±çš„åˆ›é€ æ‰æ˜¯æœ‰ä»·å€¼çš„ã€‚&lt;/p&gt;

</description>
        <pubDate>Sun, 15 Mar 2020 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2020/03/15/contribute_golang_process.html</link>
        <guid isPermaLink="true">https://jingwei.link/2020/03/15/contribute_golang_process.html</guid>
        
        <category>golang</category>
        
        <category>æœ€ä½³å®è·µ</category>
        
        
        <category>golang</category>
        
      </item>
    
      <item>
        <title>æ›´å®ç”¨çš„ Go å¼€å‘çš„ç¤¾åŒºè®ºå›â€”â€”apollo å¼€æºé¡¹ç›®ä»‹ç»</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#apollo-é¡¹ç›®&quot; id=&quot;markdown-toc-apollo-é¡¹ç›®&quot;&gt;apollo é¡¹ç›®&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ä½¿ç”¨åˆ°çš„åº“æˆ–æ¡†æ¶&quot; id=&quot;markdown-toc-ä½¿ç”¨åˆ°çš„åº“æˆ–æ¡†æ¶&quot;&gt;ä½¿ç”¨åˆ°çš„åº“ï¼ˆæˆ–æ¡†æ¶ï¼‰&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å®‰è£…è¿è¡Œ&quot; id=&quot;markdown-toc-å®‰è£…è¿è¡Œ&quot;&gt;å®‰è£…è¿è¡Œ&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ç¯å¢ƒè¦æ±‚&quot; id=&quot;markdown-toc-ç¯å¢ƒè¦æ±‚&quot;&gt;ç¯å¢ƒè¦æ±‚&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#è¯¦ç»†æ­¥éª¤&quot; id=&quot;markdown-toc-è¯¦ç»†æ­¥éª¤&quot;&gt;è¯¦ç»†æ­¥éª¤&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å…¶ä»–èµ„æ–™&quot; id=&quot;markdown-toc-å…¶ä»–èµ„æ–™&quot;&gt;å…¶ä»–èµ„æ–™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;apollo-é¡¹ç›®&quot;&gt;apollo é¡¹ç›®&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/chalvern/apollo&quot;&gt;apollo&lt;/a&gt; é¡¹ç›®çš„ä¸»ä½“æ˜¯ä¸€ä¸ª go è¯­è¨€åŸç”Ÿçš„ bbs ç¤¾åŒºç³»ç»Ÿï¼Œä¸»è¦ä¸ºäº†å¼¥è¡¥å½“å‰ go è¯­è¨€åŸç”Ÿç¤¾åŒºç³»ç»Ÿçš„ç©ºç™½ã€‚åœ¨å‰åç«¯åˆ†ç¦»ç››è¡Œçš„ä»Šå¤©ï¼Œè¶Šæ¥è¶Šå¤šçš„æŠ€æœ¯ç»†èŠ‚è¢«é»˜è®¤å­˜åœ¨ï¼Œæ— å½¢ä¸­ä¹Ÿå°±å¢åŠ äº†åˆå­¦è€…åœ¨è¿™ä¸ªæŠ€æœ¯æ ˆçš„å­¦ä¹ é—¨æ§›ã€‚&lt;a href=&quot;https://github.com/chalvern/apollo&quot;&gt;apollo&lt;/a&gt; é¡¹ç›®ä¸“æ³¨åœ¨ go æŠ€æœ¯æ ˆï¼Œä»å‘½ä»¤è¡Œå¯åŠ¨ã€é…ç½®è¯»å–ï¼Œåˆ°æ•°æ®åº“è®¿é—®ã€htmlæ¨¡æ¿æ¸²æŸ“ï¼Œå‡ç›´æ¥é‡‡ç”¨äº† go å¯¹åº”çš„åº“ï¼›é™¤äº†è¯­è¨€å±‚é¢çš„å­¦ä¹ ï¼Œ&lt;a href=&quot;https://github.com/chalvern/apollo&quot;&gt;apollo&lt;/a&gt; é¡¹ç›®è¿˜æŠ½è±¡äº†ä¸€äº› web è®¾è®¡ä¸­å¯èƒ½æ¶‰åŠçš„åŸºæœ¬ç‚¹ï¼Œä»è€Œä¾¿äºåˆå­¦è€…æœªæ¥äº†è§£è®¾è®¡æ›´ä¸ºå®å¤§çš„é¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºç»éªŒå°šæµ…ï¼Œå†åŠ ä¸Šæ—¶é—´å› ç´ çº¦æŸï¼Œé¡¹ç›®ä¸­éš¾å…æœ‰ä¸€äº›ä¸é›…çš„è®¾è®¡ï¼Œæ¬¢è¿å¤§å®¶åˆ›å»º issue æŒ‡å‡ºé—®é¢˜ï¼Œå¹¶æ¬¢è¿å¤§å®¶æäº¤æ›´ä¸ºå®Œå–„çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;è®¾è®¡ç»†èŠ‚è¯·æŸ¥çœ‹ &lt;a href=&quot;https://github.com/chalvern/apollo/tree/master/wiki&quot;&gt;wiki&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä½¿ç”¨åˆ°çš„åº“æˆ–æ¡†æ¶&quot;&gt;ä½¿ç”¨åˆ°çš„åº“ï¼ˆæˆ–æ¡†æ¶ï¼‰&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;webâ€”â€”&lt;a href=&quot;https://github.com/gin-gonic/gin&quot;&gt;gin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;ORMâ€”â€”&lt;a href=&quot;https://github.com/jinzhu/gorm&quot;&gt;gorm&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;æ—¥å¿—â€”â€”&lt;a href=&quot;https://github.com/uber-go/zap&quot;&gt;uber/zap&lt;/a&gt;/&lt;a href=&quot;https://github.com/chalvern/sugar&quot;&gt;sugar&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;é…ç½®â€”â€”&lt;a href=&quot;https://github.com/spf13/viper&quot;&gt;viper&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;å…¶ä»–å¯å‚è€ƒ &lt;a href=&quot;../go.mod&quot;&gt;go.mod&lt;/a&gt; æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;å®‰è£…è¿è¡Œ&quot;&gt;å®‰è£…è¿è¡Œ&lt;/h1&gt;

&lt;p&gt;apollo æ˜¯ä¸€ä¸ªåŠŸèƒ½è½»å®Œå¤‡çš„é¡¹ç›®ï¼Œç›®å‰å®ƒå·²å…·å¤‡æ³¨å†Œã€ç™»é™†ã€æ³¨é”€ã€å‘å¸–ã€ç¼–è¾‘ã€å›å¤ç­‰åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ä¸€äº›ç®€å•åº”ç”¨åœºæ™¯ä¸‹ä½¿ç”¨ã€‚å¯ä»¥åˆ° http://www.jianzhoubian.com) é¢„è§ˆï¼Œæµ‹è¯•å¥½åƒåªèƒ½ä½¿ç”¨ http åè®®è€Œä¸èƒ½ä½¿ç”¨ https åè®®è®¿é—®=ã€‚=&lt;/p&gt;

&lt;h2 id=&quot;ç¯å¢ƒè¦æ±‚&quot;&gt;ç¯å¢ƒè¦æ±‚&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;å®‰è£… goï¼ˆversion &amp;gt;= 1.13ï¼‰&lt;/li&gt;
  &lt;li&gt;å®‰è£… MySQLï¼ˆapollo ä½¿ç”¨äº† 5.7.28 è¿›è¡Œçš„å¼€å‘)&lt;/li&gt;
  &lt;li&gt;ï¼ˆå¯é€‰ï¼‰å®‰è£… make (Linux å’Œ MacOS ä¸Šé»˜è®¤åº”è¯¥éƒ½æœ‰)ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è¿è¡Œä¸€äº›å‘½ä»¤&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;è¯¦ç»†æ­¥éª¤&quot;&gt;è¯¦ç»†æ­¥éª¤&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸‹è½½æœ¬ä»“åº“çš„ä»£ç (åé¢çš„æ“ä½œéƒ½æ˜¯åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ)ï¼›&lt;/li&gt;
  &lt;li&gt;æ ¹æ® &lt;code class=&quot;highlighter-rouge&quot;&gt;configs/config.yml.example&lt;/code&gt; åˆ›å»º &lt;code class=&quot;highlighter-rouge&quot;&gt;configs/config.yml&lt;/code&gt; æ–‡ä»¶ï¼›&lt;/li&gt;
  &lt;li&gt;æ ¹æ® &lt;code class=&quot;highlighter-rouge&quot;&gt;configs/config.yml&lt;/code&gt; ä¸­æ•°æ®åº“ï¼ˆdatabaseï¼‰çš„é…ç½®ï¼Œåœ¨ MySQL ä¸­åˆ›å»ºç”¨æˆ·åŠæ•°æ®åº“ã€‚ä¸‹é¢ä»¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;apollo&lt;/code&gt; ä¸ºä¾‹&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- åˆ›å»º apollo æ•°æ®åº“ï¼Œé»˜è®¤å­—ç¬¦é›†ä¸º utf8mb4&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`apollo`&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`utf8mb4`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;-- åˆ›å»ºç”¨æˆ·åä¸º jingwei å¯†ç ä¸º 20200101 çš„ç”¨æˆ·ï¼Œå¹¶èµ‹æƒ apollo çš„æ‰€æœ‰æƒé™ç»™ jingwei&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GRANT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ALL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRIVILEGES&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;apollo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jingwei&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;%&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IDENTIFIED&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;20200101&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;è¿ç§»æ•°æ®è¡¨ç»“æ„ï¼š&lt;/p&gt;

    &lt;p&gt;1.1 å¦‚æœå®‰è£…äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;make&lt;/code&gt; å·¥å…·ï¼Œç›´æ¥è¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;make migrate&lt;/code&gt; å³å¯å®Œæˆæ•°æ®è¡¨çš„è¿ç§»ã€‚&lt;/p&gt;

    &lt;p&gt;1.2 å¦‚æœæ²¡æœ‰å®‰è£… &lt;code class=&quot;highlighter-rouge&quot;&gt;make&lt;/code&gt; å·¥å…·ï¼Œä¾æ¬¡æ‰§è¡Œï¼š&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# ä¸‹è½½ä¾èµ–&lt;/span&gt;
go mod tidy
&lt;span class=&quot;c&quot;&gt;# æ„å»º apollo.exe äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶&lt;/span&gt;
go build &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; apollo.exe main.go

&lt;span class=&quot;c&quot;&gt;# æ‰§è¡Œè¿ç§»&lt;/span&gt;
./apollo.exe migrate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;é€šè¿‡å‘½ä»¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;./apollo.exe&lt;/code&gt; è¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;apollo&lt;/code&gt; é¡¹ç›®ã€‚&lt;/li&gt;
  &lt;li&gt;é€šè¿‡æµè§ˆå™¨è®¿é—® &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:2020&lt;/code&gt; å³å¯çœ‹åˆ°å¯¹åº”çš„é¡µé¢ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;å…¶ä»–èµ„æ–™&quot;&gt;å…¶ä»–èµ„æ–™&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/av86199253&quot;&gt;è§†é¢‘ä»‹ç»&lt;/a&gt; ã€åŸæ±åŸå‘³goè¯­è¨€å­¦ä¹ ã€‘(14) å®è·µç¯‡ä¹‹ apollo å¼€æºé¡¹ç›®ä»‹ç»&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Sat, 08 Feb 2020 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2020/02/08/appolo-go-web-blog.html</link>
        <guid isPermaLink="true">https://jingwei.link/2020/02/08/appolo-go-web-blog.html</guid>
        
        <category>golang</category>
        
        <category>å®ç”¨</category>
        
        <category>æœ€ä½³å®è·µ</category>
        
        
        <category>golang</category>
        
      </item>
    
      <item>
        <title>ä¸ºå›¢é˜Ÿå¯»æ‰¾åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ˆæ‹›è˜ï¼‰</title>
        <description>&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;

&lt;p&gt;ç¨‹åºå‘˜æ˜¯â€œæ´»åˆ°è€å­¦åˆ°è€â€çš„è·µè¡Œè€…ï¼Œæ— è®ºæ˜¯å‰ç«¯å¼€å‘è€…è¿˜æ˜¯åç«¯å¼€å‘è€…ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚å¸Œæœ›ä½ ä¹Ÿæ˜¯è¿™æ ·çš„ç¨‹åºå‘˜ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨åŠ å…¥å½“å‰çš„å…¬å¸ï¼ˆ&lt;strong&gt;ä¸Šæµ·Â·æ¡‚æ—è·¯&lt;/strong&gt;ï¼‰åï¼Œéšç€å…¬å¸ä¸šåŠ¡é€æ¸å±•å¼€ï¼Œå‘ç°å›¢é˜Ÿé‡Œçš„äº‹æƒ…ä¹Ÿå¤šèµ·æ¥äº†ï¼Œå› æ­¤å¼€è´´æ‰¾ä¸€èµ·å…±äº‹ä¸€èµ·å­¦ä¹ çš„åŒäº‹ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åç«¯å¼€å‘å·¥ç¨‹å¸ˆ&quot;&gt;åç«¯å¼€å‘å·¥ç¨‹å¸ˆ&lt;/h2&gt;

&lt;p&gt;èŒä½æè¿°ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;å‚ä¸å®Œæˆé¡¹ç›®çš„ç³»ç»Ÿåˆ†æã€è®¾è®¡ï¼Œå¹¶è´Ÿè´£ä¸šåŠ¡åŠŸèƒ½ä¸åº•å±‚åŸºç¡€åŠŸèƒ½çš„åŠŸèƒ½è®¾è®¡ã€ä»£ç å®ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¸Œæœ›ä½ ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æœ‰ 2 å¹´ä»¥ä¸Šçš„åç«¯å¼€å‘ç»éªŒï¼›&lt;/li&gt;
  &lt;li&gt;ç†Ÿç»ƒä½¿ç”¨ Java/Go/Python ä¸­çš„ä¸€ç§æˆ–å¤šç§ç¼–ç¨‹è¯­è¨€ï¼›&lt;/li&gt;
  &lt;li&gt;äº†è§£å¹¶èƒ½ç†Ÿç»ƒä½¿ç”¨å¸¸è§çš„æ•°æ®åº“ï¼ˆMysqlã€ElasticSearchã€MongoDBã€Redis ç­‰ï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;æŒæ¡è®¡ç®—æœºåŸºæœ¬ç†è®ºçŸ¥è¯†ï¼ŒåŒ…æ‹¬åŸºç¡€ç½‘ç»œã€å­˜å‚¨ã€ç®—æ³•ç­‰ï¼›&lt;/li&gt;
  &lt;li&gt;å¦‚æœè‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œå¯ä»¥ä¸å—ä¸Šé¢æ¡æ¬¾çš„é™åˆ¶ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ¬¢è¿é‚®ä»¶ï¼ˆzhjw43@163.comï¼‰éªšæ‰°ã€‚&lt;/p&gt;
</description>
        <pubDate>Fri, 03 Jan 2020 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2020/01/03/you-can-be-my-coworker.html</link>
        <guid isPermaLink="true">https://jingwei.link/2020/01/03/you-can-be-my-coworker.html</guid>
        
        <category>ç®¡ç†</category>
        
        <category>å®ç”¨</category>
        
        
        <category>ç®¡ç†</category>
        
      </item>
    
      <item>
        <title>ã€ŠåŸæ±åŸå‘³ Go è¯­è¨€å­¦ä¹ ã€‹(13) Go å†…å­˜æ¨¡å‹</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#èµ„æ–™&quot; id=&quot;markdown-toc-èµ„æ–™&quot;&gt;èµ„æ–™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ç®€ä»‹introduction&quot; id=&quot;markdown-toc-ç®€ä»‹introduction&quot;&gt;ç®€ä»‹ï¼ˆIntroductionï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å»ºè®®advice&quot; id=&quot;markdown-toc-å»ºè®®advice&quot;&gt;å»ºè®®ï¼ˆAdviceï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å‘ç”Ÿåœ¨ä¹‹å‰happens-before&quot; id=&quot;markdown-toc-å‘ç”Ÿåœ¨ä¹‹å‰happens-before&quot;&gt;å‘ç”Ÿåœ¨â€¦ä¹‹å‰ï¼ˆHappens Beforeï¼‰&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#åŒæ­¥åŒ–synchronization&quot; id=&quot;markdown-toc-åŒæ­¥åŒ–synchronization&quot;&gt;åŒæ­¥åŒ–ï¼ˆSynchronizationï¼‰&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#åˆå§‹åŒ–&quot; id=&quot;markdown-toc-åˆå§‹åŒ–&quot;&gt;åˆå§‹åŒ–&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#goåç¨‹çš„åˆ›å»º&quot; id=&quot;markdown-toc-goåç¨‹çš„åˆ›å»º&quot;&gt;Goåç¨‹çš„åˆ›å»º&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#goåç¨‹çš„é”€æ¯&quot; id=&quot;markdown-toc-goåç¨‹çš„é”€æ¯&quot;&gt;Goåç¨‹çš„é”€æ¯&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ä¿¡é“é€šä¿¡&quot; id=&quot;markdown-toc-ä¿¡é“é€šä¿¡&quot;&gt;ä¿¡é“é€šä¿¡&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#é”&quot; id=&quot;markdown-toc-é”&quot;&gt;é”&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#å•æ¬¡è¿è¡Œ&quot; id=&quot;markdown-toc-å•æ¬¡è¿è¡Œ&quot;&gt;å•æ¬¡è¿è¡Œ&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ä¸æ­£ç¡®çš„åŒæ­¥æ–¹å¼&quot; id=&quot;markdown-toc-ä¸æ­£ç¡®çš„åŒæ­¥æ–¹å¼&quot;&gt;ä¸æ­£ç¡®çš„åŒæ­¥æ–¹å¼&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#é”™è¯¯ä¸€åŒé‡æ£€æŸ¥é”å®š&quot; id=&quot;markdown-toc-é”™è¯¯ä¸€åŒé‡æ£€æŸ¥é”å®š&quot;&gt;é”™è¯¯ä¸€ï¼šåŒé‡æ£€æŸ¥é”å®š&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#é”™è¯¯äºŒæŸä¸ªå€¼çš„å¾ªç¯æ£€æŸ¥&quot; id=&quot;markdown-toc-é”™è¯¯äºŒæŸä¸ªå€¼çš„å¾ªç¯æ£€æŸ¥&quot;&gt;é”™è¯¯äºŒï¼šæŸä¸ªå€¼çš„å¾ªç¯æ£€æŸ¥&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#é”™è¯¯ä¸‰å¾ªç¯æ£€æŸ¥çš„å˜å½¢&quot; id=&quot;markdown-toc-é”™è¯¯ä¸‰å¾ªç¯æ£€æŸ¥çš„å˜å½¢&quot;&gt;é”™è¯¯ä¸‰ï¼šå¾ªç¯æ£€æŸ¥çš„å˜å½¢&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;èµ„æ–™&quot;&gt;èµ„æ–™&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://golang.google.cn/ref/mem&quot;&gt;Go å†…å­˜æ¨¡å‹åŸæ–‡åœ°å€&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/av79339158/&quot;&gt;æœ¬æ–‡çš„è§†é¢‘åœ°å€&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ç®€ä»‹introduction&quot;&gt;ç®€ä»‹ï¼ˆIntroductionï¼‰&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Go å†…å­˜æ¨¡å‹&lt;/strong&gt;æ¶‰åŠåˆ°ä¸¤ä¸ª Goåç¨‹ ä¹‹é—´å¯¹åŒä¸€ä¸ªå˜é‡çš„è¯»å†™ã€‚å‡å¦‚æœ‰ä¸€ä¸ªå˜é‡ï¼Œå…¶ä¸­ä¸€ä¸ª Goåç¨‹(a) å†™è¿™ä¸ªå˜é‡ï¼Œå¦ä¸€ä¸ª Goåç¨‹(b) è¯»è¿™ä¸ªå˜é‡ï¼›Go å†…å­˜æ¨¡å‹å®šä¹‰äº†&lt;strong&gt;ä»€ä¹ˆæƒ…å†µä¸‹&lt;/strong&gt; Goåç¨‹(b) èƒ½å¤Ÿç¡®ä¿è¯»å–åˆ°ç”± Goåç¨‹(a) å†™å…¥çš„å€¼ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å»ºè®®advice&quot;&gt;å»ºè®®ï¼ˆAdviceï¼‰&lt;/h2&gt;

&lt;p&gt;å¤šåç¨‹å¹¶å‘ä¿®æ”¹æ•°æ®çš„ç¨‹åºå¿…é¡»ä¿è¯å„ä¸ªæ­¥éª¤ä¸²è¡Œæ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†ä¸²è¡Œæ‰§è¡Œå„æ­¥ï¼Œå¯ä»¥ä½¿ç”¨&lt;strong&gt;ä¿¡é“&lt;/strong&gt;æˆ– &lt;a href=&quot;https://golang.google.cn/pkg/sync/&quot;&gt;sync&lt;/a&gt; å’Œ &lt;a href=&quot;https://golang.google.cn/pkg/sync/atomic/&quot;&gt;sync/atomic&lt;/a&gt; ä¸¤ä¸ªåŒ…é‡Œçš„åŒæ­¥åŸè¯­æ¥ä¿æŠ¤è¢«å…±äº«çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºå¹¶å‘ç¼–ç¨‹æ˜¯ä¸€ä»¶å¾ˆå¤æ‚çš„äº‹æƒ…ï¼Œè¯·å¤§å®¶åœ¨å­¦ä¹ æœ¬æ–‡çš„åŸºç¡€ä¸Šå†å¤šåŠ ç»ƒä¹ ï¼Œä¸èƒ½ä»…ä¾èµ–æœ¬æ–‡æ¥æŒæ¡å¹¶å‘ç¼–ç¨‹çš„çŸ¥è¯†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‘ç”Ÿåœ¨ä¹‹å‰happens-before&quot;&gt;å‘ç”Ÿåœ¨â€¦ä¹‹å‰ï¼ˆHappens Beforeï¼‰&lt;/h2&gt;

&lt;p&gt;åœ¨ä¸€ä¸ª Goåç¨‹ é‡Œï¼Œå¯¹åŒä¸€ä¸ªå˜é‡çš„è¯»å†™å¿…ç„¶æ˜¯æŒ‰ç…§ä»£ç ç¼–å†™çš„é¡ºåºæ¥æ‰§è¡Œçš„ã€‚å¯¹äºå¤šä¸ªå˜é‡çš„è¯»å†™ï¼Œå¦‚æœé‡æ–°æ’åºä¸å½±å“ä»£ç é€»è¾‘çš„æ­£å¸¸æ‰§è¡Œï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹å¤šä¸ªå˜é‡çš„è¯»å†™è¿‡ç¨‹&lt;strong&gt;é‡æ–°æ’åº&lt;/strong&gt;ï¼›æ¯”å¦‚å¯¹äº &lt;code class=&quot;highlighter-rouge&quot;&gt;a = 1; b = 2&lt;/code&gt; è¿™ä¸¤ä¸ªè¯­å¥ï¼Œåœ¨åŒä¸€ä¸ª Goåç¨‹ é‡Œå…ˆæ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;a=1&lt;/code&gt; è¿˜æ˜¯å…ˆæ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;b=2&lt;/code&gt; å…¶å®æ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚ä½†æ˜¯ï¼Œå› ä¸ºé‡æ–°æ’åˆ—æ‰§è¡Œé¡ºåºçš„æƒ…å†µçš„å­˜åœ¨ï¼Œä¼šå¯¼è‡´æŸä¸ª Goåç¨‹ æ‰€è§‚å¯Ÿåˆ°çš„æ‰§è¡Œé¡ºåºå¯èƒ½ä¸å¦ä¸€ä¸ª Goåç¨‹ è§‚å¯Ÿåˆ°çš„æ‰§è¡Œé¡ºåºä¸ä¸€æ ·ã€‚è¿˜æ˜¯æ‹¿ &lt;code class=&quot;highlighter-rouge&quot;&gt;a = 1; b = 2&lt;/code&gt; ä¸¾ä¾‹ï¼Œå¦‚æœåœ¨æŸä¸ªåç¨‹é‡Œä¾æ¬¡æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;a = 1; b = 2&lt;/code&gt;ï¼Œç”±äº&lt;strong&gt;é‡æ–°æ’åº&lt;/strong&gt;çš„å­˜åœ¨å¯èƒ½å¦ä¸€ä¸ª Goåç¨‹ è§‚å¯Ÿåˆ°çš„äº‹å®æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;b&lt;/code&gt; çš„å€¼å…ˆè¢«æ›´æ–°ï¼Œè€Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt; çš„å€¼è¢«åæ›´æ–°ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†è¡¨å¾è¯»å†™éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰â€œå‘ç”Ÿåœ¨â€¦ä¹‹å‰â€ï¼Œç”¨æ¥è¡¨ç¤º Go è¯­è¨€ä¸­æŸä¸€å°æ®µå†…å­˜å‘½ä»¤çš„æ‰§è¡Œé¡ºåºã€‚å¦‚æœäº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;e1&lt;/code&gt; å‘ç”Ÿåœ¨äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;e2&lt;/code&gt; ä¹‹å‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è®¤ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;e2&lt;/code&gt; å‘ç”Ÿåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;e1&lt;/code&gt; ä¹‹åã€‚å¦‚æœäº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;e1&lt;/code&gt; æ—¢ä¸å‘ç”Ÿåœ¨äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;e2&lt;/code&gt; ä¹‹å‰ï¼Œä¹Ÿä¸å‘ç”Ÿåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;e2&lt;/code&gt; ä¹‹åï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è®¤ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;e1&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;e2&lt;/code&gt; åŒæ—¶å‘ç”Ÿï¼ˆå¹¶å‘ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸€ä¸ª Goåç¨‹ å†…éƒ¨ï¼Œè°å‘ç”Ÿåœ¨è°ä¹‹å‰çš„é¡ºåºå°±æ˜¯ä»£ç æ˜¾å¼å®šä¹‰çš„é¡ºåºã€‚æ¯”å¦‚ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è‚¯å®šæ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;a := 1&lt;/code&gt; å…ˆæ‰§è¡Œï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;fmt.Println(a)&lt;/code&gt; åæ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å½“ Goåç¨‹ ä¸ä»…ä»…å±€é™åœ¨ä¸€ä¸ªçš„æ—¶å€™ï¼Œå­˜åœ¨ä¸‹é¢ä¸¤ä¸ªè§„åˆ™ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™ä¸€&lt;/strong&gt;ï¼šå¦‚æœå­˜åœ¨ä¸€ä¸ªå˜é‡ vï¼Œå¦‚æœä¸‹é¢çš„ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œåˆ™è¯»æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; &lt;strong&gt;å…è®¸è§‚å¯Ÿåˆ°&lt;/strong&gt;ï¼ˆå¯èƒ½è§‚å¯Ÿåˆ°ï¼Œä¹Ÿå¯èƒ½è§‚å¯Ÿä¸åˆ°ï¼‰å†™æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; å†™å…¥çš„å€¼ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; &lt;strong&gt;ä¸åœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; ä¹‹å‰å‘ç”Ÿï¼›&lt;/li&gt;
  &lt;li&gt;ä¸å­˜åœ¨å…¶ä»–çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;wâ€™&lt;/code&gt; åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; ä¹‹åå‘ç”Ÿï¼Œä¹Ÿä¸å­˜åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;wâ€™&lt;/code&gt; åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; ä¹‹å‰å‘ç”Ÿã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™äºŒ&lt;/strong&gt;ï¼šä¸ºäº†ä¿è¯è¯»æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; è¯»å–åˆ°çš„æ˜¯å†™æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; å†™å…¥çš„å€¼ï¼Œéœ€è¦ç¡®ä¿ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; æ˜¯å”¯ä¸€å…è®¸è¢« &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; è§‚å¯Ÿåˆ°çš„å†™æ“ä½œã€‚å¦‚æœä¸‹é¢çš„ä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œåˆ™ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; ä¿è¯èƒ½å¤Ÿè§‚å¯Ÿåˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; å†™å…¥çš„å€¼ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; å‘ç”Ÿåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; ä¹‹å‰ï¼›&lt;/li&gt;
  &lt;li&gt;å…¶ä»–å¯¹å…±äº«å˜é‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;v&lt;/code&gt; çš„å†™æ“ä½œè¦ä¹ˆå‘ç”Ÿåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; ä¹‹å‰ï¼Œè¦ä¹ˆå‘ç”Ÿåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; ä¹‹åã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è§„åˆ™äºŒçš„æ¡ä»¶æ¯”è§„åˆ™ä¸€çš„æ¡ä»¶æ›´ä¸ºä¸¥æ ¼ï¼Œå®ƒè¦æ±‚æ²¡æœ‰å…¶ä»–çš„å†™æ“ä½œå’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; å¹¶å‘åœ°å‘ç”Ÿã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸€ä¸ª Goåç¨‹ é‡Œæ˜¯ä¸å­˜åœ¨å¹¶å‘çš„ï¼Œå› æ­¤è§„åˆ™ä¸€å’Œè§„åˆ™äºŒæ˜¯ç­‰æ•ˆçš„ï¼šè¯»æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; å¯ä»¥è§‚å¯Ÿåˆ°æœ€è¿‘ä¸€æ¬¡å†™æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; å†™å…¥çš„å€¼ã€‚ä½†æ˜¯ï¼Œå½“å¤šä¸ªåç¨‹è®¿é—®ä¸€ä¸ªå…±äº«å˜é‡çš„æ—¶å€™ï¼Œå°±å¿…é¡»&lt;strong&gt;ä½¿ç”¨åŒæ­¥äº‹ä»¶æ¥æ„å»º&lt;/strong&gt;â€œå‘ç”Ÿåœ¨â€¦ä¹‹å‰â€çš„æ¡ä»¶ï¼Œä»è€Œä¿è¯è¯»æ“ä½œè§‚å¯Ÿåˆ°çš„ä¸€å®šæ˜¯æƒ³è¦çš„å†™æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å†…å­˜æ¨¡å‹ä¸­ï¼Œå˜é‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;v&lt;/code&gt; çš„é›¶å€¼åˆå§‹åŒ–æ“ä½œç­‰åŒäºä¸€ä¸ªå†™æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœå˜é‡çš„å€¼å¤§äº&lt;strong&gt;å•æœºå™¨å­—&lt;/strong&gt;ï¼ˆCPU ä»å†…å­˜å•æ¬¡è¯»å–çš„å­—èŠ‚æ•°ï¼‰ï¼Œé‚£ä¹ˆ CPU åœ¨è¯»å’Œå†™è¿™ä¸ªå˜é‡çš„æ—¶å€™æ˜¯ä»¥ä¸€ç§ä¸å¯é¢„çŸ¥é¡ºåºçš„å¤šæ¬¡æ‰§è¡Œ&lt;strong&gt;å•æœºå™¨å­—&lt;/strong&gt;çš„æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯  &lt;a href=&quot;https://golang.google.cn/pkg/sync/atomic/&quot;&gt;sync/atomic&lt;/a&gt;  åŒ…å­˜åœ¨çš„ä»·å€¼ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åŒæ­¥åŒ–synchronization&quot;&gt;åŒæ­¥åŒ–ï¼ˆSynchronizationï¼‰&lt;/h2&gt;

&lt;h3 id=&quot;åˆå§‹åŒ–&quot;&gt;åˆå§‹åŒ–&lt;/h3&gt;

&lt;p&gt;ç¨‹åºçš„åˆå§‹åŒ–æ˜¯åœ¨ä¸€ä¸ªå•ç‹¬çš„ Goåç¨‹ ä¸­è¿›è¡Œçš„ï¼Œä½†æ˜¯è¿™ä¸ªåç¨‹å¯ä»¥åˆ›å»ºå…¶ä»–çš„ Goåç¨‹ å¹¶ä¸”äºŒè€…å¹¶å‘æ‰§è¡Œã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;å¦‚æœä¸€ä¸ªåŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;p&lt;/code&gt; å¯¼å…¥äº†åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;q&lt;/code&gt;ï¼Œ é‚£ä¹ˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;q&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;init&lt;/code&gt; å‡½æ•°çš„æ‰§è¡Œ&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;p&lt;/code&gt;çš„æ‰€æœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;init&lt;/code&gt; å‡½æ•°çš„æ‰§è¡Œ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;main.main&lt;/code&gt; çš„æ‰§è¡Œ&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;æ‰€æœ‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;init&lt;/code&gt; å‡½æ•°æ‰§è¡Œå®Œæˆ&lt;strong&gt;ä¹‹å&lt;/strong&gt;ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;goåç¨‹çš„åˆ›å»º&quot;&gt;Goåç¨‹çš„åˆ›å»º&lt;/h3&gt;

&lt;p&gt;åœ¨ Go è¯­è¨€ä¸­é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;go&lt;/code&gt; è¯­å¥åˆ›å»ºæ–°çš„ Goåç¨‹ å‘ç”Ÿåœ¨è¿™ä¸ª Goåç¨‹ çš„æ‰§è¡Œ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è°ƒç”¨å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;hello&lt;/code&gt; ä¼šåœ¨è°ƒç”¨åçš„æŸä¸ªæ—¶é—´ç‚¹æ‰“å° â€œhello, worldâ€ ï¼Œè¿™ä¸ªæ—¶é—´ç‚¹å¯èƒ½åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;hello&lt;/code&gt; å‡½æ•°è¿”å›ä¹‹å‰ï¼Œä¹Ÿå¯èƒ½åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;hello&lt;/code&gt; å‡½æ•°è¿”å›ä¹‹åã€‚&lt;/p&gt;

&lt;h3 id=&quot;goåç¨‹çš„é”€æ¯&quot;&gt;Goåç¨‹çš„é”€æ¯&lt;/h3&gt;

&lt;p&gt;Goåç¨‹çš„é€€å‡ºæ— æ³•ç¡®ä¿&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;ç¨‹åºçš„æŸä¸ªäº‹ä»¶&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…¶ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt; çš„èµ‹å€¼è¯­å¥æ²¡æœ‰ä»»ä½•çš„åŒæ­¥äº‹ä»¶ï¼Œå› æ­¤æ— æ³•ä¿è¯è¢«å…¶ä»–ä»»æ„çš„ Go åç¨‹è§‚å¯Ÿåˆ°è¿™ä¸ªèµ‹å€¼äº‹ä»¶çš„å­˜åœ¨ã€‚äº‹å®ä¸Šï¼Œä¸€äº›ç¼–è¯‘å™¨å¯èƒ½ä¼šåœ¨ç¼–è¯‘é˜¶æ®µåˆ é™¤ä¸Šé¢ä»£ç ä¸­çš„æ•´ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;go&lt;/code&gt; è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæŸä¸ª Goåç¨‹ é‡Œå‘ç”Ÿçš„äº‹ä»¶å¿…ç„¶è¦è¢«å¦ä¸€ä¸ª Goåç¨‹ è§‚å¯Ÿåˆ°ï¼Œéœ€è¦ä½¿ç”¨åŒæ­¥æœºåˆ¶è¿›è¡Œä¿è¯ï¼Œæ¯”å¦‚ä½¿ç”¨&lt;strong&gt;é”&lt;/strong&gt;æˆ–è€…&lt;strong&gt;ä¿¡é“&lt;/strong&gt;ï¼ˆchannelï¼‰é€šä¿¡æ¥æ„å»ºä¸€ä¸ªç›¸å¯¹çš„äº‹ä»¶å‘ç”Ÿé¡ºåºã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¿¡é“é€šä¿¡&quot;&gt;ä¿¡é“é€šä¿¡&lt;/h3&gt;

&lt;p&gt;ä¿¡é“é€šä¿¡æ˜¯ Goåç¨‹ é—´äº‹ä»¶åŒæ­¥çš„ä¸»è¦æ–¹å¼ã€‚åœ¨æŸä¸ªç‰¹å®šçš„ä¿¡é“ä¸Š&lt;strong&gt;å‘é€&lt;/strong&gt;ä¸€ä¸ªæ•°æ®ï¼Œåˆ™å¯¹åº”åœ°å¯ä»¥åœ¨è¿™ä¸ªä¿¡é“ä¸Š&lt;strong&gt;æ¥æ”¶&lt;/strong&gt;ä¸€ä¸ªæ•°æ®ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯åœ¨ä¸åŒçš„ Goåç¨‹ é—´å‘é€ä¸æ¥æ”¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™ä¸€&lt;/strong&gt;ï¼šåœ¨æŸä¸ªä¿¡é“ä¸Šå‘é€æ•°æ®çš„äº‹ä»¶&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;ç›¸åº”çš„æ¥æ”¶äº‹ä»¶&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;çœ‹ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç ä¿è¯äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;hello, world&lt;/code&gt; çš„æ‰“å°ã€‚å› ä¸ºä¿¡é“çš„å†™å…¥äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;c &amp;lt;- 0&lt;/code&gt; &lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;è¯»å–äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;-c&lt;/code&gt; &lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼Œè€Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;-c&lt;/code&gt; &lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;print(a)&lt;/code&gt;&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™äºŒ&lt;/strong&gt;ï¼šä¿¡é“çš„å…³é—­äº‹ä»¶&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;ä»ä¿¡é“æ¥æ”¶åˆ°é›¶å€¼ï¼ˆç”±ä¿¡é“å…³é—­è§¦å‘ï¼‰&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;close(c)&lt;/code&gt; æ¥æ›¿ä»£ &lt;code class=&quot;highlighter-rouge&quot;&gt;c &amp;lt;- 0&lt;/code&gt; è¯­å¥æ¥ä¿è¯åŒæ ·çš„æ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™ä¸‰&lt;/strong&gt;ï¼šå¯¹äºæ²¡æœ‰ç¼“å­˜çš„ä¿¡é“ï¼Œæ•°æ®çš„æ¥æ”¶äº‹ä»¶&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;æ•°æ®å‘é€å®Œæˆ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼ˆç±»ä¼¼ä¸Šé¢ç»™å‡ºçš„ä»£ç ï¼Œä½†æ˜¯ä½¿ç”¨äº†æ²¡æœ‰ç¼“å­˜çš„ä¿¡é“ï¼Œä¸”å‘é€å’Œæ¥æ”¶çš„è¯­å¥äº¤æ¢äº†ä¸€ä¸‹ï¼‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç ä¾ç„¶å¯ä»¥ä¿è¯å¯ä»¥æ‰“å° &lt;code class=&quot;highlighter-rouge&quot;&gt;hello, world&lt;/code&gt;ã€‚å› ä¸ºä¿¡é“çš„å†™å…¥äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;c &amp;lt;- 0&lt;/code&gt; &lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;è¯»å–äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;-c&lt;/code&gt; &lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼Œè€Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;-c&lt;/code&gt; &lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;å†™å…¥äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;c &amp;lt;- 0&lt;/code&gt; å®Œæˆ&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼ŒåŒæ—¶å†™å…¥äº‹ä»¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;c &amp;lt;- 0&lt;/code&gt; çš„å®Œæˆ&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;print&lt;/code&gt; &lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœä¿¡é“æ˜¯å¸¦ç¼“å­˜çš„ï¼ˆæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;c = make(chan int, 1)&lt;/code&gt;ï¼‰ï¼Œç¨‹åºå°†ä¸èƒ½ä¿è¯ä¼šæ‰“å°å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;hello, world&lt;/code&gt;ï¼Œå®ƒå¯èƒ½ä¼šæ‰“å°å‡ºç©ºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½å´©æºƒé€€å‡ºï¼Œæˆ–è€…è¡¨ç°å‡ºä¸€äº›å…¶ä»–çš„ç—‡çŠ¶ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™å››&lt;/strong&gt;ï¼šå¯¹äºå®¹é‡ä¸º C çš„ä¿¡é“ï¼Œæ¥æ”¶ç¬¬ k ä¸ªå…ƒç´ çš„äº‹ä»¶&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;ç¬¬ k+C ä¸ªå…ƒç´ çš„å‘é€&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;è§„åˆ™å››æ˜¯è§„åˆ™ä¸‰åœ¨&lt;strong&gt;å¸¦ç¼“å­˜çš„ä¿¡é“&lt;/strong&gt;ä¸Šçš„æ¨å¹¿ã€‚å®ƒä½¿å¾—å¸¦ç¼“å­˜çš„ä¿¡é“å¯ä»¥æ¨¡æ‹Ÿå‡º&lt;strong&gt;è®¡æ•°ä¿¡å·é‡&lt;/strong&gt;ï¼šä¿¡é“ä¸­å…ƒç´ çš„ä¸ªæ•°&lt;strong&gt;è¡¨ç¤º&lt;/strong&gt;æ´»è·ƒæ•°ï¼Œä¿¡é“çš„å®¹é‡&lt;strong&gt;è¡¨ç¤º&lt;/strong&gt;æœ€å¤§çš„å¯å¹¶å‘æ•°ï¼›å‘é€ä¸€ä¸ªå…ƒç´ &lt;strong&gt;æ„å‘³ç€&lt;/strong&gt;è·å–ä¸€ä¸ªä¿¡å·é‡ï¼Œæ¥æ”¶ä¸€ä¸ªå…ƒç´ &lt;strong&gt;æ„å‘³ç€&lt;/strong&gt;é‡Šæ”¾è¿™ä¸ªä¿¡å·é‡ã€‚è¿™æ˜¯ä¸€ç§å¸¸è§çš„é™åˆ¶å¹¶å‘çš„ç”¨æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢çš„ä»£ç ç»™å·¥ä½œåˆ—è¡¨ä¸­çš„æ¯ä¸ªå…¥å£éƒ½å¼€å¯ä¸€ä¸ª Goåç¨‹ï¼Œä½†æ˜¯é€šè¿‡é…åˆä¸€ä¸ªå›ºå®šé•¿åº¦çš„ä¿¡é“ä¿è¯äº†åŒæ—¶æœ€å¤šæœ‰ 3 ä¸ªè¿è¡Œçš„å·¥ä½œï¼ˆæœ€å¤š 3 ä¸ªå¹¶å‘ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;work&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
			&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;é”&quot;&gt;é”&lt;/h3&gt;

&lt;p&gt;åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;sync&lt;/code&gt; å®ç°äº†ä¸¤ç±»é”æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;sync.Mutex&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;sync.RWMutex&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™ä¸€&lt;/strong&gt;ï¼šå¯¹äºç±»å‹ä¸º  &lt;code class=&quot;highlighter-rouge&quot;&gt;sync.Mutex&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;sync.RWMutex&lt;/code&gt; çš„å˜é‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;l&lt;/code&gt;ï¼Œå¦‚æœå­˜åœ¨ n å’Œ m ä¸”æ»¡è¶³ &lt;code class=&quot;highlighter-rouge&quot;&gt;n &amp;lt; m&lt;/code&gt;ï¼Œåˆ™ &lt;code class=&quot;highlighter-rouge&quot;&gt;l.Unlock()&lt;/code&gt; çš„ç¬¬ n æ¬¡è°ƒç”¨è¿”å›å‘ç”Ÿåœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;l.Lock()&lt;/code&gt;çš„ç¬¬ m æ¬¡è°ƒç”¨è¿”å›&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sync&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Mutex&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç ä¿è¯èƒ½å¤Ÿæ‰“å° &lt;code class=&quot;highlighter-rouge&quot;&gt;hello, world&lt;/code&gt;ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;l.Unlock()&lt;/code&gt;çš„ç¬¬ 1 æ¬¡è°ƒç”¨è¿”å›ï¼ˆåœ¨å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;f&lt;/code&gt; å†…éƒ¨ï¼‰&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;l.Lock()&lt;/code&gt; çš„ç¬¬ 2 æ¬¡è°ƒç”¨è¿”å›&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼Œåè€…&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;print&lt;/code&gt; &lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™äºŒ&lt;/strong&gt;ï¼šå­˜åœ¨ç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;sync.RWMutex&lt;/code&gt; çš„å˜é‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;l&lt;/code&gt;ï¼Œå¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;l.RLock&lt;/code&gt; çš„è°ƒç”¨è¿”å›&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;l.Unlock&lt;/code&gt; çš„ç¬¬ n æ¬¡è°ƒç”¨è¿”å›&lt;strong&gt;ä¹‹å&lt;/strong&gt;ï¼Œé‚£ä¹ˆå…¶å¯¹åº”çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;l.RUnlock&lt;/code&gt; &lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;l.Lock&lt;/code&gt; çš„ç¬¬ n+1 æ¬¡è°ƒç”¨è¿”å›&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å•æ¬¡è¿è¡Œ&quot;&gt;å•æ¬¡è¿è¡Œ&lt;/h3&gt;

&lt;p&gt;åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;sync&lt;/code&gt; è¿˜æä¾›äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Once&lt;/code&gt; ç±»å‹ç”¨æ¥ä¿è¯å¤šåç¨‹çš„åˆå§‹åŒ–çš„å®‰å…¨ã€‚å¤šä¸ª Goåç¨‹ å¯ä»¥å¹¶å‘æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;once.Do(f)&lt;/code&gt; æ¥æ‰§è¡Œå‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;f&lt;/code&gt;ï¼Œ ä¸”åªä¼šæœ‰ä¸€ä¸ª Goåç¨‹ ä¼šè¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;f()&lt;/code&gt;ï¼Œå…¶ä»–çš„ Go åç¨‹ä¼šé˜»å¡åˆ°é‚£&lt;strong&gt;å•æ¬¡æ‰§è¡Œçš„&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;f()&lt;/code&gt; çš„è¿”å›ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;è§„åˆ™ä¸€&lt;/strong&gt;ï¼šå‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;f()&lt;/code&gt; åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;once.Do(f)&lt;/code&gt; çš„å•æ¬¡è°ƒç”¨è¿”å›&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;å…¶ä»–æ‰€æœ‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;once.Do(f)&lt;/code&gt; è°ƒç”¨è¿”å›&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;once&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sync&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Once&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;once&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;twoprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;twoprint&lt;/code&gt; å‡½æ•°åªä¼šè°ƒç”¨ä¸€æ¬¡ &lt;code class=&quot;highlighter-rouge&quot;&gt;setup&lt;/code&gt; å‡½æ•°ã€‚å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;setup&lt;/code&gt; å‡½æ•°çš„æ‰§è¡Œè¿”å›&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt;æ‰€æœ‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;print&lt;/code&gt; è°ƒç”¨&lt;strong&gt;ä¹‹å‰&lt;/strong&gt;ï¼ŒåŒæ—¶ä¼šæ‰“å°å‡ºä¸¤æ¬¡ &lt;code class=&quot;highlighter-rouge&quot;&gt;hello, world&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸æ­£ç¡®çš„åŒæ­¥æ–¹å¼&quot;&gt;ä¸æ­£ç¡®çš„åŒæ­¥æ–¹å¼&lt;/h3&gt;

&lt;p&gt;å¯¹æŸä¸ªå˜é‡çš„è¯»æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; ä¸€å®šæ¦‚ç‡å¯ä»¥è§‚å¯Ÿåˆ°å¯¹åŒä¸€ä¸ªå˜é‡çš„å¹¶å‘å†™æ“ä½œ &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt;ï¼Œä½†æ˜¯å³ä½¿è¿™ä»¶äº‹æƒ…å‘ç”Ÿäº†ï¼Œä¹Ÿå¹¶ä¸æ„å‘³ç€&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;r&lt;/code&gt; &lt;strong&gt;ä¹‹å&lt;/strong&gt;çš„å…¶ä»–è¯»æ“ä½œå¯ä»¥è§‚å¯Ÿåˆ°&lt;strong&gt;å‘ç”Ÿåœ¨&lt;/strong&gt; &lt;code class=&quot;highlighter-rouge&quot;&gt;w&lt;/code&gt; &lt;strong&gt;ä¹‹å‰&lt;/strong&gt;çš„å…¶ä»–å†™æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç é‡Œå‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;g&lt;/code&gt; å¯èƒ½ä¼šå…ˆæ‰“å° 2ï¼ˆbçš„å€¼ï¼‰ï¼Œç„¶åæ‰“å° 0ï¼ˆaçš„å€¼ï¼‰ï¼›å¯èƒ½å¤§å®¶ä¼šè®¤ä¸ºæ—¢ç„¶ b çš„å€¼å·²ç»è¢«èµ‹å€¼ä¸º 2 äº†ï¼Œé‚£ä¹ˆ a çš„å€¼è‚¯å®šè¢«èµ‹å€¼ä¸º 1 äº†ï¼Œä½†äº‹å®æ˜¯ä¸¤ä¸ªäº‹ä»¶çš„å…ˆååœ¨è¿™é‡Œæ˜¯æ²¡æœ‰åŠæ³•ç¡®å®šçš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢çš„äº‹å®å¯ä»¥è¯æ˜ä¸‹é¢çš„å‡ ä¸ªå¸¸è§çš„é”™è¯¯ã€‚&lt;/p&gt;

&lt;h4 id=&quot;é”™è¯¯ä¸€åŒé‡æ£€æŸ¥é”å®š&quot;&gt;é”™è¯¯ä¸€ï¼šåŒé‡æ£€æŸ¥é”å®š&lt;/h4&gt;

&lt;p&gt;åŒé‡æ£€æŸ¥é”å®šæ˜¯ä¸€ç§å°è¯•é¿å…åŒæ­¥å¼€é”€çš„å°è¯•ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;twoprint&lt;/code&gt; å‡½æ•°å¯èƒ½ä¼šè¢«&lt;strong&gt;é”™è¯¯åœ°&lt;/strong&gt;ç¼–å†™ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;once&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;twoprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;doprint&lt;/code&gt; å‡½æ•°ä¸­ï¼Œè§‚å¯Ÿåˆ°å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;done&lt;/code&gt; çš„å†™æ“ä½œå¹¶ä¸æ„å‘³ç€èƒ½å¤Ÿè§‚å¯Ÿåˆ°å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt; çš„å†™æ“ä½œã€‚åº”è¯¥æ³¨æ„ï¼Œä¸Šé¢çš„å†™æ³•ä¾ç„¶æœ‰å¯èƒ½æ‰“å°å‡ºç©ºå­—ç¬¦ä¸²è€Œä¸æ˜¯â€œhello, worldâ€å­—ç¬¦ä¸²ã€‚&lt;/p&gt;

&lt;h4 id=&quot;é”™è¯¯äºŒæŸä¸ªå€¼çš„å¾ªç¯æ£€æŸ¥&quot;&gt;é”™è¯¯äºŒï¼šæŸä¸ªå€¼çš„å¾ªç¯æ£€æŸ¥&lt;/h4&gt;

&lt;p&gt;å¦ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ç”¨æ³•æ˜¯å¯¹æŸä¸ªå€¼çš„å¾ªç¯æ£€æŸ¥ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å’Œä¸Šä¸€ä¸ªä¾‹å­ç±»ä¼¼ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt;å‡½æ•°ä¸­è§‚å¯Ÿåˆ°å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;done&lt;/code&gt; çš„å†™æ“ä½œå¹¶ä¸æ„å‘³ç€å¯ä»¥è§‚å¯Ÿåˆ°å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;a&lt;/code&gt; çš„å†™æ“ä½œï¼Œå› æ­¤ä¸Šé¢çš„ä»£ç ä¾ç„¶å¯èƒ½ä¼šæ‰“å°å‡ºç©ºå­—ç¬¦ä¸²ã€‚æ›´ä¸ºææ€–çš„ï¼Œç”±äºä¸¤ä¸ª Goåç¨‹ ä¹‹é—´ç¼ºå°‘åŒæ­¥äº‹ä»¶ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; å‡½æ•°ç”šè‡³å¯èƒ½æ°¸è¿œæ— æ³•è§‚å¯Ÿåˆ°å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;done&lt;/code&gt; å˜é‡çš„å†™æ“ä½œï¼Œå¯¼è‡´ &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; ä¸­çš„ for å¾ªç¯æ°¸è¿œæ‰§è¡Œä¸‹å»ã€‚&lt;/p&gt;

&lt;h4 id=&quot;é”™è¯¯ä¸‰å¾ªç¯æ£€æŸ¥çš„å˜å½¢&quot;&gt;é”™è¯¯ä¸‰ï¼šå¾ªç¯æ£€æŸ¥çš„å˜å½¢&lt;/h4&gt;

&lt;p&gt;é”™è¯¯äºŒå­˜åœ¨ä¸€ä¸ªå˜å½¢ï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;hello, world&quot;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç å³ä½¿ &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; å‡½æ•°è§‚å¯Ÿåˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;g != nil&lt;/code&gt;å¹¶ä¸”é€€å‡ºäº†å®ƒçš„ for å¾ªç¯ï¼Œä¾ç„¶æ²¡æœ‰åŠæ³•ä¿è¯å®ƒå¯ä»¥è§‚å¯Ÿåˆ°è¢«åˆå§‹åŒ–çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;g.msg&lt;/code&gt; å€¼ã€‚&lt;/p&gt;

&lt;p&gt;é¿å…ä¸Šé¢å‡ ä¸ªé”™è¯¯ç”¨æ³•çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼šæ˜¾å¼ä½¿ç”¨åŒæ­¥è¯­å¥ã€‚&lt;/p&gt;

</description>
        <pubDate>Sat, 14 Dec 2019 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2019/12/14/go-mem-model.html</link>
        <guid isPermaLink="true">https://jingwei.link/2019/12/14/go-mem-model.html</guid>
        
        <category>golang</category>
        
        <category>åŸºç¡€</category>
        
        <category>å®ç”¨</category>
        
        
        <category>golang</category>
        
      </item>
    
      <item>
        <title>ã€ŠåŸæ±åŸå‘³ Go è¯­è¨€å­¦ä¹ ã€‹(12) effective go é”™è¯¯æŠ›å‡ºä¸æ•è·ã€æ¢å¤</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#èµ„æ–™&quot; id=&quot;markdown-toc-èµ„æ–™&quot;&gt;èµ„æ–™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#é”™è¯¯errors&quot; id=&quot;markdown-toc-é”™è¯¯errors&quot;&gt;é”™è¯¯ï¼ˆErrorsï¼‰&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#panicpanic&quot; id=&quot;markdown-toc-panicpanic&quot;&gt;Panicï¼ˆPanicï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#æ¢å¤recover&quot; id=&quot;markdown-toc-æ¢å¤recover&quot;&gt;æ¢å¤ï¼ˆRecoverï¼‰&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;èµ„æ–™&quot;&gt;èµ„æ–™&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://golang.google.cn/doc/effective_go.html&quot;&gt;effective go&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/av77541066&quot;&gt;æœ¬æ–‡çš„è§†é¢‘åœ°å€&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;é”™è¯¯errors&quot;&gt;é”™è¯¯ï¼ˆErrorsï¼‰&lt;/h1&gt;

&lt;p&gt;åŸåˆ™ä¸Šï¼Œç¬¬ä¸‰æ–¹åº“åœ¨æŠ¥é”™æ—¶èƒ½ç»™è°ƒç”¨è€…è¿”å›æœ‰æŒ‡ç¤ºå«ä¹‰çš„é”™è¯¯ä¿¡æ¯ã€‚åƒä¹‹å‰æåˆ°çš„ Go çš„&lt;strong&gt;å¤šè¿”å›å€¼&lt;/strong&gt;ç‰¹æ€§è®©&lt;strong&gt;åŒæ—¶è¿”å›æ™®é€šè¿”å›å€¼å’Œè¯¦å°½çš„é”™è¯¯æè¿°&lt;/strong&gt;å˜å¾—å¾ˆç®€å•ã€‚é€šè¿‡è¿™ä¸ªç‰¹æ€§æ¥æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ˜¯ä¸€ç§å¾ˆå¥½çš„ä»£ç é£æ ¼ã€‚æ¯”å¦‚ï¼Œç³»ç»Ÿåº“å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;os.Open&lt;/code&gt; åœ¨å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ä¸ä»…è¿”å›ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt; çš„æŒ‡é’ˆï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªé”™è¯¯å˜é‡æ¥æè¿°å‡ºé—®é¢˜çš„åŸå› ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ï¼Œé”™è¯¯æœ‰ä¸€ä¸ªä¸“é—¨çš„ç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt;ï¼Œå®ƒæ˜¯ä¸€ä¸ªå†…å»ºçš„æ¥å£ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åŒ…çš„åˆ›å»ºè€…å¯ä»¥ä¸ºè‡ªå®šä¹‰ç±»å‹å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; æ¥å£ï¼Œä¸ºè°ƒç”¨è€…æä¾›ä¸€äº›é”™è¯¯çš„ä¸Šä¸‹æ–‡ä»è€Œä¾¿äºæ’æŸ¥é”™è¯¯ã€‚å°±åƒåˆšåˆšæåˆ°çš„ï¼Œç³»ç»Ÿåº“å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;os.Open&lt;/code&gt; é™¤äº†è¿”å› &lt;code class=&quot;highlighter-rouge&quot;&gt;*os.File&lt;/code&gt; ç±»å‹çš„å€¼å¤–ï¼Œè¿˜è¿”å›äº†ä¸€ä¸ªé”™è¯¯å€¼ï¼›å¦‚æœæ–‡ä»¶æ‰“å¼€æˆåŠŸï¼Œé”™è¯¯å€¼æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;ï¼Œå¦‚æœæ–‡ä»¶æ‰“å¼€å¤±è´¥ï¼Œä¼šè¿”å› &lt;code class=&quot;highlighter-rouge&quot;&gt;os.PathError&lt;/code&gt; é”™è¯¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// PathError records an error and the operation and&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// file path that caused it.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PathError&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Op&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// &quot;open&quot;, &quot;unlink&quot;, etc.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// The associated file.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// Returned by the system call.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PathError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Op&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢ &lt;code class=&quot;highlighter-rouge&quot;&gt;PathError&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Error&lt;/code&gt; æ–¹æ³•ä¼šäº§ç”Ÿä¸‹é¢ç±»ä¼¼çš„å­—ç¬¦ä¸²æç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;open /etc/passwx: no such file or directory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„é”™è¯¯ä¿¡æ¯é‡Œé¢&lt;strong&gt;åŒ…å«äº†&lt;/strong&gt;å‡ºé—®é¢˜çš„â‘ æ–‡ä»¶åã€â‘¡æ“ä½œä»¥åŠâ‘¢è§¦å‘çš„æ“ä½œç³»ç»Ÿé”™è¯¯ï¼Œè¿™ä¸ªä¿¡æ¯å¯¹æ‰¾å‡ºé—®é¢˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œå³ä½¿å‡½æ•°è¢«å±‚å±‚è°ƒç”¨æŠ¥å‡ºè¿™ä¸ªé”™è¯¯ä¹Ÿå¾ˆå®¹æ˜“å®šä½é—®é¢˜ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œè¿™ç§ç¤ºæ„çš„è¾“å‡ºæ¯” â€œæ‰¾ä¸åˆ°ç›¸å…³çš„æ–‡ä»¶æˆ–ç›®å½•â€ è¿™ç§æç¤ºè¦æœ‰ç”¨çš„å¤šã€‚&lt;/p&gt;

&lt;p&gt;å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”™è¯¯å­—ç¬¦ä¸²æœ€å¥½èƒ½è¾“å‡ºä»–ä»¬çš„æºä¿¡æ¯ï¼Œæ¯”å¦‚ä»€ä¹ˆæ“ä½œå¯¼è‡´çš„ä»€ä¹ˆé”™è¯¯ï¼Œæ¯”å¦‚å“ªä¸ªåŒ…çš„ä»€ä¹ˆé”™è¯¯ï¼Œç­‰ç­‰ã€‚ä»¥åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;image&lt;/code&gt; ä¸ºä¾‹ï¼Œç”±æœªçŸ¥æ ¼å¼å¯¼è‡´çš„ç¼–ç é”™è¯¯çš„å­—ç¬¦ä¸²æç¤ºç»Ÿä¸€éƒ½æ˜¯ï¼šâ€œå›¾ç‰‡ï¼šæœªçŸ¥çš„æ ¼å¼â€ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè°ƒç”¨è€…å…³æ³¨è¯¦ç»†çš„é”™è¯¯ç±»å‹ï¼Œé‚£å°±å¯ä»¥ç”¨ &lt;strong&gt;ç±»å‹ switch&lt;/strong&gt; æˆ–è€…&lt;strong&gt;ç±»å‹æ–­è¨€&lt;/strong&gt;æ¥æŸ¥æ‰¾ç‰¹å®šçš„é”™è¯¯å¹¶æŠ½å–å®ƒçš„è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºä¸‹é¢ä»£ç ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;PathErrors&lt;/code&gt;ï¼Œä¸ºäº†ä»æ“ä½œå¤±è´¥ä¸­æ¢å¤ï¼Œå®ƒå¯èƒ½åŒ…å«äº†ä¸€ä¸ªå†…éƒ¨çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Err&lt;/code&gt; å­—æ®µï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PathError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;syscall&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ENOSPC&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;// æ²¡æœ‰ç©ºé—´äº†ï¼Œåˆ é™¤ä¸€äº›ä¸´æ—¶æ–‡ä»¶è·å–ç©ºé—´ï¼Œç„¶åé‡è¯•&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;deleteTempFiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Recover some space.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬äºŒä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;if&lt;/code&gt; è¯­å¥æ˜¯ä¸€ä¸ªç±»å‹æ–­è¨€ï¼Œå¦‚æœæ–­è¨€å¤±è´¥äº†ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;ok&lt;/code&gt; å€¼å°±æ˜¯ falseï¼Œæ­¤æ—¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;e&lt;/code&gt; çš„å€¼æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;ï¼›å¦‚æœæ–­è¨€æˆåŠŸï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;ok&lt;/code&gt; å€¼æ˜¯ trueï¼Œæ­¤æ—¶æ„å‘³ç€é”™è¯¯å€¼çš„ç±»å‹æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;*os.PathError&lt;/code&gt;ï¼Œæ¥ç€ &lt;code class=&quot;highlighter-rouge&quot;&gt;e&lt;/code&gt; å°±å¯ä»¥åšè¿›ä¸€æ­¥çš„æ£€æŸ¥å¹¶æ‰§è¡Œå¯¹åº”çš„æ“ä½œäº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;panicpanic&quot;&gt;Panicï¼ˆPanicï¼‰&lt;/h2&gt;

&lt;p&gt;æŠ¥é”™æœ€å¸¸è§çš„æ–¹å¼æ˜¯ç»™è°ƒç”¨è€…è¿”å›ä¸€ä¸ªé¢å¤–çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; ç±»å‹çš„å€¼ï¼›å…¸å‹çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Read&lt;/code&gt; æ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œå®ƒè¿”å›å­—èŠ‚æ•°çš„åŒæ—¶è¿˜è¿”å›ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt;ç±»å‹çš„å€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬æ€è€ƒï¼Œå¦‚æœé”™è¯¯æ²¡æœ‰è¢«è¦†ç›–æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶å€™ç¨‹åºå¯èƒ½ä¸èƒ½ç»§ç»­è¿è¡Œä¸‹å»ã€‚&lt;/p&gt;

&lt;p&gt;Go çš„å†…å»ºå‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; ä¼šåˆ›å»ºä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼Œå¹¶ä¸”ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ªä»»æ„ç±»å‹çš„å‚æ•°ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œç¨‹åºç»ˆæ­¢åä¼šæŠŠè¿™ä¸ªå‚æ•°æ‰“å°å‡ºæ¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; æ¥è¡¨æ˜ä»£ç é‡Œå­˜åœ¨ä¸€äº›ä¸åº”è¯¥å‘ç”Ÿçš„é€»è¾‘ï¼Œæ¯”å¦‚å­˜åœ¨ä¸€ä¸ªæ— é™å¾ªç¯é€»è¾‘ï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// A toy implementation of cube root using Newton's method.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CubeRoot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;// Arbitrary initial value&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1e6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prevz&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;veryClose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prevz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// A million iterations has not converged; something is wrong.&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CubeRoot(%g) did not converge&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼ŒçœŸå®çš„&lt;strong&gt;åº“&lt;/strong&gt;ä»£ç é€»è¾‘ä¸­åº”è¯¥é¿å…ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; å‡½æ•°ã€‚å‡å¦‚é—®é¢˜å¯ä»¥è¢«é¢„çŸ¥å¹¶è¢«å¤„ç†æ‰ï¼Œæ¯”èµ·ç»ˆæ­¢æ•´ä¸ªç¨‹åºæ›´å¥½çš„æ–¹å¼æ˜¯è®©ä»£ç ç»§ç»­è¿è¡Œä¸‹å»ã€‚åœ¨å°‘æœ‰çš„ä¸€äº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨ panic èƒ½ç®€åŒ–ç¼–ç é€»è¾‘ï¼Œæ¯”å¦‚åœ¨è®¡æ•°ä¾‹å­çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ï¼šå¦‚æœåŒ…ä¸èƒ½æˆåŠŸå¯ç”¨ï¼Œæ„å‘³ç€å¯èƒ½å‘ç”Ÿäº†ä»€ä¹ˆé‡å¤§çš„é”™è¯¯ï¼Œæ­¤æ—¶å¯ä»¥æŠ›å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ã€‚ä¸‹é¢ä»£ç ç¤ºä¾‹ä¸­å¦‚æœæ²¡æœ‰è®¾ç½® &lt;code class=&quot;highlighter-rouge&quot;&gt;USER&lt;/code&gt; ç³»ç»Ÿå˜é‡ï¼Œå°±æŠ›å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;Panic&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Getenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;USER&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;no value for $USER&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ¢å¤recover&quot;&gt;æ¢å¤ï¼ˆRecoverï¼‰&lt;/h2&gt;

&lt;p&gt;åœ¨å‘ç”Ÿè¿è¡Œæ—¶é”™è¯¯æ—¶ï¼Œæ¯”å¦‚è¶Šç•Œè®¿é—®åˆ‡ç‰‡ï¼Œæˆ–è€…ç±»å‹æ–­è¨€å¤±è´¥ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; ä¼šè¢«è°ƒç”¨ï¼Œæ­¤æ—¶å½“å‰å‡½æ•°çš„æ‰§è¡Œç«‹å³åœæ­¢ï¼Œå¹¶ä¸”å¼€å§‹å±•å¼€ Goroutine çš„å †æ ˆï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¢«æ¨è¿Ÿæ‰§è¡Œï¼ˆdeferï¼‰çš„å‡½æ•°ä¼šè¢«ä¾æ¬¡æ‰§è¡Œã€‚å¦‚æœå †æ ˆä¸€ç›´å±•å¼€åˆ°è¾¾äº† goroutine çš„æ ˆé¡¶ï¼Œä»£ç å°±é€€å‡ºäº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å†…å»ºçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; å‡½æ•°æ¥é‡æ–°è·å– goroutine çš„æ§åˆ¶æƒå¹¶ä¸”æ¢å¤å…¶æ­£å¸¸çš„æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; å¯ä»¥åœæ­¢å †æ ˆçš„å±•å¼€ï¼Œå¹¶è·å–å¾—åˆ°ä¼ é€’ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; çš„å‚æ•°ã€‚å› ä¸ºåœ¨å †æ ˆå±•å¼€çš„è¿‡ç¨‹ä¸­åªæœ‰è¢« defer çš„å‡½æ•°ä¼šè¢«æ‰§è¡Œï¼Œå› æ­¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; åªæœ‰æ”¾åœ¨è¢« defer çš„å‡½æ•°ä¸­æ‰æœ‰æ„ä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; çš„ä¸€ä¸ªåº”ç”¨åœºæ™¯æ˜¯ï¼šå½“æœåŠ¡å™¨ä¸­æœ‰å¤±è´¥çš„ Goroutine çš„æ—¶å€™ï¼Œç›´æ¥å…³é—­å¯¹åº”çš„ Goroutineï¼Œé¿å…å½±å“å…¶ä»–æ­£åœ¨æ‰§è¡Œçš„ Goroutineã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;workChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Work&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;work&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;workChan&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;safelyDo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;work&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;safelyDo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;work&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Work&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;recover&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;work failed:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;work&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;do(work)&lt;/code&gt; è¿è¡Œæ—¶å‡ºé”™ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ï¼‰ï¼Œç»“æœä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œå¹¶ä¸” Goroutine ä¼šå¹²å‡€åˆ©è½åœ°é€€å‡ºè€Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ Goroutineã€‚å¯¹äºä¸Šé¢çš„æƒ…å†µï¼Œåœ¨&lt;strong&gt;æ¨è¿Ÿ&lt;/strong&gt;å‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; å°±å¯ä»¥å®Œå…¨å¤„ç†ç›¸åº”çš„çŠ¶å†µï¼Œä¸éœ€è¦åšå…¶ä»–çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸æ˜¯åœ¨è¢« defer çš„å‡½æ•°ä¸­è°ƒç”¨ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; æ€»æ˜¯è¿”å› &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt; å€¼ï¼›å› æ­¤ï¼Œè¢«æ¨è¿Ÿæ‰§è¡Œçš„å‡½æ•°é€»è¾‘é‡Œå¯ä»¥è°ƒç”¨ä½¿ç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; çš„ç¬¬ä¸‰æ–¹åº“ã€‚æ¯”å¦‚ï¼Œåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;safelyDo&lt;/code&gt; çš„æ¨è¿Ÿå‡½æ•°é‡Œå¯ä»¥åœ¨è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; ä¹‹å‰è°ƒç”¨ä¸€ä¸ªæ—¥å¿—å‡½æ•°ï¼Œæ—¥å¿—ç›¸å…³çš„é€»è¾‘ä¸ä¼šå— panicking çš„çŠ¶æ€çš„å½±å“ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ä¸Šé¢ä¾‹å­ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;recovery&lt;/code&gt; çš„ç”¨æ³•ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;do&lt;/code&gt; å‡½æ•°ï¼ˆåŒ…å«å®ƒè°ƒç”¨çš„ä»»ä½•ä¸œè¥¿ï¼‰å¯ä»¥é€šè¿‡è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; å¹²å‡€åˆ©è½åœ°å¤„ç†ä»»ä½•åçŠ¶å†µã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ç§æ¨¡å¼åº”ç”¨åœ¨å¤æ‚çš„è½¯ä»¶ä¸­ä»è€Œç®€åŒ–é”™è¯¯å¤„ç†ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç†æƒ³çŠ¶æ€ä¸‹çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;regexp&lt;/code&gt; åŒ…ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; å¹¶ä¼ å…¥ä¸€ä¸ªæœ¬åœ°çš„é”™è¯¯ç±»å‹æ¥è§£æé”™è¯¯ä¿¡æ¯ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯&lt;strong&gt;å‡†ç¡®åœ°è§£æ&lt;/strong&gt;ï¼Œç»§ç»­çœ‹ä¸‹é¢çš„è§£é‡Šï¼‰ã€‚ä¸‹é¢çš„ä»£ç å®šä¹‰äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Error&lt;/code&gt; ç±»å‹ï¼Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Compile&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// Error is the type of a parse error; it satisfies the error interface.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// error is a method of *Regexp that reports parsing errors by&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// panicking with an Error.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regexp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Regexp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// Compile returns a parsed representation of the regular expression.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Compile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regexp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Regexp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;regexp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Regexp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// doParse will panic if there is a parse error.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;recover&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;regexp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// Clear return value.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// Will re-panic if not a parse error.&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regexp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doParse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;doParse&lt;/code&gt; æŠ¥é”™ï¼Œæ¢å¤çš„ä»£ç å—ä¼šæŠŠè¿”å›å€¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;regexp&lt;/code&gt; è®¾ç½®ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;â€”â€”è¢« defer çš„å‡½æ•°å¯ä»¥ä¿®æ”¹å‘½åçš„è¿”å›å€¼ã€‚ç„¶ååœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;err&lt;/code&gt; çš„èµ‹å€¼è¯­å¥æ–­è¨€ &lt;code class=&quot;highlighter-rouge&quot;&gt;e&lt;/code&gt; æ˜¯ä¸æ˜¯ä¸€ä¸ªæœ¬åœ°ç±»å‹çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Error&lt;/code&gt;ã€‚å¦‚æœå®ƒä¸æ˜¯æœ¬åœ°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Error&lt;/code&gt;ï¼Œç±»å‹æ–­è¨€ä¼šå¤±è´¥ï¼Œä»è€Œé€ æˆä¸€ä¸ªæ–°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ï¼Œå› æ­¤å †æ ˆä¼šå°±åƒæ²¡æœ‰è¢«ä¸­æ–­è¿‡ä¸€æ ·ç»§ç»­å±•å¼€ã€‚è¿™ç§æ£€æŸ¥æ„å‘³ç€å¦‚æœæœ‰æœªé¢„çŸ¥çš„äº‹æƒ…å‘ç”Ÿï¼Œæ¯”å¦‚ç´¢å¼•æº¢å‡ºï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; å¤„ç†äº†è§£æé”™è¯¯çš„æŠ¥é”™ï¼Œä»£ç ä¾ç„¶ä¼šæŠ¥é”™ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰äº†ä¸Šé¢é”™è¯¯å¤„ç†çš„é€»è¾‘ä»¥åï¼Œé…åˆå®šä¹‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; æ–¹æ³•ï¼ŒåŒæ—¶ç®€åŒ–äº†æŠ¥é”™çš„æ–¹å¼ï¼Œä¸ç”¨å†æƒ³ç€æ‰‹åŠ¨å¤„ç†å †æ ˆçš„äº‹æƒ…ï¼ˆå› ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; æ–¹æ³•ç»‘å®šåˆ°äº†ç±»å‹ä¸Šï¼Œè€Œä¸”ä¸å†…å»ºçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; ç±»å‹æœ‰ç›¸åŒçš„åå­—ï¼Œå› æ­¤ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆä¼˜é›…è‡ªç„¶ï¼Œï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;'*' illegal at start of expression&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è™½ç„¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic/recover&lt;/code&gt; çš„è¿™ç§æ¨¡å¼å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯åº”è¯¥åªé™å®šåœ¨ä¸€ä¸ªåŒ…é‡Œä½¿ç”¨ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;Parse&lt;/code&gt; æ²¡æœ‰æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; æš´éœ²ç»™è‡ªå·±çš„è°ƒç”¨è€…ï¼Œè€Œæ˜¯æŠŠå†…éƒ¨çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; è½¬æ¢æˆäº† &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; å€¼è¿”å›ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä¾›å‚è€ƒçš„æœ€ä½³å®è·µã€‚&lt;/p&gt;

&lt;p&gt;éœ€è¦æ³¨æ„ï¼Œå¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;recover&lt;/code&gt; ååˆå‘ç”Ÿäº† &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ï¼Œè¿™ç§å†™æ³•ä¼šæ”¹å˜ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; çš„å€¼ã€‚ä¸è¿‡å¹¸è¿çš„æ˜¯ï¼Œåœ¨å´©æºƒæŠ¥å‘Šä¸­åŸå§‹æŠ¥é”™å’Œæ–°çš„æŠ¥é”™éƒ½ä¼šæ‰“å°å‡ºæ¥ï¼Œå› æ­¤å¯¼è‡´é”™è¯¯çš„æ ¹æºä¾ç„¶æ˜¯å¯è§çš„ã€‚å¦‚æœæƒ³å±•ç¤ºå¼•å‘ &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt; çš„åŸå§‹å€¼ï¼Œå¯ä»¥å†™ä¸€ç‚¹ä»£ç æ¥è¿‡æ»¤æœªçŸ¥é—®é¢˜ç„¶åç”¨åŸç”Ÿçš„é”™è¯¯é‡æ–°å‘èµ· &lt;code class=&quot;highlighter-rouge&quot;&gt;panic&lt;/code&gt;ï¼Œè¿™ä¸€ç‚¹å¤§å®¶å¯ä»¥è‡ªå·±æ¥å®è·µä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;ã€effective go å®Œã€‘&lt;/p&gt;
</description>
        <pubDate>Sat, 30 Nov 2019 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2019/11/30/effectivego-errors.html</link>
        <guid isPermaLink="true">https://jingwei.link/2019/11/30/effectivego-errors.html</guid>
        
        <category>golang</category>
        
        <category>åŸºç¡€</category>
        
        <category>å®ç”¨</category>
        
        
        <category>golang</category>
        
      </item>
    
      <item>
        <title>ã€ŠåŸæ±åŸå‘³ Go è¯­è¨€å­¦ä¹ ã€‹(11) effective go å¹¶å‘ç¼–ç¨‹</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#èµ„æ–™&quot; id=&quot;markdown-toc-èµ„æ–™&quot;&gt;èµ„æ–™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å¹¶å‘concurrency&quot; id=&quot;markdown-toc-å¹¶å‘concurrency&quot;&gt;å¹¶å‘ï¼ˆConcurrencyï¼‰&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#ä»¥é€šä¿¡çš„æ–¹å¼å…±äº«å˜é‡share-by-communicating&quot; id=&quot;markdown-toc-ä»¥é€šä¿¡çš„æ–¹å¼å…±äº«å˜é‡share-by-communicating&quot;&gt;ä»¥é€šä¿¡çš„æ–¹å¼å…±äº«å˜é‡ï¼ˆShare by communicatingï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#go-åç¨‹goroutines&quot; id=&quot;markdown-toc-go-åç¨‹goroutines&quot;&gt;Go åç¨‹ï¼ˆGoroutinesï¼‰&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#ä¿¡é“channels&quot; id=&quot;markdown-toc-ä¿¡é“channels&quot;&gt;ä¿¡é“ï¼ˆChannelsï¼‰&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ä¿¡é“ä¸­çš„ä¿¡é“channels-of-channels&quot; id=&quot;markdown-toc-ä¿¡é“ä¸­çš„ä¿¡é“channels-of-channels&quot;&gt;ä¿¡é“ä¸­çš„ä¿¡é“ï¼ˆChannels of channelsï¼‰&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#å¹¶è¡Œparallelization&quot; id=&quot;markdown-toc-å¹¶è¡Œparallelization&quot;&gt;å¹¶è¡Œï¼ˆParallelizationï¼‰&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#ç¼“å­˜æ¼æ–—a-leaky-buffer&quot; id=&quot;markdown-toc-ç¼“å­˜æ¼æ–—a-leaky-buffer&quot;&gt;ç¼“å­˜æ¼æ–—ï¼ˆA leaky bufferï¼‰&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;èµ„æ–™&quot;&gt;èµ„æ–™&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://golang.google.cn/doc/effective_go.html&quot;&gt;effective go&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av76858443&quot;&gt;æœ¬æ–‡çš„è§†é¢‘åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;å¹¶å‘concurrency&quot;&gt;å¹¶å‘ï¼ˆConcurrencyï¼‰&lt;/h1&gt;

&lt;h2 id=&quot;ä»¥é€šä¿¡çš„æ–¹å¼å…±äº«å˜é‡share-by-communicating&quot;&gt;ä»¥é€šä¿¡çš„æ–¹å¼å…±äº«å˜é‡ï¼ˆShare by communicatingï¼‰&lt;/h2&gt;

&lt;p&gt;å¹¶å‘ç¼–ç¨‹æ˜¯ä¸ªå¾ˆå¤§çš„è¯é¢˜ï¼Œæœ¬å°èŠ‚åªè€ƒè™‘ Go ç›¸å…³çš„ç‰¹æ€§ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¾ˆå¤šç¯å¢ƒä¸­ï¼Œå¹¶å‘ç¼–ç¨‹éƒ½ä¸å®¹æ˜“ï¼›ä¸ºäº†ç¡®ä¿æ­£ç¡®è®¿é—®å…±äº«å˜é‡ï¼Œé‡Œé¢éœ€è¦æ³¨æ„å¾ˆå¤šçš„å®ç°ç»†èŠ‚ã€‚Go é¼“åŠ±ä¸€ç§ä¸åŒçš„ç¼–ç¨‹æ–¹å¼ï¼šé¿å…ç›´æ¥åœ¨ä¸åŒçš„çº¿ç¨‹é—´å…±äº«å˜é‡ï¼Œè€Œæ˜¯é€šè¿‡ä¿¡é“æ¥å…±äº«å˜é‡çš„å€¼ã€‚åœ¨ä»»ä½•æ—¶é—´ç‚¹åªæœ‰ä¸€ä¸ªåç¨‹æœ‰æƒè®¿é—®å˜é‡çš„å€¼ï¼›åœ¨è®¾è®¡ä¸Šå°±æœç»äº†æ•°æ®ç«äº‰çš„æƒ…å†µã€‚ä¸ºäº†é¼“åŠ±è¿™ç§å…±äº«å˜é‡çš„æ–¹å¼ï¼Œå®ƒè¿˜æœ‰ä¸€å¥å£å·ï¼š&lt;strong&gt;ä¸è¦é€šè¿‡å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡ï¼Œç›¸åï¼Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œè¿™ç§â€œä»¥é€šä¿¡çš„æ–¹å¼å…±äº«å˜é‡â€çš„æ–¹å¼ä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€‚æ¯”å¦‚ï¼Œå¼•ç”¨è®¡æ•°çš„æœ€ä½³å®ç°æ–¹å¼ä¾ç„¶æ˜¯ç»™ä¸€ä¸ªæ•´æ•°æ·»åŠ ä¸€ä¸ªäº’æ–¥é”çš„æ–¹å¼ã€‚ä½†æ˜¯ä½œä¸ºä¸€ç§é«˜çº§åˆ«æ–¹å¼ï¼Œä½¿ç”¨ä¿¡é“æ¥æ§åˆ¶å…±äº«å˜é‡çš„è®¿é—®èƒ½å¤Ÿè®©å¼€å‘è€…æ›´å®¹æ˜“å†™å‡ºç®€æ˜æ­£ç¡®çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆè¯¥æ€ä¹ˆæ€è€ƒè¿™ä¸ªæ¨¡å‹å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹çš„ç¨‹åºï¼Œå®ƒåªè¿è¡Œåœ¨ä¸€ä¸ª CPU æ ¸ä¸Šï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¾ç„¶æ²¡æœ‰å¿…è¦è¿›è¡Œä»»ä½•åŒæ­¥ã€‚ç°åœ¨æ€è€ƒæœ‰å¦ä¸€ä¸ªç±»ä¼¼çš„å®ä¾‹ï¼Œå®ƒä¹Ÿæ˜¯ç‹¬ç«‹çº¿ç¨‹çš„ï¼Œè€Œä¸”ä¹Ÿåªå…è®¸åœ¨ä¸€ä¸ª CPU æ ¸ä¸Šï¼Œè¿™ä¸ªå®ä¾‹ä¹Ÿä¸éœ€è¦ä»»ä½•çš„åŒæ­¥ã€‚ç„¶åï¼Œæˆ‘ä»¬è®©è¿™ä¸¤ä¸ªçº¿ç¨‹è¿›è¡Œé€šä¿¡ï¼›å¦‚æœé€šä¿¡æ–¹å¼æ˜¯åŒæ­¥çš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ä¹‹é—´å°±ä¸éœ€è¦å…¶ä»–çš„åŒæ­¥äº†ã€‚Unix é‡Œçš„ Piplineï¼ˆç®¡é“ï¼‰ æ¨¡å¼å°±å±äºç±»ä¼¼çš„æ¨¡å‹ã€‚è™½ç„¶ Go è§£å†³å¹¶å‘çš„è§£å†³æ–¹æ¡ˆæºè‡ª Hoare çš„CSPï¼ˆé€šä¿¡åºåˆ—è¿‡ç¨‹ï¼‰æ¨¡å‹ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥çœ‹åšæ˜¯ Unix ç®¡é“çš„å¸¦ç±»å‹å®‰å…¨é™å®šçš„é€šç”¨ç‰ˆæœ¬ã€‚&lt;/p&gt;

&lt;h2 id=&quot;go-åç¨‹goroutines&quot;&gt;Go åç¨‹ï¼ˆGoroutinesï¼‰&lt;/h2&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥å« &lt;strong&gt;goroutinesï¼ˆGoåç¨‹ï¼‰&lt;/strong&gt; ï¼Œæ˜¯å› ä¸ºå·²æœ‰çš„æœ¯è¯­â€”â€”çº¿ç¨‹ã€åç¨‹ã€è¿›ç¨‹ç­‰â€”â€”å’Œè¦ä¼ è¾¾çš„å«ä¹‰å¹¶ä¸å®Œå…¨åŒ¹é…ã€‚æ¯ä¸ª Goåç¨‹ éƒ½åŒ…å«åŒä¸€ä¸ªç®€å•çš„æ¨¡å‹ï¼šé¦–å…ˆå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å®ƒå’Œå…¶ä»–çš„ Goåç¨‹ åœ¨åŒä¸€ä¸ªåœ°å€ç©ºé—´åŒæ—¶è¿è¡Œã€‚Goåç¨‹ æ˜¯è½»é‡çº§çš„ï¼Œæ¶ˆè€—çš„èµ„æºå‡ ä¹åªåŒ…å«åˆ†é…å †æ ˆç©ºé—´èŠ±è´¹çš„é‚£ä¸€ç‚¹èµ„æºï¼›åŒæ—¶å› ä¸ºå®ƒçš„å †æ ˆåˆå§‹åŒ–æ—¶å¾ˆå°ï¼Œä¸”æ€»æ˜¯ä¾ç…§å®é™…éœ€è¦æ¥å¢åŠ ï¼ˆæˆ–é‡Šæ”¾ï¼‰å †å­˜å‚¨ï¼Œå®ƒä¹Ÿæ˜¯å¾ˆå»‰ä»·çš„ï¼ˆæ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åˆ›å»ºæˆåƒä¸Šä¸‡çš„ goroutinesï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;Goåç¨‹ å¤šè·¯å¤ç”¨å¤šä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾æœ‰ m ä¸ª Goåç¨‹ n ä¸ªç³»ç»Ÿçº¿ç¨‹ï¼Œè¿™ m ä¸ª Goåç¨‹ é‡Œçš„ä»»æ„ä¸€ä¸ªéƒ½å¯èƒ½åœ¨ n ä¸ªç³»ç»Ÿçº¿ç¨‹çš„ä»»æ„ä¸€ä¸ªä¸Šé¢æ‰§è¡Œã€‚å› æ­¤å¦‚æœæŸä¸ª Goåç¨‹ å› ä¸º I/O è°ƒç”¨é˜»å¡äº†ï¼Œå…¶ä»–çš„åç¨‹å¯ä»¥ç»§ç»­è¿è¡Œã€‚Go è¿è¡Œæ—¶åœ¨è¿™é‡Œçš„è®¾è®¡éšè—äº†å¾ˆå¤šçº¿ç¨‹åˆ›å»ºå’Œç®¡ç†çš„å¤æ‚åº¦ã€‚&lt;/p&gt;

&lt;p&gt;Goåç¨‹çš„åˆ›å»ºä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å‡½æ•°/æ–¹æ³•çš„å‰é¢åŠ ä¸€ä¸ªå…³é”®è¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;go&lt;/code&gt; å°±å¯ä»¥è®©è¿™ä¸ªå‡½æ•°/æ–¹æ³•åœ¨ä¸€ä¸ªæ–°çš„ goroutine ä¸­è¿è¡Œã€‚å½“å‡½æ•°/æ–¹æ³•è°ƒç”¨ç»“æŸæ—¶ï¼Œgoroutine ä¼šé™é»˜é€€å‡ºã€‚ï¼ˆè¿™é‡Œæœ‰ç‚¹ç±»ä¼¼äº Unix Shell ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt; ç¬¦å·ï¼‰&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// run list.Sort concurrently; don't wait for it.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‡½æ•°å£°æ˜è¯­æ³•å¯ä»¥é…åˆ goroutine çš„å£°æ˜ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Announce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delay&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Note the parentheses - must call the function.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ Go ä¸­ï¼Œ&lt;strong&gt;å‡½æ•°å³é—­åŒ…ï¼šåœ¨å®ç°ä¸Šï¼Œå¦‚æœæŸä¸ªå˜é‡è¢«å‡½æ•°å¼•ç”¨äº†ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä¸å‡½æ•°ä¸€èµ·å­˜æ´»&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºä¸Šé¢çš„ä¾‹å­é‡Œå‡½æ•°éƒ½æ²¡æœ‰æ ‡è¯†è‡ªå·±ä»€ä¹ˆæ—¶å€™é€€å‡ºï¼Œæˆ‘ä»¬ä¹Ÿå°±æ— æ³•çŸ¥é“å®ƒä»¬æ˜¯ä¸æ˜¯æŠŠä»»åŠ¡å®Œæˆäº†ï¼Œå› æ­¤æ²¡æœ‰å¤ªå¤§çš„å®è·µæ„ä¹‰ã€‚ä¸ºæ­¤éœ€è¦å¼•å…¥ä¿¡é“ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¿¡é“channels&quot;&gt;ä¿¡é“ï¼ˆChannelsï¼‰&lt;/h3&gt;

&lt;p&gt;å’Œæ˜ å°„ä¸€æ ·ï¼Œä¿¡é“é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;make&lt;/code&gt; æ¥åˆ†é…å†…å­˜ï¼Œè¿”å›çš„ç»“æœç­‰æ•ˆäºæ˜¯å¯¹åº•å±‚æ•°æ®ç»“æ„çš„å¼•ç”¨ã€‚åœ¨ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;make&lt;/code&gt; æ—¶å¦‚æœä¼ å…¥äº†ä¸€ä¸ªå¯é€‰çš„æ•´æ•°ï¼Œä¼šåˆ›å»ºå¸¦ç¼“å­˜çš„ä¿¡é“ï¼›å¦‚æœä¸ä¼ é»˜è®¤å°±æ˜¯ 0ï¼Œæ­¤æ—¶åˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ²¡æœ‰ç¼“å­˜çš„ä¿¡é“æˆ–è€…ç§°ä¸ºåŒæ­¥ä¿¡é“ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;ci&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;            &lt;span class=&quot;c&quot;&gt;// unbuffered channel of integers&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;         &lt;span class=&quot;c&quot;&gt;// unbuffered channel of integers&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// buffered channel of pointers to Files&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœä¸¤ä¸ª Goåç¨‹ é€šè¿‡æ²¡æœ‰ç¼“å­˜çš„ä¿¡é“è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªæ²¡æœ‰ç¼“å­˜çš„ä¿¡é“åŒæ—¶å¯ä»¥åšä¸€äº›åŒæ­¥çš„äº‹æƒ…ï¼Œä»è€Œä¿è¯ä¸¤ä¸ª Goåç¨‹ è¿è¡Œåœ¨å·²çŸ¥çš„çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰å¾ˆå¤šåº”ç”¨ä¿¡é“çš„æƒ¯ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸‹é¢çš„ä¾‹å­å¼€å§‹ã€‚å‰é¢å°èŠ‚æˆ‘ä»¬åœ¨åå°å¯ç”¨äº†ä¸€ä¸ªæ’åºä¾‹ç¨‹ï¼Œä½†æ˜¯æ— æ³•çŸ¥é“è¿™ä¸ªä¾‹ç¨‹ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå®Œæ¯•ï¼›ä¿¡é“å¯ä»¥å…è®¸æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ª Goroutine å¹¶æ˜¾å¼åœ°ç­‰å¾…ç›¸åº”çš„ä¾‹ç¨‹ç»“æŸã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Allocate a channel.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// Start the sort in a goroutine; when it completes, signal on the channel.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Send a signal; value does not matter.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;doSomethingForAWhile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;   &lt;span class=&quot;c&quot;&gt;// Wait for sort to finish; discard sent value.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨æ¥æ”¶åˆ°æ•°æ®å‰æ¥æ”¶å™¨ï¼ˆæ¯”å¦‚ä¸Šä¾‹ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;-c&lt;/code&gt; è¯­å¥ï¼‰ä¼šä¸€ç›´é˜»å¡åœ¨é‚£é‡Œã€‚å¯¹äºä¸€ä¸ªæ²¡æœ‰ç¼“å­˜çš„ä¿¡é“æ¥è¯´ï¼Œåœ¨æ¥æ”¶å™¨&lt;strong&gt;æ¥æ”¶å®Œæˆ&lt;/strong&gt;ä¹‹å‰å‘é€å™¨ä¹Ÿä¼šä¸€ç›´é˜»å¡åœ¨é‚£é‡Œï¼ˆå±äºå†…å­˜æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚å¦‚æœä¿¡é“æœ‰ç©ºé—²çš„ç¼“å­˜ç©ºé—´ï¼Œå‘é€å™¨åªåœ¨å€¼æ‹·è´åˆ°ç¼“å­˜åŒºä¹‹å‰æ˜¯é˜»å¡çš„ï¼›å¦‚æœç¼“å†²åŒºæ»¡äº†ï¼Œå‘é€å™¨ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æœ‰æ¥æ”¶å™¨æ¶ˆè´¹ç¼“å­˜ä¸­çš„å€¼ã€‚&lt;/p&gt;

&lt;p&gt;å¸¦ç¼“å­˜çš„ä¿¡é“å¯ä»¥ä½œä¸ºä¿¡å·é‡æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚å¯ä»¥ç”¨å®ƒæ¥æ§åˆ¶ååé‡ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œè¿‡æ¥çš„è¯·æ±‚è¢«ä¼ åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt;ï¼Œç„¶å &lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt; ä¼šé¦–å…ˆç»™ä¸€ä¸ªä¿¡é“å¡ä¸€ä¸ªå€¼ï¼ˆç›¸å½“äºå å‘ï¼‰ï¼Œæ¥ç€å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œæœ€åå†ä»ä¿¡é“ä¸­æ¶ˆè´¹ä¸€ä¸ªå€¼é‡Šæ”¾â€œä¿¡å·é‡â€ä»è€Œç»™ä¸‹ä¸€ä¸ªæ¶ˆè´¹è€…è…¾å‡ºèµ„æºã€‚è¿™é‡Œä¿¡é“çš„ç¼“å†²åŒºå®¹é‡é™å®šäº† &lt;code class=&quot;highlighter-rouge&quot;&gt;process&lt;/code&gt; çš„å¹¶å‘æ•°é‡ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MaxOutstanding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// Wait for active queue to drain.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// May take a long time.&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;       &lt;span class=&quot;c&quot;&gt;// Done; enable next request to run.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Don't wait for handle to finish.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸€æ—¦ &lt;code class=&quot;highlighter-rouge&quot;&gt;MaxOutstanding&lt;/code&gt; ä¸ªå¤„ç†å™¨è¿è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;process&lt;/code&gt;ï¼Œä»»ä½•å…¶ä»–çš„ Goåç¨‹ å°è¯•å‘é€æ•°æ®åˆ°ä¿¡é“çš„è¡Œä¸ºéƒ½ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æŸä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt; ç»“æŸå¹¶æ¶ˆè´¹äº†ä¿¡é“ä¸­çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;è™½ç„¶å¾ˆä¼˜é›…ï¼Œä¸è¿‡ä¸Šé¢çš„è®¾è®¡æ˜¯æœ‰é—®é¢˜çš„ï¼šè™½ç„¶æ§åˆ¶äº†æœ€å¤šåªèƒ½æœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;MaxOutstanding&lt;/code&gt; ä¸ª Goåç¨‹ åŒæ—¶æ‰§è¡Œï¼Œä½†æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Serve&lt;/code&gt; ä¼šç»™æ¯ä¸ªè¿›æ¥çš„è¯·æ±‚éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ Goåç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦è¯·æ±‚è¿›æ¥çš„å¤Ÿå¿«ï¼Œç¨‹åºä¼šæ— é™æ¶ˆè€—èµ„æºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Serve&lt;/code&gt; å‡½æ•°é™å®š goroutine çš„åˆ›å»ºæ•°é‡æ¥è§£å†³è¿™ä¸ªç¼ºé™·ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆï¼ˆä¸è¿‡éšè—äº†ä¸€ä¸ª bug éœ€è¦ä¿®å¤ï¼‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// Buggy; see explanation below.&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢ä»£ç çš„ bug å‘ç”Ÿåœ¨ Go çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt; å¾ªç¯ï¼š&lt;strong&gt;å¾ªç¯å˜é‡åœ¨æ¯æ¬¡è¿­ä»£æ—¶ä¼šè¢«å¤ç”¨&lt;/strong&gt;ï¼Œå› æ­¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;req&lt;/code&gt; å˜é‡åœ¨å„ä¸ª Goåç¨‹ ä¹‹é—´æ˜¯å…±äº«çš„ã€‚ç”±äºä¸Šé¢çš„ä¾‹å­é‡Œæˆ‘ä»¬ä¸å¸Œæœ› &lt;code class=&quot;highlighter-rouge&quot;&gt;req&lt;/code&gt; è¢«å…±äº«ï¼Œå› æ­¤éœ€è¦ç»™æ¯ä¸ª Goåç¨‹ ä¼ ä¸€ä¸ªå”¯ä¸€çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;req&lt;/code&gt;ã€‚ä¸‹é¢çš„ä»£ç ç»™æ¯ä¸ª Goåç¨‹ çš„é—­åŒ…ä¼ é€’äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;req&lt;/code&gt; ä½œä¸ºå…¶å‚æ•°ï¼Œå› ä¸ºå‡½æ•°å‚æ•°æ˜¯ä¼ å€¼çš„ï¼ˆå¤§å®¶å¯ä»¥å›é¡¾å‡½æ•°é‚£ä¸€èŠ‚çš„å†…å®¹ï¼‰ï¼Œå› æ­¤é¿å…äº†ä¸Šé¢çš„ bugï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥æŠŠä¸Šé¢çš„ä»£ç å’Œå‰é¢å¸¦ &lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt; å‡½æ•°çš„ä»£ç æ¯”è¾ƒï¼Œçœ‹çœ‹é—­åŒ…æ˜¯å¦‚ä½•å£°æ˜å¹¶è¿è¡Œçš„ã€‚å…¶å®ä¸Šé¢çš„ bug è¿˜æœ‰ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯æ¯æ¬¡å¾ªç¯æ—¶åˆ›å»ºä¸€ä¸ªåŒåçš„ä¸´æ—¶å˜é‡ï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// Create new instance of req for the goroutine.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sem&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ–è®¸ &lt;code class=&quot;highlighter-rouge&quot;&gt;req := req&lt;/code&gt; çš„å†™æ³•å¾ˆæ€ªå¼‚ï¼Œä½†æ˜¯åœ¨ Go ä¸­è¿™æ˜¯åˆæ³•çš„æƒ¯ç”¨å†™æ³•ã€‚é€šè¿‡è¿™ç§æ–¹æ³•æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŒåçš„æ–°å˜é‡ï¼Œé€šè¿‡åˆ»æ„è¦†ç›–æœ¬åœ°çš„å¾ªç¯å˜é‡çš„æ–¹å¼ç»™æ¯ä¸ª Goåç¨‹ æä¾›äº†å”¯ä¸€çš„å˜é‡ï¼ˆè€Œä¸æ˜¯å…±äº«çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;req&lt;/code&gt; å˜é‡ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥è®©æˆ‘ä»¬å›åˆ°å†™æœåŠ¡å™¨å¸¸è§çš„èµ„æºç®¡ç†çš„é—®é¢˜ã€‚ä¸Šé¢è®¨è®ºçš„ä¾‹å­é‡Œï¼Œå¦ä¸€ç§èµ„æºç®¡ç†çš„å¥½æ–¹æ³•æ˜¯åˆå§‹åŒ–å›ºå®šæ•°ç›®çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt; Goåç¨‹ ï¼Œæ‰€æœ‰è¿™äº› Goåç¨‹ ä»ä¿¡é“ä¸­è¯»å–è¯·æ±‚çš„æ•°æ®ï¼›è¿™ç§æƒ…å†µä¸‹ Goåç¨‹ çš„æ•°ç›®é™å®šäº†åŒæ—¶æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;process&lt;/code&gt; çš„å¹¶å‘æ•°é‡ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;Serve&lt;/code&gt; å‡½æ•°æ¥æ”¶ä¸€ä¸ªä¿¡é“ï¼Œå¹¶åœ¨è¿™ä¸ªä¿¡é“ä¸Šæ¥æ”¶é€€å‡ºä¿¡å·ã€‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å±•ç¤ºäº†ä¸Šé¢æåˆ°çš„ä¸¤ä¸ªæŠ€æœ¯ç‚¹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Serve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clientRequests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;quit&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// Start handlers&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MaxOutstanding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clientRequests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;quit&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Wait to be told to exit.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä¿¡é“ä¸­çš„ä¿¡é“channels-of-channels&quot;&gt;ä¿¡é“ä¸­çš„ä¿¡é“ï¼ˆChannels of channelsï¼‰&lt;/h3&gt;

&lt;p&gt;Go æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯ï¼š&lt;strong&gt;ä¿¡é“å±äºç¬¬ä¸€çº§ç±»å‹&lt;/strong&gt;ã€‚ä¿¡é“å¯ä»¥åƒå…¶ä»–çš„ç±»å‹é‚£æ ·åˆå§‹åŒ–å’Œä¼ é€’ï¼Œè¿™ä¸ªç‰¹æ€§çš„ä¸€ç§åº”ç”¨æ˜¯å®ç°å¹¶è¡Œå®‰å…¨çš„å¤šè·¯å¤ç”¨æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt; å¯¹è¯·æ±‚æ¥è¯´æ˜¯ä¸€ä¸ªç†æƒ³çš„å¤„ç†å™¨ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰æåŠå®ƒå¤„ç†çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; ç±»å‹çš„ç»†èŠ‚ã€‚å¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; ç±»å‹åŒ…å«ä¸€ä¸ªç”¨æ¥ä¸“é—¨æ¥æ”¶å“åº”çš„ä¿¡é“ï¼Œé‚£ä¹ˆæ¯ä¸ªå®¢æˆ·ç«¯å°±éƒ½å¯ä»¥æä¾›è‡ªå·±çš„å“åº”ä¿¡é“ä»è€Œè·å–å“åº”ã€‚ä¸‹é¢ç»™å‡ºç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; çš„ä¸€ç§å®šä¹‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;        &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;           &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;resultChan&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; ä¸­å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼ŒåŒæ—¶è¿˜å®šä¹‰äº†ä¸€ä¸ªä¿¡é“æ¥æ¥æ”¶å“åº”ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// Send request&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;clientRequests&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// Wait for response.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;answer: %d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resultChan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨æœåŠ¡å™¨ç«¯ï¼Œåªéœ€è¦ä¿®æ”¹å¤„ç†å™¨å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;handle&lt;/code&gt;ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;queue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resultChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºäº†è®©åŠŸèƒ½æ›´ä¸°æ»¡ï¼Œä¸Šé¢çš„ä»£ç æ˜¾ç„¶è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¯ä»¥åšï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªæ— é”çš„é™æµã€å¹¶å‘ã€éé˜»å¡çš„ RPC ç³»ç»Ÿçš„æ¡†æ¶çš„åŸå‹ï¼Œå·²ç»èƒ½è¯´æ˜ä¸€äº›é—®é¢˜äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å¹¶è¡Œparallelization&quot;&gt;å¹¶è¡Œï¼ˆParallelizationï¼‰&lt;/h3&gt;

&lt;p&gt;Goåç¨‹å’Œä¿¡é“çš„å¦ä¸€ä¸ªåº”ç”¨åœºæ™¯æ˜¯åœ¨å¤š CPU æ ¸å¿ƒä¸Šè¿›è¡Œå¹¶å‘è¿ç®—ã€‚å¦‚æœæŸä¸ªè¿ç®—å¯ä»¥è¢«åˆ†è§£æˆä¸ºåŒæ­¥è¿è¡Œçš„ç‹¬ç«‹å­è¿‡ç¨‹ï¼Œå®ƒå°±å¯ä»¥è¿›è¡Œå¹¶è¡Œè®¡ç®—ï¼Œå…¶ä¸­å½“æŸä¸ªå­è¿‡ç¨‹ï¼ˆGoåç¨‹ï¼‰ç»“æŸåé€šè¿‡ä¿¡é“æ¥é€šçŸ¥å®ƒçš„ç»“æŸã€‚&lt;/p&gt;

&lt;p&gt;å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè€—æ—¶çš„å‘é‡è¿ç®—ï¼Œå‘é‡ä¸­æ¯ä¸ªå€¼çš„è¿ç®—éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Vector&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float64&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// Apply the operation to v[i], v[i+1] ... up to v[n-1].&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Vector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DoSome&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Vector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// signal that this piece is done&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘ä»¬å¯ä»¥æŠŠå¾ªç¯ä¸­èƒ½å¤Ÿç‹¬ç«‹å‡ºæ¥çš„é€»è¾‘æ‹†åˆ†å¼€ï¼Œè®©æ¯ä¸ª CPU å„è‡ªå»æ‰§è¡Œã€‚è¿™äº›æ‹†åˆ†å‡ºæ¥çš„é€»è¾‘å¯ä»¥ä»¥ä»»æ„çš„æ¬¡åºæ‰§è¡Œï¼Œåœ¨å¯åŠ¨æ‰€æœ‰çš„ Goåç¨‹ åæˆ‘ä»¬åªéœ€è¦å¯¹å®Œæˆä¿¡å·çš„æ•°é‡è¿›è¡Œè®¡æ•°ï¼ˆè¯»å–æ‰€æœ‰ä¿¡é“ä¸­çš„å€¼ï¼‰ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// number of CPU cores&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Vector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DoAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Vector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// Buffering optional but sensible.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DoSome&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// Drain the channel.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// wait for one task to complete&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// All done.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç›¸å¯¹äºä¸º numCPU åˆ›å»ºå¸¸é‡çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ—¶æ¥å‡†ç¡®è·å– CPU çš„æ•°é‡ã€‚å‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;runtime.NumCPU&lt;/code&gt; è¿”å›ç¡¬ä»¶ CPU çš„æ ¸å¿ƒæ•°é‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å†™ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;var numCPU = runtime.NumCPU()&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NumCPU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Go ä¸­è¿˜æœ‰ä¸€ä¸ªå‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;runtime.GOMAXPROCS&lt;/code&gt;ï¼Œå¯ä»¥ç”¨å®ƒæ¥æŠ¥å‘Š Go ç¨‹åºå¯ä»¥å¹¶å‘è¿è¡Œçš„æ ¸å¿ƒæ•°é‡ã€‚å®ƒçš„é»˜è®¤å€¼æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;runtime.NumCPU&lt;/code&gt;ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è®¾ç½®ç›¸åŒåç§°çš„ç¯å¢ƒå˜é‡ï¼Œæˆ–è€…é€šè¿‡æ˜¾å¼è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ˆä¼ ä¸€ä¸ªæ­£æ•´æ•°ï¼‰æ¥è¦†ç›–è¿™ä¸ªå€¼ã€‚å¦‚æœè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä¼ å…¥çš„æ˜¯ 0ï¼Œä¼šå¾—åˆ°è¿™ä¸ªå€¼å½“å‰çš„å¤§å°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å‘ä¸‹é¢è¿™æ ·å†™ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numCPU&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;GOMAXPROCS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬ä¸è¦æ··æ·†å¹¶å‘å’Œå¹¶è¡Œçš„æ¦‚å¿µã€‚å¹¶å‘æ˜¯æŒ‡æŠŠä»£ç æ„é€ ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ¨¡å—ï¼›å¹¶è¡Œæ˜¯æŒ‡é«˜æ•ˆåœ°åœ¨å¤š CPU æ ¸å¿ƒä¸ŠåŒæ—¶æ‰§è¡Œã€‚å°½ç®¡ Go çš„å¹¶å‘ç‰¹æ€§å¯ä»¥è®©æ„å»ºå¹¶è¡Œè®¡ç®—å˜å¾—ç®€å•ï¼Œä½†æ˜¯ Go æ¯•ç«Ÿæ˜¯ä¸€ä¸ªå¹¶å‘çš„è¯­è¨€ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå¹¶è¡Œè¯­è¨€ï¼Œè€Œä¸”å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¹¶è¡Œé—®é¢˜éƒ½å¥‘åˆ Go çš„æ¨¡å‹ã€‚å¯ä»¥æŸ¥çœ‹ &lt;a href=&quot;https://blog.golang.org/2013/01/concurrency-is-not-parallelism.html&quot;&gt;è¿™é‡Œ&lt;/a&gt;æŸ¥çœ‹æ›´å¤šç›¸å…³çš„è®¨è®ºã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç¼“å­˜æ¼æ–—a-leaky-buffer&quot;&gt;ç¼“å­˜æ¼æ–—ï¼ˆA leaky bufferï¼‰&lt;/h3&gt;

&lt;p&gt;æœ‰æ—¶å€™å¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¹Ÿå¯ä»¥è®©éå¹¶å‘çš„æƒ³æ³•æ›´å®¹æ˜“è¡¨è¾¾ã€‚ä¸‹é¢æ˜¯ä» RPC åŒ…æŠ½è±¡å‡ºæ¥çš„ä¸€ä¸ªä¾‹å­ã€‚å®¢æˆ·ç«¯å¯¹åº”çš„ Goåç¨‹ å¾ªç¯ä»æŸäº›æºä¸­ï¼ˆå¯èƒ½æ˜¯ç½‘ç»œï¼‰æ¥æ”¶æ•°æ®ï¼Œä¸ºäº†é¿å…é‡å¤åˆ†é…å’Œå›æ”¶ç¼“å­˜ï¼Œå®ƒä¿å­˜äº†ä¸€ä¸ªç©ºé—²åˆ—è¡¨ï¼Œå¹¶ç”¨ä¸€ä¸ªå¸¦ç¼“å­˜çš„ä¿¡é“æ‰¿è½½å®ƒã€‚å¦‚æœä¿¡é“æ˜¯ç©ºçš„ï¼Œå°±åˆ†é…ä¸€ä¸ªæ–°çš„ç¼“å­˜ï¼Œå¦åˆ™ä»ä¿¡é“ä¸­è·å–ä¸€ä¸ªå·²æœ‰çš„ç¼“å­˜ã€‚æ¶ˆæ¯çš„ç¼“å­˜ä¸€æ—¦å°±ç»ªï¼Œå°±ä¼šè¢«å‘é€åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;serverChan&lt;/code&gt; ä»è€Œå‘ç»™æœåŠ¡ç«¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;serverChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Buffer&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;// Grab a buffer if available; allocate if not.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// Got one; nothing more to do.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// None free, so allocate a new one.&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;              &lt;span class=&quot;c&quot;&gt;// Read next message from the net.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;serverChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;      &lt;span class=&quot;c&quot;&gt;// Send to server.&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœåŠ¡ç«¯å¯¹åº”çš„ Goåç¨‹ å¾ªç¯è·å–ä»å®¢æˆ·ç«¯ä¼ é€’è¿‡æ¥çš„æ¯ä¸ªæ¶ˆæ¯ï¼Œå¤„ç†å®ŒæˆåæŠŠå¯¹åº”çš„ç¼“å­˜é‡Šæ”¾å¹¶åè¿˜ç»™ç©ºé—²åˆ—è¡¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;serverChan&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// Wait for work.&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;// Reuse buffer if there's room.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;freeList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// Buffer on free list; nothing more to do.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// Free list full, just carry on.&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç é€šè¿‡å‡ è¡Œä»£ç æ„å»ºäº†ä¸€ä¸ªæ¼æ–—æ¡¶çš„ç©ºé—²åˆ—è¡¨ã€‚æ•´ä½“æ¥çœ‹å°±æ˜¯ï¼Œå®¢æˆ·ç«¯è¯•å›¾ä» &lt;code class=&quot;highlighter-rouge&quot;&gt;freeList&lt;/code&gt; è·å–ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çš„ç¼“å­˜å®ƒå°±åˆ†é…ä¸€ä¸ªæ–°çš„ç¼“å­˜ã€‚æœåŠ¡ç«¯ç”¨å®Œç¼“å­˜åæŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;b&lt;/code&gt; è¿”å›ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;freeList&lt;/code&gt;ï¼Œå¦‚æœç©ºé—²åˆ—è¡¨æ»¡äº†ï¼Œç¼“å­˜ä¼šè¢«ä¸¢å¼ƒå¹¶æœ€ç»ˆè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶æ‰ï¼ˆåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;select&lt;/code&gt; ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;default&lt;/code&gt; çš„åˆ†æ”¯ä¼šåœ¨æ²¡æœ‰å…¶ä»–çš„ case åŒ¹é…çš„æ—¶å€™æ‰§è¡Œï¼Œä¹Ÿå°±æ„å‘³ç€ä¸Šé¢ä»£ç ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;select&lt;/code&gt; è¯­å¥ä¸ä¼šé˜»å¡ï¼‰ã€‚&lt;/p&gt;
</description>
        <pubDate>Sun, 24 Nov 2019 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2019/11/24/effectivego-concurrent.html</link>
        <guid isPermaLink="true">https://jingwei.link/2019/11/24/effectivego-concurrent.html</guid>
        
        <category>golang</category>
        
        <category>åŸºç¡€</category>
        
        <category>å®ç”¨</category>
        
        
        <category>golang</category>
        
      </item>
    
      <item>
        <title>ã€ŠåŸæ±åŸå‘³ Go è¯­è¨€å­¦ä¹ ã€‹(10) effective go ç©ºç™½æ ‡è¯†ç¬¦ã€åµŒå¥—</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#èµ„æ–™&quot; id=&quot;markdown-toc-èµ„æ–™&quot;&gt;èµ„æ–™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#ç©ºç™½æ ‡è¯†ç¬¦the-blank-identifier&quot; id=&quot;markdown-toc-ç©ºç™½æ ‡è¯†ç¬¦the-blank-identifier&quot;&gt;ç©ºç™½æ ‡è¯†ç¬¦ï¼ˆThe blank identifierï¼‰&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#å¤šå€¼èµ‹å€¼è¯­å¥ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦the-blank-identifier-in-multiple-assignment&quot; id=&quot;markdown-toc-å¤šå€¼èµ‹å€¼è¯­å¥ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦the-blank-identifier-in-multiple-assignment&quot;&gt;å¤šå€¼èµ‹å€¼è¯­å¥ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦ï¼ˆThe blank identifier in multiple assignmentï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#æœªä½¿ç”¨çš„å¯¼å…¥ä¸æœªä½¿ç”¨çš„å˜é‡unused-imports-and-variables&quot; id=&quot;markdown-toc-æœªä½¿ç”¨çš„å¯¼å…¥ä¸æœªä½¿ç”¨çš„å˜é‡unused-imports-and-variables&quot;&gt;æœªä½¿ç”¨çš„å¯¼å…¥ä¸æœªä½¿ç”¨çš„å˜é‡ï¼ˆUnused imports and variablesï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ä¸ºäº†å‰¯ä½œç”¨çš„å¯¼å…¥import-for-side-effect&quot; id=&quot;markdown-toc-ä¸ºäº†å‰¯ä½œç”¨çš„å¯¼å…¥import-for-side-effect&quot;&gt;ä¸ºäº†å‰¯ä½œç”¨çš„å¯¼å…¥ï¼ˆImport for side effectï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#æ¥å£æ£€æŸ¥interface-checks&quot; id=&quot;markdown-toc-æ¥å£æ£€æŸ¥interface-checks&quot;&gt;æ¥å£æ£€æŸ¥ï¼ˆInterface checksï¼‰&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#åµŒå¥—embedding&quot; id=&quot;markdown-toc-åµŒå¥—embedding&quot;&gt;åµŒå¥—ï¼ˆEmbeddingï¼‰&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;èµ„æ–™&quot;&gt;èµ„æ–™&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://golang.google.cn/doc/effective_go.html&quot;&gt;effective go&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/av75898542&quot;&gt;æœ¬æ–‡çš„è§†é¢‘åœ°å€&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;ç©ºç™½æ ‡è¯†ç¬¦the-blank-identifier&quot;&gt;ç©ºç™½æ ‡è¯†ç¬¦ï¼ˆThe blank identifierï¼‰&lt;/h1&gt;

&lt;p&gt;è‡³æ­¤ä¸ºæ­¢æˆ‘ä»¬å·²ç»æåˆ°è¿‡å¾ˆå¤šæ¬¡ç©ºç™½æ ‡è¯†ç¬¦ï¼Œåœ¨ â€œfor-range å¾ªç¯â€ å’Œ â€œæ˜ å°„ mapsâ€ å°èŠ‚éƒ½æœ‰æåˆ°ã€‚ç©ºç™½æ ‡è¯†ç¬¦å¯ä»¥è¢«ä»»æ„ç±»å‹çš„ä»»æ„å€¼è¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸”è¿™äº›å€¼ä¼šé™é»˜åœ°è¢«ä¸¢å¼ƒæ‰ã€‚å®ƒæœ‰ç‚¹åƒ Unix çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;/dev/null&lt;/code&gt; æ–‡ä»¶æè¿°ç¬¦ï¼šç©ºç™½æ ‡è¯†ç¬¦ï¼ˆ_ï¼‰è¡¨ç¤ºä¸€ä¸ªåªå†™çš„å€¼ï¼Œå®ƒå¯ä»¥ä½œä¸ºå ä½ç¬¦ä½¿ç”¨ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå˜é‡çš„å€¼ä¸ä¼šè¢«ä½¿ç”¨ä½†æ˜¯åˆå¿…é¡»è¦è®¾ç½®ä¸€ä¸ªå˜é‡æ¥æ¥æ”¶è¿™ä¸ªå€¼ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ã€‚å½“ç„¶ï¼Œé™¤æ­¤å¤–ç©ºç™½æ ‡è¯†ç¬¦çš„ç”¨å¤„è¿˜æœ‰å¾ˆå¤šã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¤šå€¼èµ‹å€¼è¯­å¥ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦the-blank-identifier-in-multiple-assignment&quot;&gt;å¤šå€¼èµ‹å€¼è¯­å¥ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦ï¼ˆThe blank identifier in multiple assignmentï¼‰&lt;/h2&gt;

&lt;p&gt;for-range å¾ªç¯ä¸­çš„ç©ºç™½æ ‡è¯†ç¬¦æ˜¯ä¸€ç§é€šç”¨æƒ…å†µçš„ç‰¹ä¾‹ï¼šå±äºå¤šå€¼èµ‹å€¼è¯­å¥ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœä¸€ä¸ªèµ‹å€¼è¯­å¥éœ€è¦åœ¨å·¦ä¾§æœ‰å¤šä¸ªå˜é‡ï¼Œä½†æ˜¯å…¶ä¸­éƒ¨åˆ†å˜é‡ä¸ä¼šè¢«ä»£ç ä½¿ç”¨ï¼Œè¿™æ—¶å€™ç”¨ç©ºç™½æ ‡è¯†ç¬¦å°±å¯ä»¥é¿å…åˆ›å»ºå¤šä½™çš„å˜é‡å¹¶ä¸”æ˜¾å¼å‘Šè¯‰æŒ‡æ˜ä¸¢å¼ƒå¯¹åº”çš„å€¼ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¿”å› å€¼å’Œé”™è¯¯ ä¸¤ä¸ªå€¼çš„å‡½æ•°çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬åªå…³æ³¨å®ƒçš„é”™è¯¯ï¼Œå°±å¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦æ¥ä¸¢å¼ƒè¿™ä¸ªå‡½æ•°è¿”å›çš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsNotExist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s does not exist&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¶å°”æƒ…å†µä¸‹ä½ è¿˜å¯ä»¥çœ‹åˆ°å¿½ç•¥é”™è¯¯å€¼çš„ä»£ç ï¼Œå½“ç„¶è¿™ç§ä¹ æƒ¯æ˜¯éå¸¸ä¸å¥½çš„ï¼Œåœ¨å®é™…çš„ç¼–ç å®è·µä¸­ä¹Ÿä¸æ¨èè¿™ä¹ˆåšï¼›æœ€ä½³å®è·µåº”è¯¥æ€»æ˜¯æ£€æŸ¥é”™è¯¯çš„è¿”å›å€¼ï¼Œæ¯•ç«Ÿé”™è¯¯ä¸­æ€»åŒ…å«ç€ä¸€äº›é”™è¯¯çš„åŸå› ï¼Œä¸€èˆ¬æ˜¯ä»£ç åº”è¯¥å¤„ç†çš„ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// Bad! This code will crash if path does not exist.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IsDir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s is a directory&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æœªä½¿ç”¨çš„å¯¼å…¥ä¸æœªä½¿ç”¨çš„å˜é‡unused-imports-and-variables&quot;&gt;æœªä½¿ç”¨çš„å¯¼å…¥ä¸æœªä½¿ç”¨çš„å˜é‡ï¼ˆUnused imports and variablesï¼‰&lt;/h2&gt;

&lt;p&gt;å¦‚æœå¯¼å…¥äº†æ²¡æœ‰ä½¿ç”¨çš„åŒ…æˆ–è€…å£°æ˜äº†æ²¡æœ‰ä½¿ç”¨çš„å˜é‡ï¼Œä»£ç ç¼–è¯‘çš„æ—¶å€™ç¼–è¯‘å™¨éƒ½ä¼šæŠ¥é”™ã€‚å¦‚æœå¯¼å…¥ä¸€ä¸ªåŒ…å´ä¸ä½¿ç”¨å®ƒä¼šè®©ç¨‹åºæ˜¾å¾—è‡ƒè‚¿è€Œä¸”ä¼šæ‹–æ…¢ä»£ç çš„ç¼–è¯‘é€Ÿåº¦ï¼›ä¸€ä¸ªå˜é‡åˆå§‹åŒ–æœªç»ä½¿ç”¨åˆ™æ„å‘³ç€è®¡ç®—èµ„æºçš„æµªè´¹ï¼Œæœ‰æ—¶å€™ç”šè‡³æ„å‘³ç€å¾ˆå¤§çš„ç¼ºé™·ï¼ˆbugï¼‰ã€‚ä¸è¿‡ï¼Œä»£ç åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ€»ä¼šå‡ºç°å°šæœªä½¿ç”¨çš„å¯¼å…¥å’Œå˜é‡ï¼Œå¦‚æœä»…ä»…ä¸ºäº†ç¼–è¯‘é€šè¿‡è€Œåˆ æ‰ä»–ä»¬åé¢å†™åˆ°å¯¹åº”çš„é€»è¾‘ä»¥åå†æŠŠå®ƒä»¬åŠ å›æ¥ï¼Œè¿™ç§æ“ä½œæ˜¾å¾—æœ‰ç‚¹çƒ¦äººï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ï¼š&lt;/p&gt;

&lt;p&gt;ä¸‹é¢å®Œæˆäº†ä¸€åŠçš„ä»£ç ä¸­æœ‰ä¸¤ä¸ªæ²¡æœ‰ä½¿ç”¨è¿‡çš„å¯¼å…¥ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;fmt&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;io&lt;/code&gt;ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨è¿‡çš„å˜é‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;fd&lt;/code&gt;ï¼Œæ˜æ˜¾ä¸‹é¢çš„è¿™æ®µä»£ç æ˜¯ä¸ä¼šè¢«ç¼–è¯‘é€šè¿‡çš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¯èƒ½æƒ³æå‰çŸ¥é“è¿™æ®µä»£ç æ˜¯ä¸æ˜¯å¯ä»¥è¿è¡Œï¼Œå¦‚æœèƒ½è¿è¡Œï¼Œè‡³å°‘èƒ½ç»™å¼€å‘è€…ä¸€ç‚¹å°å°çš„è‡ªä¿¡ï¼ˆç¨‹åºå‘˜æ€»æ˜¯å¸Œæœ›èƒ½æ—©ç‚¹çœ‹åˆ°è¾“å‡ºç»“æœğŸ˜†ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;io&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;log&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;os&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test.go&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// TODO: use fd.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸ºäº†èƒ½è®©ç¼–è¯‘å™¨æ­£å¸¸ç¼–è¯‘ä¸Šé¢çš„ä»£ç è€Œä¸æŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦æ¥æ ‡è®°å¯¼å…¥çš„åŒ…ï¼›åŒæ ·çš„é“ç†ï¼Œå¯ä»¥æŠŠæœªä½¿ç”¨çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;fd&lt;/code&gt; å˜é‡èµ‹å€¼ç»™ç©ºç™½æ ‡è¯†ç¬¦ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±å¯ä»¥æˆåŠŸç¼–è¯‘é€šè¿‡ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;io&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;log&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;os&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// For debugging; delete when done.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Reader&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;// For debugging; delete when done.&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test.go&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// TODO: use fd.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fd&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¼ ç»Ÿæ„ä¹‰ä¸Šæ¥è¯´ï¼Œä¸ºäº†é¿å…ç¼–è¯‘å™¨æŠ¥é”™çš„å…¨å±€å£°æ˜è¯­å¥ï¼ˆç±»ä¼¼ä¸Šé¢ä»£ç ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;var _ = fmt.Printf&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;var _ io.Reader&lt;/code&gt;ï¼‰åº”è¯¥ç´§è·Ÿåœ¨å¯¼å…¥è¯­å¥çš„åé¢å¹¶ä¸”æ³¨é‡Šä¸€ä¸‹æƒ…å†µï¼Œè¿™æ ·æœªæ¥å¯ä»¥æ–¹ä¾¿åœ°æ‰¾åˆ°è¿™äº›è¯­å¥ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿä½œä¸ºä¸€ç§åˆ é™¤æé†’ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸ºäº†å‰¯ä½œç”¨çš„å¯¼å…¥import-for-side-effect&quot;&gt;ä¸ºäº†å‰¯ä½œç”¨çš„å¯¼å…¥ï¼ˆImport for side effectï¼‰&lt;/h2&gt;

&lt;p&gt;åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œç©ºç™½æ ‡è¯†ç¬¦çš„ä½¿ç”¨ä»…ä»…æ„å‘³ç€ä»£ç è¿˜åœ¨å¼€å‘çŠ¶æ€ï¼Œåƒ &lt;code class=&quot;highlighter-rouge&quot;&gt;fmt&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;io&lt;/code&gt; è¿™ç§æœªç»ä½¿ç”¨çš„åŒ…æœ€åè¦ä¹ˆè¢«ä½¿ç”¨è¦ä¹ˆè¢«ç§»é™¤ã€‚ä¸è¿‡çœŸå®ç¼–ç è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯èƒ½åªéœ€è¦å¯¼å…¥åŒ…ä»è€Œå¼•èµ·æŸç§å‰¯ä½œç”¨ï¼Œä½†æ˜¯ç¡®å®ä¸ä¼šåœ¨æ–‡ä»¶ä¸­æ˜¾å¼åœ°ä½¿ç”¨è¿™ä¸ªåŒ…ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ï¼ŒåŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;net/http/pprof&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;init&lt;/code&gt; å‡½æ•°ä¼šæ³¨å†Œæä¾›è°ƒè¯•ä¿¡æ¯çš„ HTTP å¤„ç†å™¨ï¼Œè™½ç„¶è¿™ä¸ªåŒ…æœ‰å¯¼å‡ºçš„ APIï¼Œä½†æ˜¯å¯¼å…¥æ­¤åŒ…çš„æ–‡ä»¶éœ€è¦çš„ä»…ä»…æ˜¯è°ƒè¯•å¤„ç†å™¨ç„¶åé€šè¿‡å®ƒæä¾›çš„ç½‘é¡µé¡µé¢è·å–ä¿¡æ¯ï¼Œå› æ­¤å¯¼å…¥æ­¤åŒ…çš„æ–‡ä»¶æ²¡æœ‰å¿…è¦æ˜¾å¼å¼•ç”¨è¿™äº› APIã€‚ä¸ºäº†æŸä¸ªå‰¯æ•ˆæœè€Œå¯¼å…¥æŸä¸ªåŒ…å´ä¸ä½¿ç”¨è¿™ä¸ªåŒ…çš„å˜é‡ï¼Œè¿™ç§æƒ…å†µå°±å¯ä»¥ç»™è¿™ä¸ªåŒ…é‡å‘½åä¸ºç©ºç™½æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;net/http/pprof&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å› ä¸ºæ²¡æœ‰å…¶ä»–åœ°æ–¹ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;net/http/pprof&lt;/code&gt; è¿™ä¸ªåŒ…ï¼Œè¿™ç§æ–¹å¼çš„å¯¼å…¥å¯ä»¥å¾ˆæ˜æ˜¾åœ°è¡¨æ˜ç›®çš„ï¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­è¿™ä¸ªåŒ…æ²¡æœ‰åå­—ï¼Œä¹‹æ‰€ä»¥å¯¼å…¥å®ƒåªæ˜¯ä¸ºäº†è·å¾—è¿™ä¸ªåŒ…çš„å‰¯æ•ˆæœã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ¥å£æ£€æŸ¥interface-checks&quot;&gt;æ¥å£æ£€æŸ¥ï¼ˆInterface checksï¼‰&lt;/h2&gt;

&lt;p&gt;å°±åƒæˆ‘ä»¬åœ¨â€œæ¥å£â€é‚£ä¸€èŠ‚çœ‹åˆ°çš„ï¼Œç±»å‹ä¸éœ€è¦æ˜¾å¼æŒ‡æ˜è‡ªå·±å®ç°äº†å“ªäº›æ¥å£ã€‚ç›¸åï¼Œç±»å‹ä»…éœ€å®ç°æ¥å£ä¸­åŒ…å«çš„æ–¹æ³•éšå¼åœ°æ¥å®ç°æ¥å£ã€‚å®é™…ç¼–ç ä¸­ï¼Œå¤§éƒ¨åˆ†çš„æ¥å£è½¬æ¢éƒ½æ˜¯é™æ€çš„ï¼Œå› æ­¤åœ¨ç¼–è¯‘æ—¶å°±ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å¸Œæœ›å¾—åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Reader&lt;/code&gt; ç±»å‹çš„å‚æ•°ï¼Œå¯ä»¥ç»™å®ƒä¼ é€’ä¸€ä¸ªå®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Reader&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;*os.File&lt;/code&gt; ç±»å‹çš„å˜é‡ï¼Œå¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;*os.File&lt;/code&gt; æ²¡æœ‰å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Reader&lt;/code&gt; æ¥å£ï¼Œä»£ç ä¸èƒ½ç¼–è¯‘é€šè¿‡ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡ï¼Œæœ‰æ—¶æ¥å£çš„æ£€æŸ¥æ˜¯åœ¨è¿è¡Œæ—¶å‘ç”Ÿçš„ã€‚æ¯”å¦‚åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;encoding/json&lt;/code&gt; è¿™ä¸ªåŒ…é‡Œé¢æœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Marshaler&lt;/code&gt; æ¥å£ï¼Œå½“ JSON ç¼–ç å™¨æ¥æ”¶åˆ°ä¸€ä¸ªå®ç°äº†è¿™ä¸ªæ¥å£çš„å€¼çš„æ—¶å€™ï¼Œç¼–ç å™¨ä¼šè°ƒç”¨è¿™ä¸ªå€¼çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;marshal&lt;/code&gt; æ–¹æ³•æŠŠè¿™ä¸ªå€¼è½¬åŒ–æˆä¸º JSONï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸ä¼šè°ƒç”¨æ ‡å‡†çš„è½¬æ¢è¿‡ç¨‹äº†ã€‚ç¼–ç å™¨ä¼šåœ¨è¿è¡Œæ—¶å¯¹å˜é‡è¿›è¡Œç±»å‹æ–­è¨€ä»è€Œæ£€æŸ¥å®ƒçš„å±æ€§ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Marshaler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœä»…éœ€è¦çŸ¥é“æŸä¸ªç±»å‹æ˜¯å¦å®ç°äº†æŸä¸ªæ¥å£ï¼Œå¯ä»¥ä½¿ç”¨ç©ºç™½æ ‡è¯†ç¬¦ä»è€Œå¿½ç•¥æ‰ç±»å‹æ£€æŸ¥å¾—åˆ°çš„å€¼ï¼Œå¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Marshaler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;value %v of type %T implements json.Marshaler&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å®ç°äº†è¯¥ç±»å‹çš„åŒ…å†…ä¿è¯å®ƒå®ç°äº†ç›¸åº”çš„æ¥å£ã€‚æ¯”å¦‚ï¼Œå¦‚æœç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;json.RawMessage&lt;/code&gt; éœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;JSON&lt;/code&gt; è¡¨ç¤ºï¼Œå®ƒåº”è¯¥å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;json.Marshaler&lt;/code&gt; æ¥å£ï¼Œä½†æ˜¯ä»£ç ä¸­æ²¡æœ‰ä»»ä½•é™æ€è½¬æ¢è®©ç¼–è¯‘å™¨ç¡®è®¤è¿™ç§å®ç°ã€‚å¦‚æœè¿™ä¸ªç±»å‹æ²¡æœ‰å®ç°ç›¸åº”çš„æ¥å£æ–¹æ³•ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;JSON&lt;/code&gt; ç¼–ç å™¨ä»ç„¶ä¼šå·¥ä½œï¼Œåªæ˜¯è¿™ä¸ªæ—¶å€™ä¸ä¼šä½¿ç”¨è‡ªå®šä¹‰çš„å®ç°è€Œæ˜¯è°ƒç”¨é»˜è®¤çš„è½¬æ¢æ–¹æ³•ã€‚ä¸ºäº†ä¿è¯æŸä¸ªç±»å‹å®ç°äº†æ­£ç¡®çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨åŒ…ä¸­å†™ä¸€ä¸ªä½¿ç”¨äº†ç©ºç™½æ ‡è¯†ç¬¦çš„å£°æ˜ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Marshaler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RawMessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™ä¸ªå£°æ˜ä¸­ï¼Œèµ‹å€¼è¯­å¥åŒ…å«ä¸€æ¬¡è½¬æ¢ï¼Œä» &lt;code class=&quot;highlighter-rouge&quot;&gt;*RawMessage&lt;/code&gt; è½¬æ¢ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;Marshaler&lt;/code&gt;ï¼Œè¿™ç§æ£€æŸ¥ä¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œã€‚å¦‚æœæ¥å£ &lt;code class=&quot;highlighter-rouge&quot;&gt;json.Marshaler&lt;/code&gt; å˜åŒ–äº†ï¼Œè¿™ä¸ªåŒ…ä¸ä¼šç¼–è¯‘é€šè¿‡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±çŸ¥é“å®ƒéœ€è¦æ›´æ–°äº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä¸Šé¢çš„è¿™ç§æƒ…å†µä¸‹ï¼Œç©ºç™½æ ‡è¯†ç¬¦çš„å‡ºç°æ ‡æ˜å£°æ˜è¯­å¥ä»…ä»…ä¸ºäº†ç±»å‹æ£€æŸ¥ï¼Œè€Œå¹¶ä¸ä¼šåˆ›å»ºä¸€ä¸ªå˜é‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœçŸ¥é“ç±»å‹è‚¯å®šæ»¡è¶³æŸä¸ªæ¥å£åˆ™æ²¡æœ‰å¿…è¦åšè¿™ç§å£°æ˜ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ç§ç”¨æ³•ä»…åœ¨æºç ä¸­ä¸å­˜åœ¨é™æ€ç±»å‹è½¬æ¢çš„æƒ…å†µæ—¶ä½¿ç”¨ï¼Œè€Œè¿™ç§æƒ…å†µå…¶å®å¾ˆå°‘è§åˆ°ã€‚&lt;/p&gt;

&lt;h1 id=&quot;åµŒå¥—embedding&quot;&gt;åµŒå¥—ï¼ˆEmbeddingï¼‰&lt;/h1&gt;

&lt;p&gt;Go æ²¡æœ‰å­ç±»çš„æ¦‚å¿µï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç»“æ„ä½“æˆ–æ¥å£ä¸­&lt;strong&gt;åµŒå¥—&lt;/strong&gt;æŸä¸ªç±»å‹æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;æ¥å£çš„åµŒå¥—éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å‰é¢æåˆ°è¿‡çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Reader&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Writer&lt;/code&gt; æ¥å£ï¼Œä¸‹é¢æ˜¯å®ƒä»¬çš„å£°æ˜ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Reader&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Writer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢åˆ—å‡ºçš„ä¸¤ä¸ªæ¥å£éƒ½åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;io&lt;/code&gt; åŒ…ä¸­è¿˜å¯¼å‡ºäº†å‡ ä¸ªåŒ…å«å¤šä¸ªæ–¹æ³•çš„æ¥å£ã€‚æ¯”å¦‚ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;io.ReadWriter&lt;/code&gt; æ¥å£ï¼Œå®ƒåŒ…å«äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Read&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Write&lt;/code&gt; ä¸¤ä¸ªæ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠä¸¤ä¸ªæ–¹æ³•ç›´æ¥å†™åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;io.ReadWriter&lt;/code&gt; æ¥å£å®šä¹‰é‡Œï¼Œä½†æ˜¯æ›´ç®€å•æ›´æ˜äº†çš„æ–¹å¼æ˜¯æŠŠä¸Šé¢çš„ä¸¤ä¸ªæ¥å£ &lt;code class=&quot;highlighter-rouge&quot;&gt;Reader&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Writer&lt;/code&gt; åµŒè¿›æ–°çš„æ¥å£ä¸­ï¼Œå°±åƒä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// ReadWriter is the interface that combines the Reader and Writer interfaces.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ReadWriter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Reader&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Writer&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç çš„å«ä¹‰æ˜¯ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriter&lt;/code&gt; æ¥å£ï¼Œå®ƒæ—¢æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Reader&lt;/code&gt; åˆæ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Writer&lt;/code&gt;ï¼Œå®ƒæ˜¯åµŒå¥—èµ·æ¥çš„æ¥å£çš„è”åˆä½“ï¼ˆè¿™äº›è”åˆä½“ä¹‹é—´çš„æ–¹æ³•ä¸èƒ½æœ‰é‡åï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¥å£åªèƒ½è¢«åµŒå¥—åˆ°æ¥å£é‡Œã€‚&lt;/p&gt;

&lt;p&gt;ç»“æ„ä½“ä¹Ÿæœ‰åµŒå¥—çš„ç”¨æ³•ï¼Œä½†æ˜¯å«ä¹‰æ›´æ·±è¿œä¹Ÿæ›´å¤æ‚ã€‚åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio&lt;/code&gt; æœ‰ä¸¤ä¸ªç»“æ„ä½“ç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio.Reader&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio.Writer&lt;/code&gt;ï¼Œåˆ†åˆ«å®ç°äº†åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;io&lt;/code&gt; ä¸­çš„ç›¸å…³æ¥å£ã€‚åŒæ—¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio&lt;/code&gt; åŒ…è¿˜å®ç°äº†å¸¦ç¼“å­˜çš„è¯»å†™å™¨ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;reader/writer&lt;/code&gt;ï¼‰ï¼Œé€šè¿‡åµŒå¥—çš„æ–¹å¼åœ¨åŒä¸€ä¸ªç»“æ„ä¸­ç»„åˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;reader&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;writer&lt;/code&gt;ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼ˆåœ¨ç»„åˆç»“æ„ä½“å£°æ˜ä¸­åˆ—å‡ºå­ç»“æ„ä½“ï¼Œä½†æ˜¯ä¸ç»™å®šå­—æ®µåï¼‰ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// ReadWriter stores pointers to a Reader and a Writer.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// It implements io.ReadWriter.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ReadWriter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Reader&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// *bufio.Reader&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Writer&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;// *bufio.Writer&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åµŒå¥—å…ƒç´ æ˜¯å­ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œå› æ­¤åˆå§‹åŒ–æ—¶å¿…é¡»è¦æŒ‡å‘åˆæ³•çš„ç»“æ„ä½“æ‰èƒ½ä½¿ç”¨ï¼ˆå¤§å®¶å¯ä»¥å›é¡¾åˆå§‹åŒ–ä¸€èŠ‚çš„å†…å®¹ï¼‰ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriter&lt;/code&gt; ç»“æ„ä½“ä¹Ÿå¯ä»¥å†™ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ReadWriter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Reader&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;writer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Writer&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä½†å¦‚æœæŒ‡å®šäº†å­—æ®µåï¼Œä¸ºäº†ä½¿ç”¨å­—æ®µé‡Œçš„æ–¹æ³•ï¼ŒåŒæ—¶ä¸ºæ»¡è¶³ &lt;code class=&quot;highlighter-rouge&quot;&gt;io&lt;/code&gt; åŒ…å¯¹åº”çš„æ¥å£ï¼Œä¸å¾—ä¸æ‰‹åŠ¨å®šä¹‰ä»£ç†æ–¹æ³•ï¼Œæ¯”å¦‚ä¸‹é¢çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Read&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rw&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ReadWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡ç›´æ¥åµŒå¥—ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…ä¸Šé¢å•°å—¦çš„ç¼–ç æ–¹å¼ã€‚åµŒå¥—ç±»å‹çš„æ–¹æ³•è‡ªåŠ¨æå‡ä¸ºç»„åˆä½“çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;bufio.ReadWriter&lt;/code&gt; ä¸ä»…å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio.Reader&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio.Writer&lt;/code&gt;è¿™ä¸¤ä¸ªæ¥å£ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸”åŒæ—¶æ»¡è¶³ä¸‹é¢çš„ä¸‰ä¸ªæ¥å£ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;io.Reader&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Writer&lt;/code&gt;, å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;io.ReadWriter&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åµŒå¥—ä¸å­ç±»ç»§æ‰¿çš„æ¨¡å‹è¿˜æ˜¯å¾ˆä¸ä¸€æ ·çš„ã€‚å¦‚æœæˆ‘ä»¬åµŒå¥—äº†ä¸€ä¸ªç±»å‹ï¼Œåˆ™è¿™ä¸ªç±»å‹æ‰€æœ‰çš„æ–¹æ³•éƒ½ä¼šæˆä¸ºå¤–é¢ç±»å‹çš„æ–¹æ³•ï¼Œä½†æ˜¯å½“æ–¹æ³•è¢«è§¦å‘è°ƒç”¨çš„æ—¶å€™å…¶æ¥æ”¶è€…ä¾ç„¶æ˜¯é‡Œé¢çš„ç±»å‹è€Œä¸æ˜¯å¤–é¢çš„ç±»å‹ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“ &lt;code class=&quot;highlighter-rouge&quot;&gt;bufio.ReadWriter&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Read&lt;/code&gt; æ–¹æ³•è¢«è§¦å‘çš„æ—¶å€™ï¼Œå’Œä¸Šé¢æ‰‹åŠ¨å†™çš„ä»£ç†æ–¹æ³•æ˜¯ä¸€æ ·çš„æ•ˆæœï¼šæ¥æ”¶è€…æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriter&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;reader&lt;/code&gt; å­—æ®µï¼Œè€Œä¸æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriter&lt;/code&gt; è‡ªå·±ã€‚&lt;/p&gt;

&lt;p&gt;åµŒå¥—ä¹Ÿå¯ä»¥å¾ˆä¾¿åˆ©çš„åº”ç”¨ã€‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒåµŒå¥—çš„å­—æ®µå’Œæ™®é€šçš„å‘½åå­—æ®µä¸€èµ·ä½¿ç”¨ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Job&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Command&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Logger&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢å®šä¹‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt; ç±»å‹æœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;Print&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Printf&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Println&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;*log.Logger&lt;/code&gt; çš„å…¶ä»–æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;Logger&lt;/code&gt; å–ä¸€ä¸ªå­—æ®µåï¼Œä½†æ˜¯æ²¡å¿…è¦è¿™ä¹ˆåšã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‘åˆå§‹åŒ–åçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt; ç±»å‹çš„å¯¹è±¡æ‰“æ—¥å¿—äº†ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;starting now...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Logger&lt;/code&gt; æ˜¯ç»“æ„ä½“ &lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt; çš„ä¸€ä¸ªå¸¸è§„å­—æ®µï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡å¸¸è§„çš„æ–¹å¼æ¥æ„å»º &lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt;ï¼Œæ¯”å¦‚ä¸‹é¢çš„æ–¹å¼ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NewJob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Job&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Job&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç¬¦åˆè¯­æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;job&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Job&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Job: &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ldate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬éœ€è¦ç›´æ¥å¼•ç”¨åµŒå¥—çš„å­—æ®µï¼Œå­—æ®µçš„åç§°é»˜è®¤æ˜¯&lt;strong&gt;å¿½ç•¥åŒ…ä¿®é¥°ç¬¦çš„åç§°&lt;/strong&gt;ï¼Œå°±åƒ &lt;code class=&quot;highlighter-rouge&quot;&gt;ReadWriter&lt;/code&gt; ç»“æ„ä½“ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Read&lt;/code&gt; æ–¹æ³•ä¸€æ ·ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è®¿é—® &lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt; å˜é‡ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;*log.Logger&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;job.Logger&lt;/code&gt;ï¼Œå¦‚æœæƒ³é‡æ–°å®šä¹‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;Logger&lt;/code&gt; çš„æ–¹æ³•ï¼Œè¿™ç§å†™æ³•éå¸¸æœ‰ç”¨ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;job&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Job&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%q: %s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;job&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åµŒå¥—ç±»å‹è™½ç„¶å¥½ç”¨ï¼Œä½†åŒæ—¶å¼•å…¥äº†å‘½åå†²çªçš„é—®é¢˜ï¼Œä¸è¿‡ Go è¯­è¨€è§£å†³è¿™ç§å†²çªçš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ã€‚é¦–å…ˆï¼Œå­—æ®µæˆ–æ–¹æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;X&lt;/code&gt; ä¼šè¦†ç›–ä»»ä½•æ·±å±‚åµŒå¥—ç±»å‹çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;X&lt;/code&gt;ã€‚æ¯”å¦‚ï¼Œå¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;log.Logger&lt;/code&gt; åŒ…å«äº†ä¸€ä¸ªå« &lt;code class=&quot;highlighter-rouge&quot;&gt;Command&lt;/code&gt; çš„å­—æ®µæˆ–æ–¹æ³•ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt; ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Command&lt;/code&gt; å­—æ®µä¼šè¦†ç›–å®ƒã€‚&lt;/p&gt;

&lt;p&gt;å…¶æ¬¡ï¼Œå¦‚æœåŒæ ·çš„åå­—åœ¨&lt;strong&gt;åŒä¸€çº§çš„åµŒå¥—&lt;/strong&gt;ä¸­å‡ºç°ï¼ˆå¯¹æ¯”ä¸åŒçº§çš„æƒ…å†µï¼‰ï¼Œè¿™ä¼šå¯¼è‡´é”™è¯¯ã€‚å¦‚æœ &lt;code class=&quot;highlighter-rouge&quot;&gt;Job&lt;/code&gt; ç»“æ„åŒ…å«äº†å¦ä¸€ä¸ªåç§°ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;Logger&lt;/code&gt; çš„å­—æ®µæˆ–è€…æ–¹æ³•ï¼Œæ­¤æ—¶å¦‚æœå†åµŒå¥— &lt;code class=&quot;highlighter-rouge&quot;&gt;log.Logger&lt;/code&gt; å°±ä¼šæŠ¥é”™ã€‚ç„¶è€Œæœ‰ç‰¹ä¾‹ï¼Œå¦‚æœé‡å¤çš„åç§°ä¸ä¼šåœ¨ç±»å‹å®šä¹‰ä¹‹å¤–ä½¿ç”¨ï¼Œå°±ä¸ä¼šå¼•èµ·é—®é¢˜ï¼›è¿™å¯ä»¥ä¿æŠ¤ç»“æ„ä½“ä¸ä¼šå› ä¸ºè¢«åµŒå¥—çš„å¤–éƒ¨ç±»å‹çš„å˜åŒ–è€Œå˜å¾—ä¸å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æ·»åŠ çš„å­—æ®µä¸å¦ä¸€ä¸ªå­ç±»å‹çš„å­—æ®µå†²çªæ—¶ï¼Œå¦‚æœä¸¤ä¸ªå­—æ®µéƒ½ä¸ä¼šè¢«ä½¿ç”¨ï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚&lt;/p&gt;
</description>
        <pubDate>Sun, 17 Nov 2019 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2019/11/17/effectivego-blank-identifier-embed.html</link>
        <guid isPermaLink="true">https://jingwei.link/2019/11/17/effectivego-blank-identifier-embed.html</guid>
        
        <category>golang</category>
        
        <category>åŸºç¡€</category>
        
        <category>å®ç”¨</category>
        
        
        <category>golang</category>
        
      </item>
    
      <item>
        <title>MySQL æ•°æ®åº“çš„åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; id=&quot;markdown-toc-å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#é€‚ç”¨äººç¾¤&quot; id=&quot;markdown-toc-é€‚ç”¨äººç¾¤&quot;&gt;é€‚ç”¨äººç¾¤&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#æ•°æ®åº“çš„åŸºæœ¬ä½¿ç”¨&quot; id=&quot;markdown-toc-æ•°æ®åº“çš„åŸºæœ¬ä½¿ç”¨&quot;&gt;æ•°æ®åº“çš„åŸºæœ¬ä½¿ç”¨&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#æ•°æ®åº“çš„å®‰è£…ä¸å¯åŠ¨&quot; id=&quot;markdown-toc-æ•°æ®åº“çš„å®‰è£…ä¸å¯åŠ¨&quot;&gt;æ•°æ®åº“çš„å®‰è£…ä¸å¯åŠ¨&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#è¿æ¥æ•°æ®åº“æœåŠ¡&quot; id=&quot;markdown-toc-è¿æ¥æ•°æ®åº“æœåŠ¡&quot;&gt;è¿æ¥æ•°æ®åº“æœåŠ¡&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#åˆ›å»ºæ•°æ®åº“&quot; id=&quot;markdown-toc-åˆ›å»ºæ•°æ®åº“&quot;&gt;åˆ›å»ºæ•°æ®åº“&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#åˆ›å»ºæ•°æ®è¡¨&quot; id=&quot;markdown-toc-åˆ›å»ºæ•°æ®è¡¨&quot;&gt;åˆ›å»ºæ•°æ®è¡¨&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#åˆ›å»º-users-è¡¨&quot; id=&quot;markdown-toc-åˆ›å»º-users-è¡¨&quot;&gt;åˆ›å»º users è¡¨&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#åˆ›å»º-blogs-è¡¨&quot; id=&quot;markdown-toc-åˆ›å»º-blogs-è¡¨&quot;&gt;åˆ›å»º blogs è¡¨&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#åˆ›å»º-comments-è¡¨&quot; id=&quot;markdown-toc-åˆ›å»º-comments-è¡¨&quot;&gt;åˆ›å»º comments è¡¨&lt;/a&gt;&lt;/li&gt;
          &lt;li&gt;&lt;a href=&quot;#åˆ›å»ºä¸€äº›å‡æ•°æ®ä¾¿äºåé¢æ£€ç´¢ä½¿ç”¨&quot; id=&quot;markdown-toc-åˆ›å»ºä¸€äº›å‡æ•°æ®ä¾¿äºåé¢æ£€ç´¢ä½¿ç”¨&quot;&gt;åˆ›å»ºä¸€äº›å‡æ•°æ®ä¾¿äºåé¢æ£€ç´¢ä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#join-çš„ä½¿ç”¨&quot; id=&quot;markdown-toc-join-çš„ä½¿ç”¨&quot;&gt;JOIN çš„ä½¿ç”¨&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#explain-çš„ä½¿ç”¨&quot; id=&quot;markdown-toc-explain-çš„ä½¿ç”¨&quot;&gt;EXPLAIN çš„ä½¿ç”¨&lt;/a&gt;        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;#åœ¨-usersusername-å­—æ®µä¸Šæ·»åŠ ç´¢å¼•&quot; id=&quot;markdown-toc-åœ¨-usersusername-å­—æ®µä¸Šæ·»åŠ ç´¢å¼•&quot;&gt;åœ¨ users.username å­—æ®µä¸Šæ·»åŠ ç´¢å¼•&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å°ç»“&quot; id=&quot;markdown-toc-å°ç»“&quot;&gt;å°ç»“&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#å‚è€ƒ&quot; id=&quot;markdown-toc-å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;å¯¹ä¸€èˆ¬çš„å¼€å‘è€…æ¥è¯´ï¼ŒMySQL å®‰è£…æˆåŠŸä»¥åï¼Œå‰©ä¸‹çš„å°±æ˜¯åŸºæœ¬çš„ä½¿ç”¨äº†ï¼Œå¦‚æœæ˜¯è¿ç»´å¼€å‘ï¼Œå¯èƒ½è¿˜ä¼šæ¶‰åŠåˆ°æ•°æ®åº“çš„è¿ç»´ã€‚æœ¬æ–‡æš‚ä¸”ä¸è€ƒè™‘è¿ç»´ä¸Šçš„æ“ä½œï¼Œä»…å°±æ•°æ®åº“çš„ä½¿ç”¨ç»™å‡ºä¸€äº›ç¤ºä¾‹ï¼Œä¸»è¦åŒ…æ‹¬ &lt;code class=&quot;highlighter-rouge&quot;&gt;CURD&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPLAIN&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;é€‚ç”¨äººç¾¤&quot;&gt;é€‚ç”¨äººç¾¤&lt;/h2&gt;
&lt;p&gt;å…¥é—¨â€”â€”åˆçº§â€”â€”&lt;strong&gt;ä¸­çº§âˆš&lt;/strong&gt;â€”â€”é«˜çº§ï¼›æœ¬æ–‡é€‚åº”ä¸­çº§åŠä»¥ä¸Šã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ•°æ®åº“çš„åŸºæœ¬ä½¿ç”¨&quot;&gt;æ•°æ®åº“çš„åŸºæœ¬ä½¿ç”¨&lt;/h2&gt;
&lt;h3 id=&quot;æ•°æ®åº“çš„å®‰è£…ä¸å¯åŠ¨&quot;&gt;æ•°æ®åº“çš„å®‰è£…ä¸å¯åŠ¨&lt;/h3&gt;
&lt;p&gt;ç›®å‰å¸¸è§çš„æ“ä½œç³»ç»Ÿæœ‰ä¸‰ç±»ï¼šLinuxã€Windowsã€Macã€‚ä¸åŒå¹³å°å®‰è£…è½¯ä»¶çš„æ–¹å¼å„å¼‚ï¼Œå®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ä¹Ÿå„ä¸ç›¸åŒï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±æ‰€ä½¿ç”¨çš„å¹³å°è¿›è¡Œæ¢ç´¢ã€‚å› ä¸ºæœ¬äººä½¿ç”¨çš„æ˜¯ Macï¼Œå› æ­¤åªç»™å‡º Mac æ“ä½œç³»ç»Ÿä¸Š MySQL çš„å®‰è£…ä¸å¯åŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;ç®€å•æ€»ç»“ä¸‹æ¥å°±æ˜¯ä¸‹é¢å‡ ä¸ªå‘½ä»¤&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# å®‰è£… homebrewï¼Œ å‚è€ƒ https://brew.sh/&lt;/span&gt;
/usr/bin/ruby &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-fsSL&lt;/span&gt; https://raw.githubusercontent.com/Homebrew/install/master/install&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# æŸ¥æ‰¾å¯ä»¥å®‰è£…çš„ mysql æ–¹æ¡ˆ&lt;/span&gt;
brew search mysql

&lt;span class=&quot;c&quot;&gt;# å®‰è£… 5.7 ç‰ˆæœ¬çš„  mysql&lt;/span&gt;
brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mysql@5.7

&lt;span class=&quot;c&quot;&gt;# æŸ¥çœ‹ mysql@5.7 çš„å®‰è£…ä¿¡æ¯ã€å¯åŠ¨ä¿¡æ¯ç­‰&lt;/span&gt;
brew info mysql@5.7

&lt;span class=&quot;c&quot;&gt;# å¼€æœºå¯åŠ¨ mysql@5.7&lt;/span&gt;
brew services start mysql@5.7
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;è¿æ¥æ•°æ®åº“æœåŠ¡&quot;&gt;è¿æ¥æ•°æ®åº“æœåŠ¡&lt;/h3&gt;
&lt;p&gt;å¯åŠ¨ MySQL åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;ps -ef |grep mysql&lt;/code&gt; æ¥æŸ¥çœ‹ä¸ MySQL ç›¸å…³çš„è¿›ç¨‹ï¼Œå¯ä»¥å‘ç° åå°ä¼šè¿è¡Œä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;mysqld&lt;/code&gt; çš„è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„ â€œè¿æ¥æ•°æ®åº“â€ å…¶å®æŒ‡çš„æ˜¯è¿æ¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;mysqld&lt;/code&gt; æä¾›çš„æ•°æ®åº“æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€èˆ¬æœ¬åœ°ï¼ˆè‡ªå·±çš„ç”µè„‘ä¸Šé¢ï¼‰å®‰è£…å®Œ MySQL åï¼Œä¼šé»˜è®¤å®‰è£… &lt;code class=&quot;highlighter-rouge&quot;&gt;mysql&lt;/code&gt; è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥ç”¨å®ƒæ¥è¿æ¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;mysqld&lt;/code&gt; æä¾›çš„æœåŠ¡ï¼ˆå› ä¸ºçœŸæ­£æä¾›æ•°æ®åº“æœåŠ¡çš„æ˜¯ mysqldï¼Œæˆ–è®¸ MySQL åº”è¯¥å« MySQLD æ¯”è¾ƒå¥½ï¼Ÿ ğŸ˜†ï¼‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# è¿æ¥æœ¬åœ° localhost ç«¯å£ä¸º 3306 çš„æ•°æ®åº“ hello&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ä½¿ç”¨ root ç”¨æˆ·ï¼Œä¸”è¦æ±‚è¾“å…¥å¯†ç &lt;/span&gt;
mysql &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; localhost &lt;span class=&quot;nt&quot;&gt;-P&lt;/span&gt; 3306 &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; hello &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# æˆ‘ä»¬å¯ä»¥å¿½ç•¥ -h å’Œ -P æ¥ç®€åŒ–ä¸Šé¢çš„è¯­å¥&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ä¸‹é¢çš„è¯­å¥è¡¨ç¤ºï¼š ä»¥ root ç”¨æˆ·è¿æ¥æœ¬åœ° 3306 ç«¯å£ä¸Šçš„æ•°æ®åº“ hello&lt;/span&gt;
mysql &lt;span class=&quot;nt&quot;&gt;-D&lt;/span&gt; hello &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å¦‚æœä¸éœ€è¦æŒ‡å®šè¿æ¥å“ªä¸ªæ•°æ®åº“ï¼Œè¿˜å¯ä»¥çœç•¥ -D åŠå…¶å‚æ•°&lt;/span&gt;
mysql &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# å¦‚æœéœ€è¦æŒ‡å®šå­—ç¬¦é›†ä¸º utf8mb4ï¼Œéœ€è¦æ·»åŠ ï¼ˆå¦‚æœè¦å­˜å‚¨ emoji å°±å¿…é¡»è¦æŒ‡å®šè¿™ä¸ªå­—ç¬¦é›†ï¼‰&lt;/span&gt;
mysql &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; root &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--default-character-set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;utf8mb4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;åˆ›å»ºæ•°æ®åº“&quot;&gt;åˆ›å»ºæ•°æ®åº“&lt;/h3&gt;
&lt;p&gt;è¿æ¥åˆ°æ•°æ®åº“ä»¥åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­å¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- SQL çš„æ³¨é‡Šä½¿ç”¨çš„æ˜¯ åŒæ¨ªçº¿ â€œ--â€&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- å¦‚æœ hello æ•°æ®åº“å·²ç»å­˜åœ¨ï¼Œå°±æ˜¾å¼åœ°å…ˆåˆ é™¤è¿™ä¸ªæ•°æ®åº“&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- ç„¶ååˆ›å»ºä¸€ä¸ªåä¸º hello çš„æ•°æ®åº“ï¼Œå¹¶æŒ‡å®šå…¶é»˜è®¤çš„å­—ç¬¦é›†ä¸º utf8mb4&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- å¤§å®¶å¯ä»¥è‡ªè¡Œæœç´¢ MySQL utf8mb4 ç›¸å…³çš„å†…å®¹&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DATABASE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`hello`&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;CHARACTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`utf8mb4`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;-- æœ‰äº†æ•°æ®åº“ä»¥åå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“äº†ï¼Œç„¶åæ‰å¯ä»¥åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;USE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;åˆ›å»ºæ•°æ®è¡¨&quot;&gt;åˆ›å»ºæ•°æ®è¡¨&lt;/h3&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¨¡ä»¿ä¸€ä¸ªåšå®¢ç³»ç»Ÿåˆ›å»ºå‡ ä¸ªæ•°æ®è¡¨ï¼Œåˆ†åˆ«åŒ…æ‹¬ç”¨æˆ·è¡¨ usersã€åšå®¢è¡¨ blogs å’Œè¯„è®ºè¡¨ commentsã€‚&lt;/p&gt;

&lt;p&gt;åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™æˆ‘ä»¬æœ‰å‡ ä¸ªé»˜è®¤é¡¹ï¼Œæ•°æ®åº“å¼•æ“ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;InnoDB&lt;/code&gt;ï¼ˆå°ç™½ç”¨æˆ·åªéœ€è¦è®°ä½ InnoDB å¯ä»¥æ»¡è¶³ç»å¤§éƒ¨åˆ†åœºæ™¯ï¼‰ï¼Œå­—ç¬¦é›†ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;utf8mb4&lt;/code&gt;ã€‚ç”±äº &lt;code class=&quot;highlighter-rouge&quot;&gt;InnodB&lt;/code&gt; çš„ â€œèšç°‡ç´¢å¼•â€ å’Œâ€œäºŒçº§ç´¢å¼•åŒ…å«å¼•ç”¨è¡Œçš„ä¸»é”®åˆ—â€çš„ç‰¹æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;int&lt;/code&gt; çš„ä¸»é”®  &lt;code class=&quot;highlighter-rouge&quot;&gt;id&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;åˆ›å»º-users-è¡¨&quot;&gt;åˆ›å»º users è¡¨&lt;/h4&gt;

&lt;p&gt;ä¸‹é¢çš„è¯­å¥åˆ›å»ºäº†ç”¨æˆ· users è¡¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- ä¸ºäº†è¯•éªŒç¯å¢ƒçš„å¹²å‡€æ•´æ´ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ users è¡¨&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- å¦‚æœå·²ç»å­˜åœ¨ users è¡¨å°±å…ˆåˆ é™¤æ‰ï¼Œæ¥ç€åˆ›å»º users è¡¨&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- ç”¨æˆ·è¡¨ä¸­åŒ…å«çš„å­—æ®µåŠå…¶å«ä¹‰å¯ä»¥æŸ¥çœ‹ COMMENT ä¸­å¤‡æ³¨çš„å†…å®¹&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ä¸»é”®ï¼Œç”¨æˆ· id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`created_at`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'åˆ›å»ºæ—¶é—´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`updated_at`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æ›´æ–°æ—¶é—´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`username`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ç”¨æˆ·å'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`birthday`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ç”Ÿæ—¥æ—¥æœŸ'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_user_created_at`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`created_at`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BTREE&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InnoDB&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utf8mb4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;åˆ›å»º-blogs-è¡¨&quot;&gt;åˆ›å»º blogs è¡¨&lt;/h4&gt;

&lt;p&gt;ä¸‹é¢çš„è¯­å¥åˆ›å»ºäº†åšå®¢ blogs è¡¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- ä¸ºäº†è¯•éªŒç¯å¢ƒçš„å¹²å‡€æ•´æ´ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ blogs è¡¨&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- å¦‚æœå·²ç»å­˜åœ¨ blogs è¡¨å°±å…ˆåˆ é™¤æ‰ï¼Œæ¥ç€åˆ›å»º blogs è¡¨&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- ç”¨æˆ·è¡¨ä¸­åŒ…å«çš„å­—æ®µåŠå…¶å«ä¹‰å¯ä»¥æŸ¥çœ‹ COMMENT ä¸­å¤‡æ³¨çš„å†…å®¹&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blogs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blogs`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ä¸»é”®ï¼Œåšå®¢ id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`created_at`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'åˆ›å»ºæ—¶é—´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`updated_at`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æ›´æ–°æ—¶é—´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ç”¨æˆ·id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`title`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'åšå®¢æ ‡é¢˜ï¼Œæœ€å¤š 50 ä¸ªå­—ç¬¦'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'åšå®¢å†…å®¹'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_blogs_created_at`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`created_at`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BTREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_blogs_user_id`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BTREE&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InnoDB&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utf8mb4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;åˆ›å»º-comments-è¡¨&quot;&gt;åˆ›å»º comments è¡¨&lt;/h4&gt;

&lt;p&gt;ä¸‹é¢çš„è¯­å¥åˆ›å»ºäº†è¯„è®º comments è¡¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- ä¸ºäº†è¯•éªŒç¯å¢ƒçš„å¹²å‡€æ•´æ´ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨ comments è¡¨&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- å¦‚æœå·²ç»å­˜åœ¨ comments è¡¨å°±å…ˆåˆ é™¤æ‰ï¼Œæ¥ç€åˆ›å»º comments è¡¨&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;-- ç”¨æˆ·è¡¨ä¸­åŒ…å«çš„å­—æ®µåŠå…¶å«ä¹‰å¯ä»¥æŸ¥çœ‹ COMMENT ä¸­å¤‡æ³¨çš„å†…å®¹&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`comments`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ä¸»é”®ï¼Œè¯„è®º id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`created_at`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'åˆ›å»ºæ—¶é—´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`updated_at`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT_TIMESTAMP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æ›´æ–°æ—¶é—´'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ç”¨æˆ· id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`blog_id`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'åšå®¢ id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;COMMENT&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'è¯„è®ºå†…å®¹ï¼Œé™åˆ¶æœ€å¤š 2048 ä¸ªå­—ç¬¦'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_blogs_created_at`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`created_at`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BTREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_blogs_user_id`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BTREE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_blogs_blog_id`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`blog_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BTREE&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InnoDB&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utf8mb4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;åˆ›å»ºä¸€äº›å‡æ•°æ®ä¾¿äºåé¢æ£€ç´¢ä½¿ç”¨&quot;&gt;åˆ›å»ºä¸€äº›å‡æ•°æ®ä¾¿äºåé¢æ£€ç´¢ä½¿ç”¨&lt;/h4&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;-- é¦–å…ˆä¸‹é¢æ‰‹åŠ¨ç»™æ¯ä¸ªè¡¨æ’å…¥äº†ä¸€æ¡è®°å½•&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`username`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`birthday`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ws_by_hand_1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blogs`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`title`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æµ·ç‡•'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'é«˜å°”åŸºçš„ä½œå“ã€‚'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blogs`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`title`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æˆ‘çš„å¤§å­¦'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'é«˜å°”åŸºçš„å¦ä¸€éƒ¨ä½œå“ã€‚'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`comments`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blog_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æˆ‘ä¹Ÿå–œæ¬¢é«˜å°”åŸºçš„ä½œå“ğŸ˜†'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`comments`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blog_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'è¿™ä¸€éƒ¨æˆ‘ä¹Ÿå¾ˆå–œæ¬¢ğŸ˜†'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;-- ä¸ºäº†è¯´æ˜é—®é¢˜ï¼Œä¸‹é¢å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¤šä¸ªè™šæ‹Ÿç”¨æˆ·çš„è¿‡ç¨‹&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DELIMITER&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PROCEDURE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock_users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PROCEDURE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock_users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;DECLARE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;INT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;WHILE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DO&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`username`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`birthday`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CONCAT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;&quot;ws_auto_&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blogs`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`title`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'èƒŒå½±'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æœ±è‡ªæ¸…çš„ä½œå“ã€‚'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`comments`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`user_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`blog_id`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`content`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'æˆ‘ä¹Ÿå–œæ¬¢ğŸ˜†'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WHILE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;END&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;DELIMITER&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;-- è°ƒç”¨ mock_users ç”Ÿæˆå¤šä¸ªç”¨æˆ·è´¦æˆ·ï¼Œä»¥åŠå¯¹åº”çš„ blogs å’Œ comments&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CALL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mock_users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;join-çš„ä½¿ç”¨&quot;&gt;JOIN çš„ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ JOIN çš„æ–¹å¼æ¥è·å–æŸä¸ªç”¨æˆ·å‘è¡¨çš„åšå®¢çš„æ‰€æœ‰å†…å®¹ï¼Œä»¥åŠå…¶åšå®¢æ‰€è·å¾—çš„è¯„è®ºå†…å®¹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_user_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;cu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_username&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blogs&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comments&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blog_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cu&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ws_by_hand_1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è·å–åˆ°çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå¯ä»¥é€šè¿‡æŒ‡å®šå­—æ®µæ¥é€‰æ‹©æ€§çš„æ£€å‡ºå¯¹åº”çš„å­—æ®µçš„å†…å®¹ï¼‰ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/pic/mysql-curd-join-explain-01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;explain-çš„ä½¿ç”¨&quot;&gt;EXPLAIN çš„ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;å› ä¸ºæˆ‘ä»¬çš„è¡¨çš„å†…å®¹æ¯”è¾ƒå°‘ï¼Œå› æ­¤è¿è¡Œä¸Šé¢ &lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; çš„å†…å®¹ä¸ä¼šæœ‰æ…¢çš„æ„Ÿè§‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPLAIN&lt;/code&gt; è¿›è¡Œä¸€ç•ªæ¢ç´¢ã€‚&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;EXPLAIN&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blog_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_user_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;cu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comment_username&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blogs&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;comments&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blog_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cu&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ws_by_hand_1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPALIN&lt;/code&gt; ä»£ç è¿è¡Œåå¾—åˆ°çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;type&lt;/code&gt; ä¸€åˆ—æ¢ç´¢ç´¢å¼•çš„ä½¿ç”¨æƒ…å†µï¼Œå‘ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;users as u&lt;/code&gt; è¡¨æ‰«äº†å…¨é‡è¡¨ï¼ˆ&lt;em&gt;type ä¸º ALL&lt;/em&gt;ï¼‰ï¼Œå½“æˆ‘ä»¬çš„ user è¡¨éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™é‡Œè‚¯å®šä¼šå­˜åœ¨é—®é¢˜ã€‚å…¶å®åœ¨åˆ›å»º &lt;code class=&quot;highlighter-rouge&quot;&gt;users&lt;/code&gt; è¡¨çš„æ—¶å€™æˆ‘åˆ»æ„å°‘åˆ›å»ºäº†ä¸€ä¸ªç´¢å¼•ï¼Œç†è®ºä¸Šåº”è¯¥åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;users.username&lt;/code&gt; è¿™ä¸ªå­—æ®µä¸Šæ·»åŠ ç´¢å¼•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/pic/mysql-curd-join-explain-02.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;åœ¨-usersusername-å­—æ®µä¸Šæ·»åŠ ç´¢å¼•&quot;&gt;åœ¨ users.username å­—æ®µä¸Šæ·»åŠ ç´¢å¼•&lt;/h4&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­å¥ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;users.username&lt;/code&gt; å­—æ®µæ·»åŠ ç´¢å¼•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`idx_user_username`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;`username`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨æ·»åŠ å®Œç´¢å¼•ä»¥åï¼Œåœ¨æ­¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPLAIN&lt;/code&gt; æˆ‘ä»¬çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; è¯­å¥ï¼Œå¯ä»¥å¾—åˆ°ä¸‹å›¾çš„ç»“æœã€‚å¯ä»¥å‘ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;users as u&lt;/code&gt;çš„ type å·²ç»å˜æˆäº†å­—æ®µ &lt;code class=&quot;highlighter-rouge&quot;&gt;username&lt;/code&gt; ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;idx_user_username&lt;/code&gt;ï¼‰ä¸Šçš„ç´¢å¼•&lt;code class=&quot;highlighter-rouge&quot;&gt;ref&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/pic/mysql-curd-join-explain-03.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡å°±æ•°æ®åº“çš„ä½¿ç”¨ç»™å‡ºä¸€äº›ç¤ºä¾‹ï¼Œé€šè¿‡å®ä¾‹ä»£ç çš„æ–¹å¼ç»™å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;CURD&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;JOIN&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;EXPLAIN&lt;/code&gt;çš„ä½¿ç”¨æ–¹å¼ï¼Œåœ¨å®é™…ç”Ÿäº§è¿‡ç¨‹ä¸­å¯ä»¥ä¸ºå¤§å®¶æä¾›ä¸€äº›å‚è€ƒã€‚
å¯¹äº ORM å·¥å…·çš„ä½¿ç”¨ï¼Œåœ¨æ£€ç´¢çš„è¿‡ç¨‹ä¸­æœ¬è´¨æ˜¯ SQL è¯­å¥çš„æ‹¼è£…ã€æ£€ç´¢ç»“æœçš„è§£æï¼Œåœ¨æ•°æ®åº“å±‚é¢äº†è§£ SQL æ— ç–‘èƒ½å¤Ÿå¢å¼ºå¤§å®¶å¯¹ ORM çš„ä½¿ç”¨çš„ç†è§£ï¼Œä»è€Œå†™å‡ºæ›´åŠ é«˜æ•ˆå¯é çš„ä»£ç ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://brew.sh/&quot;&gt;The missing package manager for macOS (or Linux) â€” Homebrew&lt;/a&gt; macOS ä¸Šå¼ºå¤§çš„åŒ…ç®¡ç†å™¨&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/tufujie/p/9413852.html&quot;&gt;MySQL Explainè¯¦è§£ - åšå®¢å›­&lt;/a&gt; æ¯”è¾ƒè¯¦å°½çš„ä»‹ç» explain çš„å†…å®¹&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/2019/10/19/mac-mysql-reinstall.html&quot;&gt;å¸è½½ macOS ä¸­çš„ MySQL æ—¶é‡åˆ°çš„ç–‘é—® - æ•¬ç»´&lt;/a&gt; åœ¨ macOS ä¸Šå®‰è£…/å¸è½½ mysql çš„ä»‹ç»&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sat, 16 Nov 2019 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2019/11/16/mysql-curd-join-explain.html</link>
        <guid isPermaLink="true">https://jingwei.link/2019/11/16/mysql-curd-join-explain.html</guid>
        
        <category>æ•°æ®åº“</category>
        
        <category>ç»éªŒ</category>
        
        <category>å®ç”¨</category>
        
        
        <category>æ•°æ®åº“</category>
        
      </item>
    
      <item>
        <title>ã€ŠåŸæ±åŸå‘³ Go è¯­è¨€å­¦ä¹ ã€‹(9) effective go æ¥å£åŠæ³›å‹</title>
        <description>&lt;ul id=&quot;markdown-toc&quot;&gt;
  &lt;li&gt;&lt;a href=&quot;#èµ„æ–™&quot; id=&quot;markdown-toc-èµ„æ–™&quot;&gt;èµ„æ–™&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#æ¥å£ä¸å…¶ä»–ç±»å‹interfaces-and-other-types&quot; id=&quot;markdown-toc-æ¥å£ä¸å…¶ä»–ç±»å‹interfaces-and-other-types&quot;&gt;æ¥å£ä¸å…¶ä»–ç±»å‹ï¼ˆInterfaces and other typesï¼‰&lt;/a&gt;    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#æ¥å£interfaces&quot; id=&quot;markdown-toc-æ¥å£interfaces&quot;&gt;æ¥å£ï¼ˆInterfacesï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#ç±»å‹è½¬æ¢conversions&quot; id=&quot;markdown-toc-ç±»å‹è½¬æ¢conversions&quot;&gt;ç±»å‹è½¬æ¢ï¼ˆConversionsï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#æ¥å£è½¬æ¢ä¸ç±»å‹æ–­è¨€interface-conversions-and-type-assertions&quot; id=&quot;markdown-toc-æ¥å£è½¬æ¢ä¸ç±»å‹æ–­è¨€interface-conversions-and-type-assertions&quot;&gt;æ¥å£è½¬æ¢ä¸ç±»å‹æ–­è¨€ï¼ˆInterface conversions and type assertionsï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#æ³›å‹generality&quot; id=&quot;markdown-toc-æ³›å‹generality&quot;&gt;æ³›å‹ï¼ˆGeneralityï¼‰&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#æ¥å£ä¸æ–¹æ³•interfaces-and-methods&quot; id=&quot;markdown-toc-æ¥å£ä¸æ–¹æ³•interfaces-and-methods&quot;&gt;æ¥å£ä¸æ–¹æ³•ï¼ˆInterfaces and methodsï¼‰&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;èµ„æ–™&quot;&gt;èµ„æ–™&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://golang.google.cn/doc/effective_go.html&quot;&gt;effective go&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av75076225&quot;&gt;æœ¬æ–‡çš„è§†é¢‘åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;æ¥å£ä¸å…¶ä»–ç±»å‹interfaces-and-other-types&quot;&gt;æ¥å£ä¸å…¶ä»–ç±»å‹ï¼ˆInterfaces and other typesï¼‰&lt;/h1&gt;

&lt;h2 id=&quot;æ¥å£interfaces&quot;&gt;æ¥å£ï¼ˆInterfacesï¼‰&lt;/h2&gt;

&lt;p&gt;åœ¨ Go ä¸­ï¼Œå¯ä»¥ç”¨æ¥å£æ¥æŒ‡å®šä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡å¯ä»¥åš&lt;strong&gt;æŸä»¶äº‹æƒ…&lt;/strong&gt;ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥ç”¨åœ¨&lt;strong&gt;æŸä¸ªæŒ‡å®šçš„åœ°æ–¹&lt;/strong&gt;ã€‚ä¹‹å‰å·²ç»çœ‹åˆ°è¿‡å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼šâ‘  å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;String&lt;/code&gt; æ–¹æ³•å¯ä»¥è‡ªå®šä¹‰ç±»å‹çš„æ‰“å°æ ¼å¼ï¼Œâ‘¡ &lt;code class=&quot;highlighter-rouge&quot;&gt;Fprintf&lt;/code&gt; å¯ä»¥å‘ä»»ä½•å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Write&lt;/code&gt; æ–¹æ³•çš„ç±»å‹æ‰“å°å†…å®¹ã€‚åœ¨ Go æºç ä¸­ï¼Œæœ‰å¾ˆå¤šåªåŒ…å«ä¸€ä¸¤ä¸ªæ–¹æ³•çš„æ¥å£ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™äº›æ¥å£çš„åç§°ç›´æ¥è¡ç”Ÿè‡ªä»–ä»¬æ‰€åŒ…å«çš„æ–¹æ³•ï¼Œæ¯”å¦‚åªæœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Write&lt;/code&gt; æ–¹æ³•çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Writer&lt;/code&gt; æ¥å£ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚æ¯”å¦‚åŒ… &lt;code class=&quot;highlighter-rouge&quot;&gt;sort&lt;/code&gt; å¯ä»¥ç»™å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.Interface&lt;/code&gt; æ¥å£çš„é›†åˆè¿›è¡Œæ’åºï¼Œä¹Ÿå°±æ˜¯åªè¦é›†åˆç±»å‹å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;Len()&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Less(i, j int) bool&lt;/code&gt;, å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Swap(i, j int)&lt;/code&gt; æ–¹æ³•ï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.Sort&lt;/code&gt; è¿›è¡Œæ’åºäº†ï¼›åœ¨å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.Interface&lt;/code&gt; æ¥å£åï¼Œé›†åˆè¿˜å¯ä»¥é€šè¿‡å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;fmt.Stringer&lt;/code&gt; æ¥å£æ¥è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼ã€‚ä¸‹é¢çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; åŒæ—¶å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.Interface&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;fmt.Stringer&lt;/code&gt; ä¸¤ä¸ªæ¥å£ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// Methods required by sort.Interface.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Less&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// Copy returns a copy of the Sequence.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;copy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// Method for printing - sorts the elements before printing.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// Make a copy; don't overwrite argument.&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;[&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;elem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// Loop is O(NÂ²); will fix that in next example.&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;]&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ç±»å‹è½¬æ¢conversions&quot;&gt;ç±»å‹è½¬æ¢ï¼ˆConversionsï¼‰&lt;/h2&gt;

&lt;p&gt;ä¸Šé¢ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;String&lt;/code&gt; æ–¹æ³•ï¼ˆå¤æ‚åº¦ä¸º O(NÂ²)ï¼‰åšäº†å¾ˆå¤š &lt;code class=&quot;highlighter-rouge&quot;&gt;Sprint&lt;/code&gt; å·²ç»åšå®Œçš„äº‹æƒ…â€”â€”&lt;code class=&quot;highlighter-rouge&quot;&gt;Sprint&lt;/code&gt; å‡½æ•°å†…ç½®äº†æ‰“å°é›†åˆç±»å‹å€¼çš„åŠŸèƒ½ã€‚å› æ­¤å¦‚æœè°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sprint&lt;/code&gt; å‰æˆ‘ä»¬æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; è½¬æ¢ä¸ºæ™®é€šçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;[]int&lt;/code&gt;ï¼Œå°±å¯ä»¥é¿å…é‡å¤çš„å·¥ä½œåŒæ—¶è¿˜ä¼šåŠ å¿«æ‰§è¡Œé€Ÿåº¦ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•æ˜¯å¦ä¸€ä¸ªåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;String&lt;/code&gt; æ–¹æ³•ä¸­å®‰å…¨è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sprintf&lt;/code&gt; å‡½æ•°çš„ä¾‹å­ï¼ˆä¸ä¼šè§¦å‘å¾ªç¯è°ƒç”¨ï¼‰ã€‚å› ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;[]int&lt;/code&gt; è¿™ä¸¤ä¸ªç±»å‹åªæ˜¯ç±»å‹åä¸åŒï¼Œå…¶åº•å±‚çš„æ•°æ®ç»“æ„æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå› æ­¤è¿™ä¸¤ä¸ªç±»å‹çš„å˜é‡å¯ä»¥ç›¸äº’è¿›è¡Œè½¬æ¢ã€‚è¿™é‡Œçš„ç±»å‹è½¬æ¢å¹¶ä¸ä¼šåˆ›å»ºæ–°çš„å€¼ï¼Œå®ƒåªæ˜¯ä¸´æ—¶æŠŠä¸€ä¸ªå­˜åœ¨çš„å€¼ä½œä¸ºå¦ä¸€ç§ç±»å‹çš„å€¼æ¥çœ‹å¾…ï¼ˆæœ‰ç‰¹ä¾‹ï¼Œæ¯”å¦‚ go å…è®¸æ•´æ•°è½¬æ¢æˆä¸ºæµ®ç‚¹æ•°ï¼Œè€Œè¿™ç§è½¬æ¢ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ã€‚ï¼‰&lt;/p&gt;

&lt;p&gt;åœ¨ Go ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»å‹è½¬æ¢çš„æ–¹å¼è·å–æ–°ç±»å‹ä¸Šçš„æ–¹æ³•çš„è°ƒç”¨æƒé™ï¼Œè¿™ç§æ–¹å¼ç®—æ˜¯ä¸€ç§æƒ¯ç”¨æ‰‹æ³•å§ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·²ç»å­˜åœ¨çš„ç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.IntSlice&lt;/code&gt; æ¥å‡å°‘ä»£ç é‡ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// Method for printing - sorts the elements before printing&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Sequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IntSlice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sort&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; è½¬æ¢ä¸ºä¸åŒçš„ç±»å‹ä»è€Œä½¿ç”¨æ¯ç§ç±»å‹åŒ…å«çš„åŠŸèƒ½ï¼Œæ¯ç§è½¬æ¢å®Œæˆä¸€éƒ¨åˆ†çš„å·¥ä½œï¼Œä¸€èµ·è¾¾æˆæœ€åæœŸæœ›çš„æ•ˆæœï¼›è¯­å¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.IntSlice(s)&lt;/code&gt; æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;s&lt;/code&gt; è½¬æ¢ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.IntSlice&lt;/code&gt; ç±»å‹ï¼Œè¿™ç§ç±»å‹å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;sort.Interface&lt;/code&gt; æ¥å£ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sort()&lt;/code&gt; æ–¹æ³•ï¼Œå°±é¿å…æˆ‘ä»¬è‡ªå·±åœ¨å®šä¹‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;Len/Less/Swap&lt;/code&gt; æ–¹æ³•äº†ã€‚è¿™ç§ç±»å‹å˜æ¥å˜å»çš„ç”¨æ³•çœ‹èµ·æ¥ä¸åŒå¯»å¸¸ï¼Œä½†æ˜¯å†™èµ·æ¥å¾ˆé«˜æ•ˆã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ¥å£è½¬æ¢ä¸ç±»å‹æ–­è¨€interface-conversions-and-type-assertions&quot;&gt;æ¥å£è½¬æ¢ä¸ç±»å‹æ–­è¨€ï¼ˆInterface conversions and type assertionsï¼‰&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ç±»å‹ switch&lt;/strong&gt; è¯­æ³•æ˜¯ç±»å‹è½¬æ¢çš„ä¸€ç§æ–¹å¼ï¼šä»–é¦–å…ˆæ¥æ”¶æŸä¸ª&lt;strong&gt;æ¥å£å˜é‡&lt;/strong&gt;ï¼Œç„¶ååœ¨æ¯ä¸ª case é‡ŒæŠŠæ¥å£å˜é‡è½¬æ¢ä¸ºå¯¹åº”çš„ç±»å‹ã€‚ä¸‹é¢çš„ä»£ç æ˜¯ç®€åŒ–ç‰ˆçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;fmt.Printf&lt;/code&gt; æ–¹æ³•ï¼Œç”¨æ¥å±•ç¤ºå¦‚ä½•é€šè¿‡ç±»å‹ switch æŠŠä¸€ä¸ªæ¥å£å˜é‡è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚å¦‚æœæ¥å£å˜é‡å·²ç»æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåªéœ€è¦æŠŠè¿™ä¸ªå­—ç¬¦ä¸²å€¼è¿”å›å°±å¯ä»¥äº†ï¼›å¦åˆ™å‡å¦‚å®ƒå®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;String&lt;/code&gt; æ–¹æ³•ï¼ˆå®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Stringer&lt;/code&gt; æ¥å£ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•å¹¶è¿”å›å…¶ç»“æœã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Stringer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;// Value provided by caller.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Stringer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç é‡Œï¼Œç¬¬ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;case&lt;/code&gt; ç›´æ¥ä½¿ç”¨äº†æ¥å£å˜é‡çš„åº•å±‚æ•°æ®ï¼›ç¬¬äºŒä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;case&lt;/code&gt; æŠŠä¸€ä¸ªæ¥å£è½¬æ¢æˆå¦ä¸€ä¸ªæ¥å£ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;interface{}&lt;/code&gt; çš„å€¼è½¬æ¢ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;Stringer&lt;/code&gt; ç±»å‹çš„å€¼ï¼‰ï¼Œåœ¨ Go ä¸­è¿™ç§æŠŠç±»å‹æ‚ç³…åœ¨ä¸€èµ·ä½¿ç”¨çš„åœºæ™¯ä¹Ÿæ˜¯æ¯”è¾ƒå¤šè§çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†è½¬æ¢ç±»å‹ä¸Šé¢å¤§åŠ¨å¹²æˆˆåœ°ä½¿ç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;switch...case...&lt;/code&gt;è¯­å¥ï¼Œå‡å¦‚æˆ‘ä»¬çŸ¥é“æŸä¸ªå€¼ä¿å­˜çš„æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt; ç±»å‹çš„å€¼ï¼Œè¯¥æ€ä¹ˆç›´æ¥æŠŠè¿™ä¸ªå€¼è§£æå‡ºæ¥ï¼Ÿå½“ç„¶å¯ä»¥ä½¿ç”¨åªæœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;case&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;switch&lt;/code&gt; è¯­å¥æ¥å®ç°ï¼Œä½†æ˜¯å¯ä»¥æ›´ç®€å•åœ°é€šè¿‡&lt;strong&gt;ç±»å‹æ–­è¨€&lt;/strong&gt;æ¥å®ç°ã€‚ç±»å‹æ–­è¨€å¯ä»¥åœ¨æ¥å£ç±»å‹çš„å€¼ä¸Šé¢æŠ½å–ç‰¹å®šç±»å‹çš„å€¼ã€‚å®ƒçš„è¯­æ³•æ˜¯ä» &lt;strong&gt;ç±»å‹ switch&lt;/strong&gt; ä¸­å€Ÿé‰´çš„ï¼Œä½†æ˜¯ switch ä¸­ä½¿ç”¨çš„æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;value.(type)&lt;/code&gt;ï¼Œç±»å‹æ–­è¨€çš„æ‹¬å·ä¸­ç›´æ¥æ˜¾å¼æŒ‡å®šç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;value.(typeName)&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;typeName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;value.(typeName)&lt;/code&gt; çš„ç»“æœæ˜¯é™æ€ç±»å‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;typeName&lt;/code&gt; å¯¹åº”çš„æ–°å€¼ã€‚è¿™ä¸ªé™æ€ç±»å‹è¦ä¹ˆæ˜¯æ¥å£å˜é‡çš„åº•å±‚æ•°æ®ç±»å‹ï¼Œè¦ä¹ˆæ˜¯æ¥å£å˜é‡çš„åº•å±‚æ•°æ®ç±»å‹å®ç°çš„å¦ä¸€ä¸ªæ¥å£ã€‚å¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“æŸä¸ªå€¼å­˜å‚¨çš„æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;str := value.(string)&lt;/code&gt; å°±å¯ä»¥è·å–åˆ°ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç±»ä¼¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;str := value.(string)&lt;/code&gt; çš„å†™æ³•å¾ˆç®€å•å¾ˆæ˜“ç”¨ï¼Œä½†æ˜¯å¦‚æœåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;value&lt;/code&gt; ä¸­ä¿å­˜çš„ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯å¯¼è‡´ä»£ç å´©æºƒã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ â€œé€—å·ä¸okâ€ çš„æƒ¯ç”¨è¯­æ³•æ¥æ£€æµ‹ç›¸åº”çš„å€¼æ˜¯å¦æ˜¯å­—ç¬¦ä¸²ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;string value is: %q&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;value is not a string&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœç±»å‹æ–­è¨€å¤±è´¥äº†ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;str&lt;/code&gt; ä¾ç„¶å­˜åœ¨ä¸”æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œåªä¸è¿‡å®ƒçš„å€¼ä¼šæ˜¯ç©ºå­—ç¬¦ä¸²ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†è¯´æ˜è¿™ç§ â€œé€—å·ä¸okâ€ å½¢å¼çš„ç±»å‹æ–­è¨€çš„åŠŸèƒ½ï¼Œä¸‹é¢çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;if - else&lt;/code&gt; è¡¨è¾¾å¼ä¸ä¸Šé¢çš„ç±»å‹ switch ç¤ºä¾‹å®ç°äº†ç›¸åŒçš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stringer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ³›å‹generality&quot;&gt;æ³›å‹ï¼ˆGeneralityï¼‰&lt;/h2&gt;

&lt;p&gt;å¦‚æœç±»å‹çš„å­˜åœ¨åªæ˜¯ä¸ºäº†å®ç°æŸä¸ªæ¥å£ï¼Œé™¤äº†æ¥å£ä¸­é™å®šå¿…é¡»è¦å®ç°çš„æ–¹æ³•æ²¡æœ‰å…¶ä»–éœ€è¦å¯¼å‡ºçš„æ–¹æ³•ï¼Œæ­¤æ—¶å°±æ²¡æœ‰å¿…è¦å¯¼å‡ºè¿™ä¸ªç±»å‹ï¼Œåªéœ€å¯¼å‡ºå¯¹åº”æ¥å£å³å¯ï¼Œè¡¨æ˜è¿™ä¸ªç±»å‹çš„å€¼é™¤äº†æ¥å£é‡Œå®šä¹‰çš„æ–¹æ³•å¤–æ²¡æœ‰å…¶ä»–çš„æ–¹æ³•ã€‚å‡å¦‚å¯¹åŒä¸€ä¸ªæ¥å£æœ‰ä¸åŒçš„å®ç°ï¼Œè¿™ç§åšæ³•è¿˜èƒ½é¿å…é‡å¤åœ°ç»™æ–¹æ³•å†™æ–‡æ¡£ï¼ˆåªéœ€è¦åœ¨æ¥å£é‡Œæ³¨æ˜æ¯ç§æ–¹æ³•çš„ä½œç”¨ã€ç”¨æ³•ï¼Œå„ä¸ªç±»å‹å®ç°è¿™äº›æ–¹æ³•çš„æ—¶å€™åªéœ€è¦ç®€å•æ³¨æ˜æ˜¯å“ªä¸ªæ¥å£çš„æ–¹æ³•å°±å¯ä»¥äº†ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç±»å‹çš„æ„é€ å™¨åº”è¯¥è¿”å›æ¥å£çš„å€¼è€Œä¸æ˜¯ç›¸åº”çš„ç±»å‹çš„å€¼ã€‚æ¯”å¦‚ï¼Œåœ¨å“ˆå¸Œåº“ &lt;code class=&quot;highlighter-rouge&quot;&gt;crc32.NewIEEE&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;adler32.New&lt;/code&gt; ä¸¤ä¸ªæ„é€ å™¨è¿”å›çš„æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;hash.Hash32&lt;/code&gt; æ¥å£ç±»å‹çš„å€¼ã€‚å¦‚æœè¦æŠŠ CRC-32 çš„ç®—æ³•æ›¿ä»£ä¸º Adler-32 çš„ç®—æ³•ï¼Œåªéœ€è¦æ”¹å˜ä¸€ä¸‹è°ƒç”¨çš„æ„é€ å™¨ï¼Œå…¶ä»–çš„ä¸éœ€è¦ä»»ä½•æ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ ·çš„ï¼Œå¯ä»¥è®©ä¸åŒ &lt;code class=&quot;highlighter-rouge&quot;&gt;crypto&lt;/code&gt; åŒ…ä¸­çš„æµå¯†ç ç®—æ³•ä¸å—åŠ å¯†ç®—æ³•åˆ†å¼€ã€‚åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;crypto/cipher&lt;/code&gt; åŒ…ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Block&lt;/code&gt; æ¥å£é™å®šäº†å—åŠ å¯†ç®—æ³•å¯¹æŸä¸ªç‹¬ç«‹çš„æ•°æ®å—è¿›è¡ŒåŠ å¯†çš„è¡Œä¸ºï¼›ä¸ºäº†é€šç”¨æ€§ï¼Œä½¿ç”¨å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;Block&lt;/code&gt; æ¥å£çš„åŠ å¯†åŒ…æ¥åˆ›å»ºæµåŠ å¯†å™¨ï¼Œä»è€Œå°è£…å—å¯†ç ç®—æ³•çš„ç»†èŠ‚ï¼ŒæŠŠä½¿ç”¨è€…çš„æ³¨æ„åŠ›è§£æ”¾å‡ºæ¥ï¼›æœ€åä¸ºäº†é€šç”¨æ€§ï¼Œè¿”å› &lt;code class=&quot;highlighter-rouge&quot;&gt;Stream&lt;/code&gt; æ¥å£ç±»å‹çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;æ¥å£ &lt;code class=&quot;highlighter-rouge&quot;&gt;crypto/cipher&lt;/code&gt; çš„æºç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Block&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;BlockSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Encrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Decrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Stream&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;XORKeyStream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸‹é¢æ˜¯ CTRï¼ˆè®¡æ•°å™¨æ¨¡å¼ï¼‰æµçš„å®šä¹‰ï¼Œå®ƒå¯ä»¥æŠŠå—å¯†ç è½¬æ¢æˆä¸ºæµå¯†ç ï¼›å¯ä»¥çœ‹åˆ°å—å¯†ç ç›¸å…³çš„ç»†èŠ‚è¢«æŠ½è±¡äº†ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// NewCTR returns a Stream that encrypts/decrypts using the given Block in&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// counter mode. The length of iv must be the same as the Block's block size.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NewCTR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iv&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Stream&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;NewCTR&lt;/code&gt; ä¸å±€é™åº”ç”¨åˆ°æŸç§ç‰¹å®šçš„åŠ å¯†ç®—æ³•å’Œæ•°æ®æºï¼Œå®ƒèƒ½å¤Ÿåº”ç”¨åœ¨æ‰€æœ‰å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Block&lt;/code&gt; æ¥å£å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Stream&lt;/code&gt; æ¥å£çš„åŠ å¯†ç®—æ³•ä¸Šé¢ã€‚åŒæ—¶å› ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;NewCTR&lt;/code&gt; è¿”å›çš„æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Stream&lt;/code&gt; æ¥å£ç±»å‹ï¼Œå› æ­¤ç”¨å…¶ä»–çš„åŠ å¯†ç®—æ³•æ›¿ä»£ &lt;code class=&quot;highlighter-rouge&quot;&gt;CTR&lt;/code&gt; ç®—æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠè°ƒç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;NewCTR&lt;/code&gt; çš„åœ°æ–¹æ›¿æ¢æˆä¸ºå…¶ä»–åŠ å¯†ç®—æ³•çš„æ„é€ å™¨å°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ¥å£ä¸æ–¹æ³•interfaces-and-methods&quot;&gt;æ¥å£ä¸æ–¹æ³•ï¼ˆInterfaces and methodsï¼‰&lt;/h2&gt;

&lt;p&gt;åœ¨ Go ä¸­å‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥å…³è”æ–¹æ³•ï¼Œéƒ½å¯ä»¥æ»¡è¶³æŸä¸ªæ¥å£ã€‚å…¶ä¸­ä¸€ä¸ªä¾‹å­æ˜¯å®šä¹‰äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Handler&lt;/code&gt; æ¥å£çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;http&lt;/code&gt; åŒ…ï¼šä»»ä½•å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Handler&lt;/code&gt; æ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥å¤„ç† HTTP è¯·æ±‚ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Handler&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ServeHTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…¶ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;ResponseWriter&lt;/code&gt; æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæä¾›äº†å“åº”å®¢æˆ·ç«¯çš„å‡ ä¸ªæ–¹æ³•ï¼ŒåŒ…å«æ ‡å‡†çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Write&lt;/code&gt; æ–¹æ³•ï¼Œå› æ­¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;http.ResponseWriter&lt;/code&gt; å¯ä»¥è¢«ä½¿ç”¨åœ¨ä»»ä½•åº”ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;io.Writer&lt;/code&gt; çš„åœ°æ–¹ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;Request&lt;/code&gt; æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ŒåŒ…å«äº†ä»å®¢æˆ·ç«¯è§£æå‡ºæ¥çš„è¯·æ±‚ä½“ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†ç®€åŒ–ï¼Œè®©æˆ‘ä»¬å¿½ç•¥ POSTs å¹¶ä¸”å‡è®¾ HTTP è¯·æ±‚åªæœ‰ GETsã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªçŸ­å°ä½†æ˜¯å®Œæ•´çš„ HTTP è¯·æ±‚å¤„ç†å™¨ï¼ˆå®ç°äº† ServerHTTP æ–¹æ³•ï¼‰ï¼Œå®ƒèƒ½å¤Ÿç”¨äºè®¡æ•°é¡µé¢è¢«æŸ¥çœ‹çš„æ¬¡æ•°ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// Simple counter server.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Counter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServeHTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;counter = %d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ï¼ˆæ„Ÿå…´è¶£çš„è¯å¯ä»¥æ¢ç´¢ä¸€ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Fprintf&lt;/code&gt; æ˜¯å¦‚ä½•æŠŠå†…å®¹æ‰“å°åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;http.ResponseWriter&lt;/code&gt; çš„ï¼‰&lt;/p&gt;

&lt;p&gt;ä½œä¸ºå‚è€ƒï¼Œä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚æœæŠŠè¿™æ ·çš„æœåŠ¡ç»‘å®šåˆ° URL æ ‘ä¸Šçš„ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;net/http&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/counter&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­é‡Œå…¶å®æ•´æ•°ç±»å‹ä¹Ÿå¯ä»¥æ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;Counter&lt;/code&gt; å£°æ˜æˆä¸€ä¸ªç»“æ„ä½“å‘¢ï¼Ÿï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„æ¥æ”¶è€…å¿…é¡»æ˜¯æŒ‡é’ˆæ‰å¯ä»¥è®©è°ƒç”¨è€…æ„ŸçŸ¥åˆ°å®ƒçš„å¢åŠ ï¼‰&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// Simpler counter server.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Counter&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServeHTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fprintf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;counter = %d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœé¡µé¢è¢«è®¿é—®æ—¶éœ€è¦è¿›è¡Œé€šçŸ¥ï¼Œä»£ç è¯¥æ€ä¹ˆå†™ï¼Ÿæ­¤æ—¶å¯ä»¥è€ƒè™‘ç»™ç½‘é¡µç»‘ä¸€ä¸ªä¿¡é“ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// A channel that sends a notification on each visit.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// (Probably want the channel to be buffered.)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Chan&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Chan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServeHTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fprint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;notification sent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœ€åï¼Œå¦‚æœæˆ‘ä»¬æƒ³å±•ç¤ºæœåŠ¡å™¨å¯åŠ¨æ—¶åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;/args&lt;/code&gt; è·¯å¾„é‡Œä¼ é€’çš„å‚æ•°ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å†™ä¸€ä¸ªå‡½æ•°æ¥æ‰“å°è¿™äº›å‚æ•°ã€‚&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArgServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é‚£æˆ‘ä»¬è¯¥æ€ä¹ˆæŠŠå®ƒå˜æˆä¸€ä¸ª HTTP æœåŠ¡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å®šä¹‰ä»»æ„çš„ç±»å‹å¹¶ç»™è¿™ä¸ªç±»å‹å†™ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;ArgServer&lt;/code&gt; æ–¹æ³•ï¼Œç„¶åä¸ä½¿ç”¨æ¥æ”¶è€…çš„å€¼å°±å¯ä»¥äº†ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼šå› ä¸ºæˆ‘ä»¬å¯ä»¥ç»™ä»»ä½•ç±»å‹ï¼ˆé™¤äº†æŒ‡é’ˆå’Œæ¥å£ï¼‰å®šä¹‰æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç»™å‡½æ•°å®šä¹‰æ–¹æ³•ã€‚åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;http&lt;/code&gt; ä¸­å°±åŒ…å«è¿™æ ·çš„ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// The HandlerFunc type is an adapter to allow the use of&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// ordinary functions as HTTP handlers.  If f is a function&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// with the appropriate signature, HandlerFunc(f) is a&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;// Handler object that calls f.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// ServeHTTP calls f(w, req).&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ServeHTTP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;HandlerFunc&lt;/code&gt; ç±»å‹å®šä¹‰äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;ServeHTTP&lt;/code&gt; æ–¹æ³•ï¼Œå› æ­¤è¿™ä¸ªç±»å‹çš„å€¼å¯ä»¥å¤„ç† HTTP è¯·æ±‚ã€‚å¯ä»¥ç¢ç£¨ä¸€ä¸‹ä¸Šé¢ä»£ç ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;ServeHTTP&lt;/code&gt; è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨ï¼šæ¥å—è€…æ˜¯ä¸€ä¸ªå‡½æ•° &lt;code class=&quot;highlighter-rouge&quot;&gt;f&lt;/code&gt;ï¼Œåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;ServeHTTP&lt;/code&gt; æ–¹æ³•çš„å†…éƒ¨è°ƒç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;f&lt;/code&gt;ã€‚å¯èƒ½è¿™çœ‹èµ·æ¥æœ‰ä¸€ç‚¹å¥‡æ€ªï¼Œä½†æ˜¯è¿™å’Œ â€œæ¥æ”¶è€…æ˜¯ä¿¡é“å¹¶ä¸”åœ¨å¯¹åº”çš„æ–¹æ³•ä¸­å‘ä¿¡é“ä¸­å‘é€å†…å®¹â€ æ˜¯ä¸€æ ·çš„è®¾è®¡æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†è®© &lt;code class=&quot;highlighter-rouge&quot;&gt;ArgServer&lt;/code&gt; æ³¨å†Œä¸º HTTP æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¿®æ”¹å®ƒè®©å®ƒæœ‰æ­£ç¡®çš„ç­¾åï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// Argument server.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ArgServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ResponseWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;req&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Fprintln&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;ArgServer&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;HandlerFunc&lt;/code&gt; æœ‰ç›¸åŒçš„ç­¾åï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå®ƒè½¬æ¢ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;HandlerFunc&lt;/code&gt; ç±»å‹ä»è€Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å‹çš„æ–¹æ³•ï¼Œå°±å¥½åƒæˆ‘ä»¬æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; è½¬æ¢ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;IntSlice&lt;/code&gt; ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;IntSlice.Sort&lt;/code&gt; ä¸€æ ·ã€‚ä¸‹é¢çš„ä»£ç ç®€æ´æ˜äº†ï¼š&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Handle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HandlerFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ArgServer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·å½“æœ‰äººè®¿é—®äº†é¡µé¢ &lt;code class=&quot;highlighter-rouge&quot;&gt;/args&lt;/code&gt;ï¼Œå¤„ç†å™¨åœ¨è¿™ä¸ªé¡µé¢å®‰è£…äº†ç±»å‹ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;HandlerFunc&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;ArgServer&lt;/code&gt;ï¼Œå› æ­¤ HTTP æœåŠ¡å™¨ä¼šè§¦å‘ &lt;code class=&quot;highlighter-rouge&quot;&gt;HandlerFunc&lt;/code&gt; ç±»å‹çš„æ–¹æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;ServeHTTP&lt;/code&gt;ï¼Œä¸Šé¢çš„ä»£ç é‡Œå¯¹åº”çš„æ¥æ”¶å™¨æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;ArgServer&lt;/code&gt;ï¼Œå¹¶ä¸”ä¼šé€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;HandlerFunc.ServeHTTP&lt;/code&gt; å†…çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;f(w, req)&lt;/code&gt;ï¼‰è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;ArgServer&lt;/code&gt; æ–¹æ³•ï¼Œå¦‚æ­¤å‚æ•°å°±è¢«å±•ç¤ºå‡ºæ¥ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ä¸€å°èŠ‚ä¸­æˆ‘ä»¬åœ¨ç»“æ„ä½“ã€æ•´æ•°ã€ä¿¡é“å’Œå‡½æ•°ä¸Šé¢åˆ†åˆ«åˆ›å»ºäº† HTTP æœåŠ¡å™¨ï¼Œå¯ä»¥åšåˆ°è¿™ä¸€åˆ‡éƒ½æ˜¯å› ä¸ºæ¥å£çš„çº¯ç²¹æ€§ï¼šâ‘  æ¥å£åªå…³æ³¨æ–¹æ³•ï¼Œâ‘¡å¯ä»¥ç»™å‡ ä¹æ‰€æœ‰çš„ç±»å‹ï¼ˆé™¤äº†æŒ‡é’ˆå’Œæ¥å£ï¼‰å…³è”æ–¹æ³•ä»è€Œå®ç°æ¥å£ã€‚&lt;/p&gt;
</description>
        <pubDate>Sat, 09 Nov 2019 00:00:00 +0800</pubDate>
        <link>https://jingwei.link/2019/11/09/effectivego-interface.html</link>
        <guid isPermaLink="true">https://jingwei.link/2019/11/09/effectivego-interface.html</guid>
        
        <category>golang</category>
        
        <category>åŸºç¡€</category>
        
        <category>å®ç”¨</category>
        
        
        <category>golang</category>
        
      </item>
    
  </channel>
</rss>